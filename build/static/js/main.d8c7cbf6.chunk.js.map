{"version":3,"sources":["utils/index.ts","components/Home/Home.module.css","components/Playlist/ChatVideoCard.module.css","utils/generateName.ts","components/UserMenu/UserMenu.tsx","components/Chat/Chat.tsx","components/Modal/LoginModal.tsx","components/Modal/SubscribeModal.tsx","components/SubscribeButton/SubscribeButton.tsx","components/Modal/ProfileModal.tsx","components/TopBar/TopBar.tsx","components/VBrowser/data.ts","components/VBrowser/events.ts","components/VBrowser/base.ts","components/VBrowser/VBrowser.tsx","components/VBrowser/index.ts","components/VideoChat/VideoChat.tsx","components/Settings/LocalSettings.tsx","components/Modal/MultiStreamModal.tsx","utils/examples.ts","components/Playlist/ChatVideoCard.tsx","components/ComboBox/ComboBox.tsx","components/SearchResult/SearchResult.tsx","components/SearchComponent/SearchComponent.tsx","components/Controls/Controls.tsx","components/Modal/VBrowserModal.tsx","components/Modal/PermanentRoomModal.tsx","components/Settings/SettingsTab.tsx","components/Modal/ErrorModal.tsx","components/Modal/PasswordModal.tsx","components/Modal/ScreenShareModal.tsx","components/Modal/FileShareModal.tsx","components/App/App.tsx","components/Home/Home.tsx","components/PrivacyTerms/PrivacyTerms.tsx","components/Footer/Footer.tsx","serviceWorker.js","index.tsx"],"names":["formatTimestamp","input","undefined","Number","isNaN","Infinity","hours","Math","floor","minutes","toString","padStart","seconds","formatSpeed","toFixed","colorMappings","red","orange","yellow","olive","green","teal","blue","violet","purple","pink","brown","grey","black","colorCache","getColorForStringHex","id","colors","abs","hash","i","length","charCodeAt","hashString","getColorForString","getMediaType","startsWith","testAutoplay","a","canAutoplay","video","result","decodeEntities","DOMParser","parseFromString","documentElement","textContent","debounce","func","wait","immediate","timeout","context","this","args","arguments","later","apply","callNow","clearTimeout","setTimeout","getMediaPathForList","list","match","name","decoded","decodeURIComponent","getDefaultPicture","background","isMobile","window","screen","width","iceServers","urls","username","credential","serverPath","process","REACT_APP_SERVER_HOST","location","protocol","host","getMediaPathResults","mediaPath","query","fetch","response","results","includes","text","xml","parseStringPromise","data","filtered","ListBucketResult","Contents","filter","file","Key","map","url","json","type","option","toLowerCase","getStreamPathResults","streamPath","encodeURIComponent","getYouTubeResults","openFileSelector","accept","Promise","resolve","inputElement","document","createElement","addEventListener","files","dispatchEvent","MouseEvent","getAndSaveClientId","clientId","localStorage","getItem","uuidv4","setItem","calculateMedian","array","sort","b","getUserImage","user","email","md5","gravatar","ok","photoURL","module","exports","capFirst","string","charAt","toUpperCase","slice","getRandomInt","min","max","random","generateName","name1","name2","UserMenu","socket","userToManage","trigger","displayName","position","disabled","useState","isOpen","setIsOpen","Popup","className","on","open","onOpen","onClose","Button","content","negative","icon","onClick","getIdToken","token","emit","userToBeKicked","uid","Chat","state","chatMsg","isNearBottom","isPickerOpen","messagesRef","React","createRef","updateChatMsg","_e","setState","value","sendChatMsg","chatTooLong","props","Boolean","onScroll","isChatNearBottom","current","scrollHeight","scrollTop","offsetHeight","scrollToBottom","formatMessage","cmd","msg","Fragment","style","textTransform","getMediaDisplayName","addEmoji","emoji","native","prevProps","scrollTimestamp","hide","display","flexDirection","flexGrow","minHeight","marginTop","marginBottom","padding","ref","Comment","Group","chat","message","pictureMap","nameMap","owner","timestamp","size","bottom","margin","PickerMenu","closeMenu","Input","inverted","fluid","onKeyPress","e","key","onChange","error","isChatDisabled","placeholder","Icon","circular","link","opacity","role","aria-label","Component","ChatMessage","system","Avatar","src","Content","Author","as","Metadata","Date","toLocaleTimeString","Text","PickerMenuInner","handleClickOutside","set","sheetSize","theme","showPreview","showSkinTones","onSelect","onClickOutside","LoginModal","password","isCreateMode","resetPassword","firebase","sendPasswordResetEmail","closeLogin","emailSignIn","signInWithEmailAndPassword","createAccount","createUserWithEmailAndPassword","emailLinkSignIn","sendSignInLinkToEmail","href","handleCodeInApp","Modal","Header","Message","color","header","Form","Field","target","stripePromise","loadStripe","SubscribeModal","onSubscribe","console","warn","stripe","redirectToCheckout","lineItems","price","quantity","mode","successUrl","cancelUrl","customerEmail","clientReferenceId","isSubscriber","closeSubscribe","image","Description","Table","definition","unstackable","striped","celled","Row","HeaderCell","Body","Cell","textAlign","labelPosition","SubscribeButton","isCustomer","isSubscribeModalOpen","setIsSubscribeModalOpen","onManage","useCallback","JSON","return_url","stringify","method","headers","body","resp","session","log","assign","ProfileModal","resetDisabled","onSignOut","auth","signOut","reload","close","userImage","Image","avatar","alignItems","gap","NewRoomButton","createRoom","openNewTab","SignInButton","isLoginOpen","isProfileOpen","facebookSignIn","provider","FacebookAuthProvider","signInWithPopup","googleSignIn","GoogleAuthProvider","cursor","basic","Dropdown","height","labeled","button","Menu","Item","ListRoomsButton","rooms","refreshRooms","axios","get","deleteRoom","roomId","delete","room","scrolling","vanity","replace","marginLeft","paddingLeft","stopPropagation","nativeEvent","stopImmediatePropagation","TopBar","subscribeButton","flexWrap","paddingBottom","marginRight","borderRadius","backgroundColor","top","fontWeight","fontSize","lineHeight","rel","title","hideNewRoom","hideMyRooms","hideSignin","OPCODE","EVENT","DISCONNECT","ANSWER","PROVIDE","LOCKED","RELEASE","REQUEST","REQUESTING","CLIPBOARD","GIVE","CONFIGURATIONS","RESOLUTION","SET","BAN","KICK","LOCK","UNLOCK","MUTE","UNMUTE","CONTROL","BaseClient","_ws","_peer","_channel","_timeout","_displayname","_state","_id","displayname","socketOpen","supported","Error","WebSocket","onmessage","onMessage","bind","onerror","event","onError","onclose","onDisconnected","onTimeout","err","peerConnected","connected","buffer","payload","ArrayBuffer","DataView","setUint8","setUint16","x","y","setInt16","send","sdp","lite","servers","RTCPeerConnection","onconnectionstatechange","connectionState","onsignalingstatechange","signalingState","oniceconnectionstatechange","iceConnectionState","onConnected","ontrack","onTrack","addTransceiver","direction","createDataChannel","onData","setRemoteDescription","createAnswer","then","d","setLocalDescription","catch","readyState","parse","ice","createPeer","track","kind","streams","label","reason","disconnect","prototype","OPEN","EventEmitter","VBrowser","focused","fullscreen","activeKeys","Set","controlling","scroll","scroll_invert","rate","keepAliveInterval","_container","_overlay","_video","$client","NekoClient","takeControl","sendMessage","once","changeResolution","resString","split","onFocus","navigator","clipboard","readText","onBlur","forEach","sendData","preventDefault","onContextMenu","onMousePos","w","h","rect","getBoundingClientRect","round","clientX","left","clientY","onWheel","deltaX","deltaY","onMouseDown","onMouseUp","onMouseMove","onMouseEnter","focus","onMouseLeave","blur","getCode","keyCode","onKeyDown","add","onKeyUp","onResize","setInterval","login","setResolution","stream","getElementById","srcObject","getTracks","audio","MediaStream","play","doPlay","onClipboardChanged","hostname","passive","resolution","clearInterval","removeAllListeners","logout","writeText","justifyContent","playsInline","tabIndex","clientWidth","clientHeight","scrollbarWidth","connect","configurations","VideoChat","ourStream","videoRefs","videoPCs","handleSignal","from","pc","addIceCandidate","RTCIceCandidate","RTCSessionDescription","answer","sendSignal","localDescription","setupWebRTC","canvas","Object","getContext","fillRect","captureStream","getVideoTracks","enabled","mediaDevices","getUserMedia","stopWebRTC","stop","keys","toggleVideoWebRTC","forceUpdate","getVideoWebRTC","toggleAudioWebRTC","getAudioTracks","getAudioWebRTC","updateWebRTC","participants","isVideoChat","addTrack","onicecandidate","candidate","onnegotiationneeded","createOffer","offer","to","off","rosterUpdateTS","tsMap","videoChatContentStyle","objectFit","overflow","p","right","visibility","el","transform","autoPlay","muted","data-id","alt","backdropFilter","textOverflow","whiteSpace","getCurrentSettings","setting","settings","validateSettingsString","settingObject","updateSettings","newSetting","MultiStreamModal","setMedia","resetMultiSelect","closeIcon","Loader","List","toLocaleString","examples","duration","ChatVideoCard","index","controls","onPlay","onPlayNext","onRemove","onSetMedia","onPlaylistAdd","isYoutube","handlePlayClick","handlePlayNextClick","handleRemoveClick","classes","Card","Wrapper","ThumbnailWrapper","DurationLabel","img","Thumbnail","Title","ChannelName","channel","Controls","ButtonGroup","ComboBox","inputMedia","loading","lastResultTimestamp","debounced","setMediaAndClose","doSearch","persist","items","playlistAdd","currentMedia","select","playlist","item","maxWidth","playlistDelete","playlistMove","vertical","maxHeight","zIndex","YouTubeSearchResult","MediaPathSearchResult","StreamPathSearchResult","launchMultiSelect","magnet","metadata","multiStreamSelection","localeCompare","Label","empty","seeders","SearchComponent","resetDropdown","search","onSearchChange","showTimestamp","currTimestamp","posTimestamp","onMouseOver","onMouseOut","pct","togglePlay","onSeek","fullScreen","toggleMute","toggleSubtitle","jumpToLeader","paused","subtitled","currentTime","leaderTime","isPauseDisabled","isBehind","Progress","minWidth","total","pointerEvents","pointing","getVolume","step","setVolume","VBrowserModal","isVMPoolFull","closeModal","startVBrowser","LaunchButton","withGoogleReCaptcha","googleReCaptchaProps","large","executeRecaptcha","rcToken","vmPoolFullMessage","reCaptchaKey","useRecaptchaNet","PermanentRoomModal","SettingsTab","roomLock","setRoomLock","setVanity","roomLink","setPassword","setIsChatDisabled","clearChat","updateTS","setUpdateTS","permModalOpen","setPermModalOpen","validVanity","setValidVanity","validVanityLoading","setValidVanityLoading","adminSettingsChanged","setAdminSettingsChanged","setRoomState","setRoomOwner","checkValidVanity","lockDisabled","permanentDisabled","description","checked","helpIcon","undo","subOnly","origin","action","primary","disableChatSound","SettingRow","Divider","horizontal","Radio","toggle","ErrorModal","PasswordModal","savedPasswords","ScreenShareModal","startScreenShare","FileShareModal","startFileShare","App","currentMediaPaused","currentSubtitle","myName","myPicture","controlsTimestamp","watchOptions","isScreenSharing","isScreenSharingFile","isVBrowser","isYouTubeReady","isAutoPlayable","downloaded","speed","connections","isErrorAuth","vBrowserResolution","isVBrowserLarge","nonPlayableMedia","currentTab","querystring","substring","tab","isVBrowserModalOpen","isScreenShareModalOpen","isFileShareModalOpen","controller","errorMessage","successMessage","showRightBar","watchPartyYTPlayer","ytDebounce","screenShareStream","screenHostPC","screenSharePC","progressUpdater","heartbeat","getRoomLink","handleRoomState","setOwner","setRoomLink","history","replaceState","loadSettings","customSettingsData","customSettings","loadSignInData","firstName","updateName","updatePicture","updateUid","loadYouTube","tag","firstScriptTag","getElementsByTagName","parentNode","insertBefore","onYouTubeIframeAPIReady","ytPlayer","YT","Player","events","onReady","isYouTube","onStateChange","PlayerState","CUED","ENDED","onVideoEnded","PLAYING","PAUSED","doPause","init","join","savedPasswordsString","shard","test","exec","io","transports","userName","success","doSeek","isSubtitled","isScreenShare","stopScreenShare","isFileShare","stopVBrowser","subtitle","getVBrowserHost","setLoadingFalse","leftVideo","pause","stopVideo","doSrc","videoTS","visibilityState","Audio","push","syncSubtitle","updateScreenShare","sharer","_sdp","line","trim","sendSignalSS","getCurrentTime","setupFileShare","URL","createObjectURL","onaddtrack","onended","setupScreenShare","getDisplayMedia","logicalSurface","autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume","values","find","options","changeController","setSubtitle","reader","FileReader","subData","readAsText","isVideo","isHttp","getVBrowserPass","getDuration","isPaused","ended","getPlayerState","isMuted","textTracks","getOption","languageCode","maxTS","getLeaderTime","time","innerHTML","videoId","altVideoId","cueVideoById","setMute","playVideo","pauseVideo","seekTo","shouldPlay","onFullScreenChange","fullscreenElement","onKeydown","activeElement","tagName","bVideoOnly","container","requestFullscreen","webkitEnterFullScreen","webkitEnterFullscreen","bChangeElements","exitFullscreen","mute","unMute","loadSubtitles","subtitleSrc","subtitlePath","lastIndexOf","getFileName","arrayBuffer","vttConverter","VTTConverter","Blob","getURL","srclang","appendChild","offset","cues","cue","origStart","startTime","origEnd","endTime","setOption","tracks","toIndex","magnetUrl","torrent","decode","locked","haveLock","val","fileIndex","searchParams","onfullscreenchange","onkeydown","removeEventListener","displayRightContent","rightBar","Grid","Column","widths","active","positive","stackable","clearable","selection","Dimmer","allowFullScreen","frameBorder","allow","onEnded","Separator","flexShrink","Home","styles","heroText","subText","featureSection","Step","Feature","flex","fitted","featureTitle","featureText","Hero","hero","heroInner","mdStyle","Privacy","Terms","FAQ","Footer","Debug","lazy","firebaseConfig","initializeApp","WatchParty","onAuthStateChanged","StrictMode","path","exact","render","params","fallback","ReactDOM","serviceWorker","ready","registration","unregister"],"mappings":"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C,MALJ,uBAMGE,EANH,0CAMiD1G,EANjD,yBAOoByC,OAAOgB,MAAMiD,GAPjC,kBAQUC,GARV,yCASMD,GATN,WAYDH,EAAKK,SAZJ,0CAaIL,EAAKK,SAAW,yBAbpB,2EAeqC5G,EAfrC,8D,2GCjUP6G,EAAOC,QAAU,CAAC,UAAY,wBAAwB,KAAO,mBAAmB,MAAQ,oBAAoB,UAAY,wBAAwB,SAAW,uBAAuB,QAAU,sBAAsB,eAAiB,6BAA6B,aAAe,2BAA2B,YAAc,4B,iFCAxTD,EAAOC,QAAU,CAAC,KAAO,4BAA4B,QAAU,+BAA+B,iBAAmB,wCAAwC,UAAY,iCAAiC,QAAU,+BAA+B,MAAQ,6BAA6B,YAAc,mCAAmC,cAAgB,qCAAqC,SAAW,kC,iYCDrY,SAASC,EAASC,GAChB,OAAOA,EAAOC,OAAO,GAAGC,cAAgBF,EAAOG,MAAM,GAGvD,SAASC,EAAaC,EAAaC,GACjC,OAAOjJ,KAAKC,MAAMD,KAAKkJ,UAAYD,EAAMD,IAAQA,EAG5C,SAASG,IACd,IAAIC,EAAQ,CACV,YACA,OACA,WACA,WACA,cACA,WACA,aACA,YACA,eACA,WACA,SACA,SACA,YACA,SACA,SACA,QACA,YACA,UACA,aACA,WACA,SACA,WACA,SACA,eACA,OACA,cACA,aACA,QACA,WACA,YACA,YACA,OACA,UACA,WACA,QACA,YACA,QACA,MACA,aACA,UACA,YACA,QACA,SACA,UACA,WACA,UACA,UACA,QACA,YACA,WACA,SACA,UACA,UACA,UACA,MACA,eACA,cACA,MACA,SACA,OACA,WACA,WACA,UACA,UACA,cACA,WACA,WACA,YACA,aACA,UACA,YACA,aACA,YACA,aACA,UACA,QACA,UACA,QACA,UACA,UACA,MACA,OACA,QACA,OACA,SACA,QACA,YACA,UACA,UACA,aACA,SACA,OACA,YACA,MACA,cACA,gBACA,aACA,SACA,QACA,kBACA,QACA,QACA,UACA,QACA,QACA,WACA,QACA,OACA,WACA,QACA,UACA,OACA,OACA,SACA,QACA,OACA,SACA,YACA,QACA,QACA,YACA,QACA,SACA,YACA,QACA,SACA,SACA,QACA,UACA,SACA,QACA,QACA,UACA,aACA,QACA,WACA,OACA,UACA,UACA,cACA,OACA,SACA,SACA,UACA,WACA,UACA,WACA,SACA,WACA,YACA,aACA,WACA,QACA,WACA,SACA,QACA,SACA,SACA,WACA,UACA,QACA,QACA,YACA,SACA,QACA,SACA,SACA,WACA,SACA,YACA,SACA,OACA,WACA,YACA,WACA,cACA,SACA,gBACA,YACA,WACA,UACA,cACA,WACA,YACA,WACA,WACA,YACA,cACA,WACA,UACA,eACA,SACA,OACA,cACA,cACA,QACA,UACA,SACA,aACA,YACA,SACA,QACA,SACA,WACA,SACA,WACA,QACA,WACA,UACA,UACA,QACA,WACA,SACA,aACA,WACA,aACA,QACA,QACA,OACA,cACA,UACA,OACA,YACA,SACA,SACA,UACA,OACA,WACA,OACA,SACA,YACA,OACA,UACA,SACA,UACA,WACA,OACA,cACA,YACA,UACA,YACA,WACA,aACA,UACA,aACA,YACA,aACA,YACA,YACA,QACA,SACA,aACA,YACA,cACA,WACA,WACA,aACA,UACA,YACA,YACA,UACA,WACA,MACA,UACA,YACA,SACA,aACA,WACA,aACA,aACA,WACA,SACA,UACA,YACA,SACA,QACA,YACA,YACA,SACA,UACA,WACA,YACA,QACA,QACA,SACA,SACA,YACA,OACA,SACA,WACA,SACA,SACA,MACA,OACA,OACA,UACA,OACA,QACA,UACA,QACA,OACA,aACA,WACA,SACA,WACA,YACA,UACA,SACA,UACA,WACA,UACA,aACA,aACA,cACA,cACA,UACA,YACA,QACA,YACA,aACA,YACA,cACA,WACA,UACA,SACA,UACA,QACA,aACA,YACA,WACA,UACA,WACA,OACA,YACA,cACA,QACA,OACA,UACA,YACA,YACA,YACA,YACA,UACA,WACA,SACA,YACA,cACA,SACA,aACA,cACA,cACA,cACA,WACA,UACA,QACA,OACA,WACA,OACA,QACA,WACA,SACA,QACA,YACA,MACA,UACA,YACA,UACA,OACA,MACA,QACA,WACA,YACA,WACA,UACA,WACA,SACA,SACA,SACA,WACA,MACA,SACA,SACA,OACA,WACA,OACA,QACA,YACA,UACA,QACA,QACA,aACA,SACA,OACA,SACA,WACA,aACA,SACA,WACA,UACA,SACA,QACA,YACA,UACA,OACA,YACA,UACA,WACA,SACA,SACA,WACA,aACA,YACA,WACA,QACA,QACA,SACA,OACA,SACA,QACA,WACA,WACA,aACA,cACA,SACA,SACA,SACA,YACA,QACA,SACA,SACA,SACA,WACA,OACA,WACA,aACA,QACA,QACA,QACA,aACA,UACA,UACA,WACA,SACA,UACA,QACA,QACA,WACA,SACA,SACA,YACA,UACA,QACA,WACA,UACA,aACA,aACA,SACA,WACA,SACA,OACA,SACA,OACA,eACA,WACA,WACA,WACA,QACA,YACA,WACA,WACA,QACA,OACA,QACA,SACA,QACA,aACA,OACA,QACA,WACA,WACA,QACA,YACA,UACA,WACA,UACA,WACA,QACA,SACA,WACA,SACA,SACA,WACA,QACA,QACA,OACA,WACA,WACA,QACA,QACA,iBACA,OACA,eACA,UACA,WACA,aACA,QACA,QACA,UACA,WACA,UACA,YACA,SACA,WACA,QACA,QACA,UACA,WACA,SACA,UACA,OACA,aACA,YACA,SACA,SACA,SACA,SACA,YACA,UACA,UACA,WACA,aACA,MACA,OACA,SACA,cACA,UACA,YACA,SACA,UACA,QACA,OACA,MACA,QACA,aACA,YACA,OACA,UACA,WACA,WACA,MACA,UACA,YACA,eACA,aACA,cACA,YACA,cACA,aACA,aACA,YACA,UACA,cACA,aACA,YACA,YACA,gBACA,SACA,WACA,YACA,aACA,cACA,iBACA,aACA,aACA,SACA,SACA,eACA,eACA,aACA,kBACA,aACA,YACA,gBACA,WACA,WACA,YACA,aACA,WACA,WACA,WACA,WACA,WACA,YACA,gBACA,YACA,cACA,gBACA,cACA,SACA,cACA,cACA,WACA,gBACA,WACA,WACA,gBACA,aACA,QACA,QACA,SACA,aACA,SACA,UACA,UACA,QACA,QACA,SACA,SACA,SACA,WACA,YACA,QACA,QACA,SACA,QACA,WACA,gBACA,OACA,MACA,OACA,cACA,SACA,SACA,SACA,SACA,gBACA,UACA,QACA,QACA,SACA,OACA,QACA,QACA,OACA,UACA,OACA,SACA,SACA,OACA,UACA,OACA,QACA,OACA,QACA,aACA,QACA,eACA,UACA,SACA,UACA,OACA,UACA,SACA,QACA,SACA,SACA,OACA,SACA,QACA,YACA,OACA,SACA,OACA,YACA,QACA,WACA,OACA,OACA,UACA,SACA,SACA,MACA,QACA,QACA,YACA,WACA,QACA,WACA,YACA,MACA,UACA,cACA,WACA,QACA,OACA,UACA,UACA,YACA,YACA,UACA,SACA,SACA,QACA,OACA,SACA,QACA,UACA,WACA,SACA,OACA,SACA,UACA,YACA,WACA,QACA,QACA,WACA,OACA,QACA,WACA,YACA,QACA,QACA,YACA,UACA,YACA,QACA,QACA,SACA,SACA,QACA,YACA,UACA,aACA,QACA,YACA,WACA,aACA,cACA,QACA,UACA,eACA,UACA,QACA,QACA,QACA,QACA,aACA,QACA,SACA,QACA,UACA,UACA,WACA,OACA,OACA,YACA,QACA,WACA,YACA,aACA,cACA,UACA,MACA,OACA,OACA,QACA,SACA,QACA,YACA,QACA,UACA,SACA,UACA,QACA,aACA,QACA,UACA,OACA,aACA,QACA,WACA,QACA,SACA,OACA,SACA,UACA,aACA,MACA,UACA,UACA,YACA,WACA,MACA,gBACA,OACA,OACA,UACA,aACA,UACA,SACA,UACA,UACA,SACA,SACA,WACA,WACA,QACA,MACA,WACA,WACA,aACA,aACA,cACA,OACA,aACA,UACA,YACA,aACA,YACA,OACA,SACA,WACA,UACA,UACA,aACA,OACA,SACA,WACA,UACA,UACA,WACA,WACA,QACA,WACA,YACA,QACA,cACA,QACA,QACA,WACA,WACA,OACA,UACA,QACA,YACA,UACA,UACA,WACA,UACA,WACA,QACA,QACA,WACA,SACA,YACA,UACA,YACA,SACA,OACA,UACA,SACA,OACA,WACA,WACA,UACA,WACA,YACA,YACA,WACA,UACA,cACA,SACA,WACA,WACA,SACA,UACA,UACA,QACA,WACA,UACA,QACA,WACA,aACA,aACA,UACA,SACA,QACA,UACA,WACA,UACA,OACA,OACA,SACA,QACA,SACA,UACA,WACA,SACA,YACA,cACA,YACA,SACA,YACA,eACA,QACA,eACA,QACA,iBACA,SACA,WACA,YACA,UACA,SACA,QACA,OACA,OACA,MACA,SACA,WACA,cACA,QACA,OACA,YACA,aACA,MACA,aACA,QACA,UACA,WACA,WACA,aACA,aACA,SACA,YACA,WACA,aACA,cACA,YACA,YACA,YACA,OACA,QACA,QACA,SACA,OACA,UACA,SACA,OACA,WACA,SACA,QACA,QACA,QACA,QACA,UACA,UACA,QACA,OACA,QACA,QACA,QACA,MACA,OACA,QACA,OACA,QACA,OACA,YACA,WACA,YACA,QACA,SACA,SACA,QACA,UACA,YACA,aACA,WACA,WACA,UACA,SACA,YACA,cACA,SACA,eACA,eACA,UACA,cACA,WACA,SACA,UACA,aACA,UACA,SACA,SACA,UACA,QACA,UACA,WACA,YACA,QACA,aACA,QACA,UACA,WACA,SACA,QACA,aACA,QACA,SACA,MACA,OACA,SACA,QACA,QACA,SACA,UACA,SACA,aACA,SACA,SACA,WACA,WACA,SACA,SACA,SACA,OACA,QACA,WACA,OACA,SACA,QACA,QACA,SACA,SACA,OACA,SACA,WACA,SACA,YACA,SACA,WACA,OACA,QACA,QACA,SACA,OACA,YACA,gBACA,OACA,YACA,UACA,QACA,OACA,UACA,YACA,SACA,WACA,cACA,SACA,QACA,SACA,WACA,WACA,WACA,WACA,UACA,OACA,SACA,UACA,WACA,SACA,QACA,UACA,QACA,WACA,UACA,QACA,SACA,QACA,SACA,QACA,cACA,SACA,SACA,WACA,UACA,QACA,SACA,WACA,WACA,UACA,SACA,WACA,WACA,aACA,SACA,SACA,UACA,UACA,aACA,cACA,SACA,WACA,SACA,SACA,QACA,QACA,SACA,cACA,WACA,aACA,cACA,YACA,aACA,SACA,SACA,QACA,aACA,QACA,cACA,OACA,YACA,OACA,MACA,WACA,OACA,QACA,WACA,OACA,UACA,UACA,WACA,SACA,QACA,QACA,WACA,WACA,QACA,WACA,OACA,QACA,QACA,OACA,QACA,UACA,OACA,WACA,SACA,QACA,aACA,aACA,UACA,aACA,OACA,QACA,SACA,SACA,OACA,QACA,OACA,QACA,QACA,YACA,YACA,aACA,SACA,UACA,aACA,aACA,SACA,WACA,OACA,UACA,WACA,OACA,WACA,cACA,SACA,WACA,QACA,YACA,OACA,OACA,WACA,eACA,UACA,gBACA,WACA,cACA,cACA,YACA,SACA,aACA,QACA,WACA,cACA,UACA,YACA,UACA,cACA,SACA,SACA,UACA,UACA,WACA,UACA,UACA,YACA,aACA,cACA,SACA,SACA,YACA,YACA,WACA,SACA,SACA,WACA,UACA,SACA,SACA,UACA,YACA,WACA,YACA,YACA,YACA,SACA,UACA,QACA,QACA,SACA,OACA,SACA,UACA,WACA,QACA,SACA,QACA,OACA,QACA,WACA,QACA,WACA,OACA,UACA,YACA,WACA,aACA,UACA,UACA,aACA,WACA,WACA,aACA,SACA,UACA,UACA,WACA,UACA,QACA,YACA,QACA,aACA,MACA,UACA,OACA,cACA,SACA,OACA,WACA,WACA,cACA,SACA,OACA,UACA,OACA,QACA,SACA,MACA,SACA,QACA,UACA,QACA,UACA,kBACA,eACA,gBACA,WACA,YACA,WACA,aACA,YACA,MACA,QACA,YACA,YACA,YACA,QACA,QACA,WACA,SACA,OACA,YACA,SACA,OACA,UACA,SACA,UACA,QACA,SACA,OACA,OACA,QACA,SACA,SACA,YACA,SACA,QACA,QACA,UACA,OACA,UACA,YACA,QACA,QACA,YACA,aACA,SACA,WACA,WACA,WACA,QACA,MACA,UACA,SACA,SACA,YACA,QACA,WACA,QACA,OACA,UACA,QACA,SACA,SAGEC,EAAQ,CACV,SACA,UACA,MACA,MACA,QACA,cACA,MACA,SACA,aACA,SACA,SACA,WACA,OACA,OACA,SACA,QACA,SACA,UACA,SACA,OACA,OACA,gBACA,SACA,MACA,OACA,aACA,UACA,WACA,UACA,YACA,QACA,UACA,YACA,OACA,WACA,aACA,UACA,UACA,SACA,OACA,UACA,OACA,cACA,aACA,OACA,UACA,WACA,QACA,WACA,QACA,QACA,OACA,YACA,aACA,SACA,UACA,cACA,WACA,aACA,SACA,UACA,QACA,OACA,WACA,UACA,OACA,QACA,eACA,YACA,UACA,WACA,SACA,SACA,UACA,QACA,YACA,YACA,WACA,aACA,OACA,SACA,UACA,QACA,cACA,QACA,WACA,QACA,QACA,YACA,aACA,UACA,UACA,aACA,aACA,OACA,OACA,WACA,UACA,SACA,SACA,WACA,OACA,cACA,UACA,UACA,WACA,aACA,UACA,gBACA,QACA,YACA,UACA,OACA,SACA,SACA,OACA,OACA,OACA,cACA,WACA,UACA,WACA,YACA,YACA,OACA,SACA,WACA,WACA,YACA,WACA,QACA,WACA,WACA,UACA,OACA,cACA,eACA,gBACA,SACA,aACA,YACA,OACA,WACA,YACA,UACA,eACA,cACA,cACA,SACA,SACA,SACA,WACA,YACA,eACA,WACA,OACA,SACA,SACA,UACA,OACA,SACA,UACA,QACA,QACA,aACA,cACA,UACA,WACA,QACA,aACA,UACA,YACA,YACA,OACA,QACA,SACA,QACA,SACA,aACA,aACA,UACA,UACA,UACA,iBACA,YACA,QACA,YACA,SACA,cACA,OACA,SACA,QACA,SACA,aACA,cACA,QACA,cACA,QACA,SACA,SACA,QACA,aACA,aACA,cACA,UACA,aACA,WACA,UACA,KACA,SACA,UACA,aACA,YACA,OACA,cACA,SACA,WACA,YACA,WACA,iBACA,SACA,WACA,WACA,cACA,aACA,iBACA,WACA,YACA,UACA,UACA,UACA,WACA,YACA,WACA,WACA,UACA,OACA,aACA,aACA,cACA,QACA,QACA,YACA,SACA,WACA,aACA,cACA,QACA,cACA,QACA,UACA,aACA,SACA,WACA,OACA,YACA,QACA,QACA,YACA,WACA,SACA,aACA,QACA,WACA,SACA,WACA,WACA,QACA,QACA,QACA,WACA,aACA,aACA,UACA,YACA,UACA,aACA,YACA,QACA,UACA,aACA,YACA,eACA,WACA,UACA,WACA,WACA,QACA,SACA,aACA,OACA,UACA,YACA,YACA,UACA,SACA,iBACA,SACA,UACA,SACA,WACA,SACA,aACA,aACA,SACA,WACA,SACA,WACA,SACA,MACA,UACA,aACA,eACA,YACA,aACA,eACA,aACA,UACA,UACA,SACA,SACA,SACA,QACA,UACA,YACA,SACA,UACA,SACA,SACA,UACA,OACA,UACA,aACA,WACA,MACA,cACA,OACA,MACA,SACA,SACA,SACA,cACA,YACA,QACA,QACA,WACA,aACA,eACA,SACA,YACA,eACA,OACA,QACA,OACA,UACA,SACA,OACA,WACA,UACA,cACA,UACA,aACA,WACA,UACA,YACA,eACA,WACA,aACA,QACA,cACA,SACA,OACA,OACA,OACA,YACA,WACA,SACA,cACA,cACA,eACA,OACA,aACA,MACA,OACA,WACA,WACA,YACA,cACA,aACA,QACA,MACA,SACA,MACA,UACA,UACA,SACA,SACA,SACA,aACA,SACA,QACA,QACA,YACA,aACA,eACA,SACA,UACA,OACA,SACA,gBACA,cACA,UACA,UACA,QACA,aACA,cACA,eACA,SACA,aACA,YACA,OACA,SACA,OACA,UACA,QACA,SACA,aACA,YACA,WACA,WACA,cACA,QACA,SACA,cACA,SACA,WACA,UACA,SACA,WACA,UACA,QACA,aACA,YACA,WACA,UACA,OACA,WACA,cACA,eACA,QACA,SACA,cACA,YACA,UACA,OACA,MACA,UACA,aACA,UACA,OACA,aACA,MACA,aACA,YACA,OACA,WACA,cACA,aACA,YACA,QACA,WACA,OACA,YACA,cACA,aACA,QACA,UACA,WACA,UACA,WACA,OACA,SACA,UACA,QACA,QACA,OACA,OACA,OACA,QACA,QACA,UACA,QACA,WACA,QACA,OACA,OACA,OACA,MACA,MACA,QACA,SACA,OACA,QACA,OACA,OACA,UACA,OACA,OACA,aACA,MACA,OACA,MACA,QACA,OACA,OACA,UACA,QACA,OACA,SACA,QACA,WACA,QACA,QACA,SACA,UACA,QACA,OACA,OACA,OACA,OACA,QACA,OACA,OACA,QACA,OACA,OACA,MACA,QACA,MACA,QACA,WACA,OACA,SACA,MACA,SACA,QACA,QACA,WACA,WACA,QACA,UACA,QACA,MACA,OACA,QACA,MACA,QACA,OACA,OACA,OACA,SACA,QACA,QACA,SACA,OACA,OACA,QACA,MACA,UACA,SACA,SACA,QACA,OACA,SACA,SACA,OACA,SACA,WACA,QACA,OACA,QACA,QACA,SACA,MACA,MACA,OACA,SACA,SACA,UACA,WACA,QACA,OACA,QACA,SACA,OACA,QACA,MACA,OACA,UACA,QACA,OACA,QACA,UACA,SACA,SACA,MACA,QACA,SACA,YACA,QACA,UACA,UACA,SACA,UACA,OACA,WACA,UACA,WACA,OACA,OACA,MACA,QACA,MACA,MACA,SACA,QACA,MACA,OACA,SACA,OACA,QACA,QACA,MACA,OACA,QACA,OACA,SACA,UACA,WACA,MACA,WACA,MACA,OACA,WACA,WACA,SACA,YACA,UACA,MACA,QACA,QACA,OACA,QACA,OACA,OACA,QACA,QACA,SACA,OACA,SACA,YACA,OACA,UACA,OACA,aACA,SACA,QACA,UACA,MACA,QACA,SACA,SACA,OACA,SACA,UACA,QACA,OACA,OACA,UACA,UACA,SACA,UACA,UACA,MACA,OACA,QACA,OACA,YACA,UACA,SACA,MACA,OACA,MACA,UACA,QACA,SACA,UACA,OACA,SACA,OACA,OACA,OACA,QACA,UACA,YACA,SACA,OACA,OACA,QACA,SACA,OACA,QACA,WACA,OACA,SACA,QACA,UACA,OACA,SACA,QACA,QACA,QACA,OACA,QACA,SACA,QACA,SACA,OACA,MACA,YACA,SACA,OACA,OACA,OACA,SACA,WACA,UACA,OACA,UACA,QACA,QACA,SACA,OACA,SACA,SACA,SACA,WACA,OACA,SACA,SACA,SACA,UACA,QACA,YACA,WACA,MACA,QACA,QACA,QACA,UACA,OACA,SACA,WACA,YACA,OACA,OACA,WACA,MACA,SACA,OACA,UACA,QACA,SACA,OACA,OACA,UACA,OACA,OACA,SACA,OACA,aACA,QACA,OACA,SACA,QACA,QACA,QACA,SACA,SACA,MACA,WACA,UACA,OACA,YACA,SACA,QACA,OACA,QACA,UACA,OACA,MACA,SACA,MACA,QACA,YACA,WACA,OACA,SACA,SACA,SACA,SACA,OACA,OACA,OACA,QACA,aACA,OACA,OACA,UACA,OACA,WACA,UACA,MACA,QACA,SACA,QACA,SACA,OACA,QACA,OACA,YACA,aACA,WACA,SACA,SACA,MACA,QACA,OACA,QACA,SACA,MACA,UACA,OACA,QACA,OACA,OACA,QACA,QACA,OACA,SACA,QACA,YACA,OACA,QACA,YACA,MACA,QACA,QACA,QACA,QACA,gBACA,QACA,OACA,SACA,OACA,YACA,MACA,OACA,UACA,OACA,WACA,QACA,QACA,MACA,OACA,SACA,OACA,OACA,SACA,QACA,OACA,OACA,QACA,OACA,WACA,YACA,MACA,OACA,UACA,SACA,QACA,MACA,WACA,OACA,OACA,SACA,SACA,YACA,OACA,OACA,YACA,QACA,UACA,MACA,SACA,UACA,OACA,UACA,UACA,UACA,OACA,UACA,WACA,WACA,YACA,MACA,SACA,UACA,MACA,SACA,MACA,OACA,SACA,OACA,OACA,QACA,WACA,YACA,QACA,OACA,YACA,UACA,YACA,OACA,QACA,MACA,QACA,UACA,SACA,QACA,OACA,UACA,OACA,UACA,WACA,OACA,QACA,WACA,UACA,UACA,QACA,SACA,QACA,OACA,SACA,OACA,WACA,WACA,QACA,UACA,SACA,UACA,QACA,WACA,OACA,QACA,OACA,MACA,QACA,YACA,MACA,OACA,SACA,SACA,SACA,UACA,QACA,QACA,OACA,QACA,QACA,WACA,QACA,OACA,SACA,QACA,MACA,OACA,QACA,OACA,QACA,QACA,YACA,SACA,OACA,OACA,SACA,UACA,SACA,UACA,MACA,OACA,QACA,UACA,SACA,QACA,UACA,OACA,SACA,SACA,OACA,QACA,SACA,OACA,MACA,OACA,OACA,QACA,MACA,QACA,QACA,SACA,OACA,SACA,UACA,aACA,QACA,OACA,OACA,OACA,QACA,SACA,QACA,UACA,WACA,QACA,OACA,QACA,OACA,QACA,SACA,MACA,WACA,QACA,QACA,QACA,WACA,OACA,aACA,UACA,UACA,OACA,QACA,OACA,UACA,OACA,QACA,SACA,QACA,SACA,QACA,QACA,UACA,UACA,SACA,cACA,OACA,OACA,SACA,UACA,OACA,SACA,OACA,UACA,QACA,SACA,OACA,OACA,QACA,QACA,OACA,aACA,SACA,SACA,QACA,OACA,OACA,QACA,QACA,MACA,SACA,OACA,MACA,OACA,QACA,SACA,MACA,WACA,UACA,QACA,UACA,MACA,QACA,WACA,WACA,QACA,QACA,MACA,OACA,YACA,WACA,SACA,OACA,OACA,MACA,MACA,OACA,QACA,QACA,UACA,MACA,QACA,SACA,QACA,UACA,WACA,SACA,OACA,OACA,OACA,OACA,SACA,SACA,OACA,UACA,MACA,QACA,QACA,UACA,MACA,OACA,QACA,MACA,OACA,OACA,OACA,OACA,KACA,QACA,QACA,QACA,SACA,OACA,OACA,QACA,OACA,QACA,QACA,UACA,WACA,OACA,OACA,OACA,OACA,MACA,SACA,MACA,SACA,SACA,OACA,MACA,WACA,aACA,QACA,WACA,UACA,WACA,MACA,UACA,WACA,OACA,MACA,QACA,SACA,OACA,OACA,MACA,MACA,WACA,SACA,aACA,OACA,MACA,MACA,QACA,OACA,OACA,QACA,YACA,eACA,gBACA,SACA,OACA,cACA,UACA,UACA,QACA,QACA,SACA,OACA,aACA,MACA,WACA,OACA,UACA,QACA,OACA,YACA,WACA,UACA,SACA,UACA,QACA,OACA,WACA,OACA,OACA,QACA,QACA,UACA,OACA,SACA,SACA,MACA,UACA,MACA,YACA,SACA,UACA,UACA,cACA,QACA,WACA,QACA,OACA,QACA,QACA,YACA,SACA,SACA,QACA,WACA,OACA,OACA,QACA,SACA,SACA,QACA,SACA,OACA,OACA,QACA,SACA,OACA,SACA,UACA,QACA,OACA,MACA,UACA,OACA,QACA,UACA,UACA,WACA,MACA,WACA,QACA,cACA,OACA,OACA,OACA,QACA,QACA,QACA,OACA,SACA,WACA,QACA,SACA,UACA,OACA,UACA,OACA,SACA,SACA,QACA,OACA,SACA,SACA,SACA,QACA,OACA,QACA,OACA,UACA,OACA,MACA,YACA,QACA,QACA,SACA,WACA,MACA,OACA,UACA,OACA,WACA,MACA,OACA,SACA,OACA,OACA,WACA,OACA,QACA,SACA,QACA,QACA,OACA,QACA,OACA,OACA,UACA,QACA,QACA,QACA,YACA,UACA,UACA,OACA,SACA,OACA,QACA,MACA,OACA,WACA,OACA,OACA,YACA,MACA,MACA,SACA,QACA,WACA,OACA,QACA,QACA,QACA,OACA,MACA,OACA,QACA,OACA,QACA,SACA,SACA,QACA,OACA,QACA,OACA,UACA,UACA,SACA,QACA,OACA,QACA,QACA,OACA,UACA,UACA,MACA,SACA,aACA,OACA,OACA,UACA,QACA,UACA,YACA,SACA,MACA,QACA,QACA,QACA,SACA,SACA,OACA,QACA,SACA,QACA,MACA,UACA,OACA,SACA,SACA,WACA,OACA,UACA,QACA,MACA,SACA,QACA,WACA,UACA,QACA,SACA,QACA,SACA,WACA,OACA,QACA,QACA,OACA,SACA,UACA,QACA,YACA,OACA,QACA,OACA,OACA,OACA,SACA,QACA,UACA,UACA,OACA,OACA,OACA,QACA,UACA,QACA,QACA,QACA,WACA,QACA,SACA,QACA,OACA,cACA,WACA,QACA,OACA,OACA,SACA,QACA,SACA,SACA,SACA,OACA,QACA,QACA,QACA,QACA,OACA,WACA,OACA,YACA,OACA,OACA,QACA,QACA,SACA,QACA,aACA,SACA,OACA,OACA,MACA,QACA,OACA,QACA,iBACA,SACA,MACA,MACA,QACA,QACA,QACA,UACA,SACA,OACA,YACA,WACA,OACA,OACA,YACA,SACA,MACA,UAOF,OAHEX,EAASU,EAAML,EAAa,EAAGK,EAAMvH,OAAS,KAC9C,IACA6G,EAASW,EAAMN,EAAa,EAAGM,EAAMxH,OAAS,K,kDC/yFrCyH,G,OAAW,SAAC,GAiBlB,IAhBLpB,EAgBI,EAhBJA,KACAqB,EAeI,EAfJA,OACAC,EAcI,EAdJA,aACAC,EAaI,EAbJA,QACAC,EAYI,EAZJA,YACAC,EAWI,EAXJA,SACAC,EAUI,EAVJA,SAUI,EACwBC,oBAAS,GADjC,mBACGC,EADH,KACWC,EADX,KAIJ,OACE,eAACC,EAAA,EAAD,CACEC,UAAU,WACVR,QAASA,EACTS,GAAG,QACHC,KAAML,EACNM,OARe,kBAAML,GAAU,IAS/BM,QARgB,kBAAMN,GAAU,IAShCJ,SAAUA,EACVC,SAAUA,EARZ,UAUE,qBAAKK,UAAU,iBAAf,SAAiCP,IACjC,qBAAKO,UAAU,kBAAf,SACE,cAACK,EAAA,EAAD,CACEC,QAAQ,OACRC,UAAQ,EACRC,KAAK,MACLC,QAAO,sBAAE,4BAAAtI,EAAA,6EACa8F,QADb,IACaA,OADb,EACaA,EAAMyC,aADnB,OACDC,EADC,OAEPrB,EAAOsB,KAAK,WAAY,CACtBC,eAAgBtB,EAChBuB,IAAG,OAAE7C,QAAF,IAAEA,OAAF,EAAEA,EAAM6C,IACXH,UAEF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","file":"static/js/main.d8c7cbf6.chunk.js","sourcesContent":["//@ts-ignore\nimport canAutoplay from 'can-autoplay';\nimport { parseStringPromise } from 'xml2js';\nimport { v4 as uuidv4 } from 'uuid';\nimport md5 from 'blueimp-md5';\n\nexport function formatTimestamp(input: any) {\n  if (\n    input === null ||\n    input === undefined ||\n    input === false ||\n    Number.isNaN(input) ||\n    input === Infinity\n  ) {\n    return '';\n  }\n  let hours = Math.floor(Number(input) / 3600);\n  let minutes = (Math.floor(Number(input) / 60) % 60)\n    .toString()\n    .padStart(2, '0');\n  let seconds = Math.floor(Number(input) % 60)\n    .toString()\n    .padStart(2, '0');\n  return `${hours}:${minutes}:${seconds}`;\n}\n\nexport function formatSpeed(input: number) {\n  if (input >= 1000000) {\n    return (input / 1000000).toFixed(2) + ' MiB/s';\n  }\n  if (input >= 1000) {\n    return (input / 1000).toFixed(0) + ' KiB/s';\n  }\n  return input + ' B/s';\n}\n\nexport function hashString(input: string) {\n  var hash = 0;\n  for (var i = 0; i < input.length; i++) {\n    var charCode = input.charCodeAt(i);\n    hash += charCode;\n  }\n  return hash;\n}\n\nexport const colorMappings: StringDict = {\n  red: 'B03060',\n  orange: 'FE9A76',\n  yellow: 'FFD700',\n  olive: '32CD32',\n  green: '016936',\n  teal: '008080',\n  blue: '0E6EB8',\n  violet: 'EE82EE',\n  purple: 'B413EC',\n  pink: 'FF1493',\n  brown: 'A52A2A',\n  grey: 'A0A0A0',\n  black: '000000',\n};\n\nlet colorCache = {} as NumberDict;\nexport function getColorForString(id: string) {\n  let colors = [\n    'red',\n    'orange',\n    'yellow',\n    'olive',\n    'green',\n    'teal',\n    'blue',\n    'violet',\n    'purple',\n    'pink',\n    'brown',\n    'grey',\n  ];\n  if (colorCache[id]) {\n    return colors[colorCache[id]];\n  }\n  colorCache[id] = Math.abs(hashString(id)) % colors.length;\n  return colors[colorCache[id]];\n}\n\nexport function getColorForStringHex(id: string) {\n  return colorMappings[getColorForString(id)];\n}\n\nexport const getFbPhoto = (fbId: string) =>\n  `https://graph.facebook.com/${fbId}/picture?type=normal`;\n\nexport const getMediaType = (input: string) => {\n  if (!input) {\n    return '';\n  }\n  if (\n    input.startsWith('https://www.youtube.com/') ||\n    input.startsWith('https://youtu.be/')\n  ) {\n    return 'youtube';\n  }\n  return 'video';\n};\n\nexport async function testAutoplay() {\n  const result = await canAutoplay.video();\n  return result.result;\n}\n\nexport function decodeEntities(input: string) {\n  const doc = new DOMParser().parseFromString(input, 'text/html');\n  return doc.documentElement.textContent;\n}\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nexport function debounce(func: Function, wait: number, immediate?: boolean) {\n  var timeout: any;\n\n  // This is the function that is actually executed when\n  // the DOM event is triggered.\n  return function executedFunction() {\n    // Store the context of this and any\n    // parameters passed to executedFunction\n    //@ts-ignore\n    var context = this;\n    var args = arguments;\n\n    // The function to be called after\n    // the debounce time has elapsed\n    var later = function () {\n      // null timeout to indicate the debounce ended\n      timeout = null;\n\n      // Call function now if you did not on the leading end\n      if (!immediate) func.apply(context, args);\n    };\n\n    // Determine if you should call the function\n    // on the leading or trail end\n    var callNow = immediate && !timeout;\n\n    // This will reset the waiting every function execution.\n    // This is the step that prevents the function from\n    // being executed because it will never reach the\n    // inside of the previous setTimeout\n    clearTimeout(timeout);\n\n    // Restart the debounce waiting period.\n    // setTimeout returns a truthy value (it differs in web vs node)\n    timeout = setTimeout(later, wait);\n\n    // Call immediately if you're dong a leading\n    // end execution\n    if (callNow) func.apply(context, args);\n  };\n}\n\nexport const getMediaPathForList = (list: string) => {\n  if (list.startsWith('https://gitlab.com/')) {\n    const match = list.match(\n      /https:\\/\\/gitlab.com\\/api\\/v4\\/projects\\/(.*)\\/repository\\/tree/\n    );\n    const name = match && match[1];\n    const decoded = decodeURIComponent(name || '');\n    return `https://glcdn.githack.com/${decoded}/-/raw/master/`;\n  }\n  // Nginx servers use the same mediapath as list, add trailing /\n  return list + '/';\n};\n\nexport const getDefaultPicture = (name: string, background = 'a0a0a0') => {\n  return `https://ui-avatars.com/api/?name=${name}&background=${background}&size=256&color=ffffff`;\n};\n\nexport const isMobile = () => {\n  return window.screen.width <= 600;\n};\n\nexport function shuffle(array: any[]) {\n  for (let i = array.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * i);\n    const temp = array[i];\n    array[i] = array[j];\n    array[j] = temp;\n  }\n}\n\nexport const iceServers = () => [\n  { urls: 'stun:stun.l.google.com:19302' },\n  {\n    urls: 'turn:135.181.147.65:3478',\n    username: 'username',\n    credential: 'password',\n  },\n  {\n    urls: 'turn:numb.viagenie.ca',\n    credential: 'watchparty',\n    username: 'howardzchung@gmail.com',\n  },\n];\n\nexport const serverPath =\n  process.env.REACT_APP_SERVER_HOST ||\n  `${window.location.protocol}//${\n    process.env.NODE_ENV === 'production'\n      ? window.location.host\n      : `${window.location.hostname}:8080`\n  }`;\n\nexport async function getMediaPathResults(\n  mediaPath: string,\n  query: string\n): Promise<SearchResult[]> {\n  // Get media list if provided\n  const response = await window.fetch(mediaPath);\n  let results: SearchResult[] = [];\n  if (mediaPath.includes('s3.')) {\n    // S3-style buckets return data in XML\n    const xml = await response.text();\n    const data = await parseStringPromise(xml);\n    let filtered = data.ListBucketResult.Contents.filter(\n      (file: any) => !file.Key[0].includes('/')\n    );\n    results = filtered.map((file: any) => ({\n      url: mediaPath + '/' + file.Key[0],\n      name: mediaPath + '/' + file.Key[0],\n    }));\n  } else {\n    const data = await response.json();\n    results = data\n      .filter((file: any) => file.type === 'file')\n      .map((file: any) => ({\n        url: file.url || getMediaPathForList(mediaPath) + file.name,\n        name: getMediaPathForList(mediaPath) + file.name,\n      }));\n  }\n  results = results.filter((option: SearchResult) =>\n    option.name.toLowerCase().includes(query.toLowerCase())\n  );\n  return results;\n}\n\nexport async function getStreamPathResults(\n  streamPath: string,\n  query: string\n): Promise<SearchResult[]> {\n  const response = await window.fetch(\n    streamPath + '/search?q=' + encodeURIComponent(query)\n  );\n  const data = await response.json();\n  return data;\n}\n\nexport async function getYouTubeResults(\n  query: string\n): Promise<SearchResult[]> {\n  const response = await window.fetch(\n    serverPath + '/youtube?q=' + encodeURIComponent(query)\n  );\n  const data = await response.json();\n  return data;\n}\n\nexport async function openFileSelector(accept?: string) {\n  return new Promise<FileList | null>((resolve) => {\n    // Create an input element\n    const inputElement = document.createElement('input');\n\n    // Set its type to file\n    inputElement.type = 'file';\n\n    // Set accept to the file types you want the user to select.\n    // Include both the file extension and the mime type\n    if (accept) {\n      inputElement.accept = accept;\n    }\n\n    // set onchange event to call callback when user has selected file\n    inputElement.addEventListener('change', () => {\n      resolve(inputElement.files);\n    });\n\n    // dispatch a click event to open the file dialog\n    inputElement.dispatchEvent(new MouseEvent('click'));\n  });\n}\n\nexport function getAndSaveClientId() {\n  let clientId = window.localStorage.getItem('watchparty-clientid');\n  if (!clientId) {\n    // Generate a new clientID and save it\n    clientId = uuidv4();\n    window.localStorage.setItem('watchparty-clientid', clientId);\n  }\n  return clientId;\n}\n\nexport function calculateMedian(array: Array<number>): number {\n  // Check If Data Exists\n  if (array.length >= 1) {\n    // Sort Array\n    array = array.sort((a: number, b: number) => {\n      return a - b;\n    });\n\n    // Array Length: Even\n    if (array.length % 2 === 0) {\n      // Average Of Two Middle Numbers\n      return (array[array.length / 2 - 1] + array[array.length / 2]) / 2;\n    }\n    // Array Length: Odd\n    else {\n      // Middle Number\n      return array[(array.length - 1) / 2];\n    }\n  }\n  return 0;\n}\n\nexport async function getUserImage(\n  user: firebase.User\n): Promise<string | null> {\n  // Check if user has a Gravatar\n  const hash = user.email ? md5(user.email) : '';\n  if (user.email) {\n    const gravatar = `https://www.gravatar.com/avatar/${hash}?d=404&s=256`;\n    const response = await window.fetch(gravatar);\n    if (response.ok) {\n      return gravatar;\n    }\n  }\n  if (user.photoURL) {\n    return user.photoURL + '?height=256&width=256';\n  }\n  return `https://www.gravatar.com/avatar/${hash}?d=identicon`;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Home_container__1ukFy\",\"hero\":\"Home_hero__1zBE5\",\"green\":\"Home_green__3PMJt\",\"heroInner\":\"Home_heroInner__3w7l9\",\"heroText\":\"Home_heroText__21xIv\",\"subText\":\"Home_subText__363Kx\",\"featureSection\":\"Home_featureSection__1E5B_\",\"featureTitle\":\"Home_featureTitle__37GMX\",\"featureText\":\"Home_featureText__2VOwD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Card\":\"ChatVideoCard_Card__38w-I\",\"Wrapper\":\"ChatVideoCard_Wrapper__3cH2f\",\"ThumbnailWrapper\":\"ChatVideoCard_ThumbnailWrapper__hBV8X\",\"Thumbnail\":\"ChatVideoCard_Thumbnail__1J61h\",\"Content\":\"ChatVideoCard_Content__1q2Wx\",\"Title\":\"ChatVideoCard_Title__2XtVu\",\"ChannelName\":\"ChatVideoCard_ChannelName__3RX-r\",\"DurationLabel\":\"ChatVideoCard_DurationLabel__2dPHz\",\"Controls\":\"ChatVideoCard_Controls__3AJAK\"};","function capFirst(string: string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nfunction getRandomInt(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min)) + min;\n}\n\nexport function generateName() {\n  var name1 = [\n    'abandoned',\n    'able',\n    'absolute',\n    'adorable',\n    'adventurous',\n    'academic',\n    'acceptable',\n    'acclaimed',\n    'accomplished',\n    'accurate',\n    'aching',\n    'acidic',\n    'acrobatic',\n    'active',\n    'actual',\n    'adept',\n    'admirable',\n    'admired',\n    'adolescent',\n    'adorable',\n    'adored',\n    'advanced',\n    'afraid',\n    'affectionate',\n    'aged',\n    'aggravating',\n    'aggressive',\n    'agile',\n    'agitated',\n    'agonizing',\n    'agreeable',\n    'ajar',\n    'alarmed',\n    'alarming',\n    'alert',\n    'alienated',\n    'alive',\n    'all',\n    'altruistic',\n    'amazing',\n    'ambitious',\n    'ample',\n    'amused',\n    'amusing',\n    'anchored',\n    'ancient',\n    'angelic',\n    'angry',\n    'anguished',\n    'animated',\n    'annual',\n    'another',\n    'antique',\n    'anxious',\n    'any',\n    'apprehensive',\n    'appropriate',\n    'apt',\n    'arctic',\n    'arid',\n    'aromatic',\n    'artistic',\n    'ashamed',\n    'assured',\n    'astonishing',\n    'athletic',\n    'attached',\n    'attentive',\n    'attractive',\n    'austere',\n    'authentic',\n    'authorized',\n    'automatic',\n    'avaricious',\n    'average',\n    'aware',\n    'awesome',\n    'awful',\n    'awkward',\n    'babyish',\n    'bad',\n    'back',\n    'baggy',\n    'bare',\n    'barren',\n    'basic',\n    'beautiful',\n    'belated',\n    'beloved',\n    'beneficial',\n    'better',\n    'best',\n    'bewitched',\n    'big',\n    'big-hearted',\n    'biodegradable',\n    'bite-sized',\n    'bitter',\n    'black',\n    'black-and-white',\n    'bland',\n    'blank',\n    'blaring',\n    'bleak',\n    'blind',\n    'blissful',\n    'blond',\n    'blue',\n    'blushing',\n    'bogus',\n    'boiling',\n    'bold',\n    'bony',\n    'boring',\n    'bossy',\n    'both',\n    'bouncy',\n    'bountiful',\n    'bowed',\n    'brave',\n    'breakable',\n    'brief',\n    'bright',\n    'brilliant',\n    'brisk',\n    'broken',\n    'bronze',\n    'brown',\n    'bruised',\n    'bubbly',\n    'bulky',\n    'bumpy',\n    'buoyant',\n    'burdensome',\n    'burly',\n    'bustling',\n    'busy',\n    'buttery',\n    'buzzing',\n    'calculating',\n    'calm',\n    'candid',\n    'canine',\n    'capital',\n    'carefree',\n    'careful',\n    'careless',\n    'caring',\n    'cautious',\n    'cavernous',\n    'celebrated',\n    'charming',\n    'cheap',\n    'cheerful',\n    'cheery',\n    'chief',\n    'chilly',\n    'chubby',\n    'circular',\n    'classic',\n    'clean',\n    'clear',\n    'clear-cut',\n    'clever',\n    'close',\n    'closed',\n    'cloudy',\n    'clueless',\n    'clumsy',\n    'cluttered',\n    'coarse',\n    'cold',\n    'colorful',\n    'colorless',\n    'colossal',\n    'comfortable',\n    'common',\n    'compassionate',\n    'competent',\n    'complete',\n    'complex',\n    'complicated',\n    'composed',\n    'concerned',\n    'concrete',\n    'confused',\n    'conscious',\n    'considerate',\n    'constant',\n    'content',\n    'conventional',\n    'cooked',\n    'cool',\n    'cooperative',\n    'coordinated',\n    'corny',\n    'corrupt',\n    'costly',\n    'courageous',\n    'courteous',\n    'crafty',\n    'crazy',\n    'creamy',\n    'creative',\n    'creepy',\n    'criminal',\n    'crisp',\n    'critical',\n    'crooked',\n    'crowded',\n    'cruel',\n    'crushing',\n    'cuddly',\n    'cultivated',\n    'cultured',\n    'cumbersome',\n    'curly',\n    'curvy',\n    'cute',\n    'cylindrical',\n    'damaged',\n    'damp',\n    'dangerous',\n    'dapper',\n    'daring',\n    'darling',\n    'dark',\n    'dazzling',\n    'dead',\n    'deadly',\n    'deafening',\n    'dear',\n    'dearest',\n    'decent',\n    'decimal',\n    'decisive',\n    'deep',\n    'defenseless',\n    'defensive',\n    'defiant',\n    'deficient',\n    'definite',\n    'definitive',\n    'delayed',\n    'delectable',\n    'delicious',\n    'delightful',\n    'delirious',\n    'demanding',\n    'dense',\n    'dental',\n    'dependable',\n    'dependent',\n    'descriptive',\n    'deserted',\n    'detailed',\n    'determined',\n    'devoted',\n    'different',\n    'difficult',\n    'digital',\n    'diligent',\n    'dim',\n    'dimpled',\n    'dimwitted',\n    'direct',\n    'disastrous',\n    'discrete',\n    'disfigured',\n    'disgusting',\n    'disloyal',\n    'dismal',\n    'distant',\n    'downright',\n    'dreary',\n    'dirty',\n    'disguised',\n    'dishonest',\n    'dismal',\n    'distant',\n    'distinct',\n    'distorted',\n    'dizzy',\n    'dopey',\n    'doting',\n    'double',\n    'downright',\n    'drab',\n    'drafty',\n    'dramatic',\n    'dreary',\n    'droopy',\n    'dry',\n    'dual',\n    'dull',\n    'dutiful',\n    'each',\n    'eager',\n    'earnest',\n    'early',\n    'easy',\n    'easy-going',\n    'ecstatic',\n    'edible',\n    'educated',\n    'elaborate',\n    'elastic',\n    'elated',\n    'elderly',\n    'electric',\n    'elegant',\n    'elementary',\n    'elliptical',\n    'embarrassed',\n    'embellished',\n    'eminent',\n    'emotional',\n    'empty',\n    'enchanted',\n    'enchanting',\n    'energetic',\n    'enlightened',\n    'enormous',\n    'enraged',\n    'entire',\n    'envious',\n    'equal',\n    'equatorial',\n    'essential',\n    'esteemed',\n    'ethical',\n    'euphoric',\n    'even',\n    'evergreen',\n    'everlasting',\n    'every',\n    'evil',\n    'exalted',\n    'excellent',\n    'exemplary',\n    'exhausted',\n    'excitable',\n    'excited',\n    'exciting',\n    'exotic',\n    'expensive',\n    'experienced',\n    'expert',\n    'extraneous',\n    'extroverted',\n    'extra-large',\n    'extra-small',\n    'fabulous',\n    'failing',\n    'faint',\n    'fair',\n    'faithful',\n    'fake',\n    'false',\n    'familiar',\n    'famous',\n    'fancy',\n    'fantastic',\n    'far',\n    'faraway',\n    'far-flung',\n    'far-off',\n    'fast',\n    'fat',\n    'fatal',\n    'fatherly',\n    'favorable',\n    'favorite',\n    'fearful',\n    'fearless',\n    'feisty',\n    'feline',\n    'female',\n    'feminine',\n    'few',\n    'fickle',\n    'filthy',\n    'fine',\n    'finished',\n    'firm',\n    'first',\n    'firsthand',\n    'fitting',\n    'fixed',\n    'flaky',\n    'flamboyant',\n    'flashy',\n    'flat',\n    'flawed',\n    'flawless',\n    'flickering',\n    'flimsy',\n    'flippant',\n    'flowery',\n    'fluffy',\n    'fluid',\n    'flustered',\n    'focused',\n    'fond',\n    'foolhardy',\n    'foolish',\n    'forceful',\n    'forked',\n    'formal',\n    'forsaken',\n    'forthright',\n    'fortunate',\n    'fragrant',\n    'frail',\n    'frank',\n    'frayed',\n    'free',\n    'French',\n    'fresh',\n    'frequent',\n    'friendly',\n    'frightened',\n    'frightening',\n    'frigid',\n    'frilly',\n    'frizzy',\n    'frivolous',\n    'front',\n    'frosty',\n    'frozen',\n    'frugal',\n    'fruitful',\n    'full',\n    'fumbling',\n    'functional',\n    'funny',\n    'fussy',\n    'fuzzy',\n    'gargantuan',\n    'gaseous',\n    'general',\n    'generous',\n    'gentle',\n    'genuine',\n    'giant',\n    'giddy',\n    'gigantic',\n    'gifted',\n    'giving',\n    'glamorous',\n    'glaring',\n    'glass',\n    'gleaming',\n    'gleeful',\n    'glistening',\n    'glittering',\n    'gloomy',\n    'glorious',\n    'glossy',\n    'glum',\n    'golden',\n    'good',\n    'good-natured',\n    'gorgeous',\n    'graceful',\n    'gracious',\n    'grand',\n    'grandiose',\n    'granular',\n    'grateful',\n    'grave',\n    'gray',\n    'great',\n    'greedy',\n    'green',\n    'gregarious',\n    'grim',\n    'grimy',\n    'gripping',\n    'grizzled',\n    'gross',\n    'grotesque',\n    'grouchy',\n    'grounded',\n    'growing',\n    'growling',\n    'grown',\n    'grubby',\n    'gruesome',\n    'grumpy',\n    'guilty',\n    'gullible',\n    'gummy',\n    'hairy',\n    'half',\n    'handmade',\n    'handsome',\n    'handy',\n    'happy',\n    'happy-go-lucky',\n    'hard',\n    'hard-to-find',\n    'harmful',\n    'harmless',\n    'harmonious',\n    'harsh',\n    'hasty',\n    'hateful',\n    'haunting',\n    'healthy',\n    'heartfelt',\n    'hearty',\n    'heavenly',\n    'heavy',\n    'hefty',\n    'helpful',\n    'helpless',\n    'hidden',\n    'hideous',\n    'high',\n    'high-level',\n    'hilarious',\n    'hoarse',\n    'hollow',\n    'homely',\n    'honest',\n    'honorable',\n    'honored',\n    'hopeful',\n    'horrible',\n    'hospitable',\n    'hot',\n    'huge',\n    'humble',\n    'humiliating',\n    'humming',\n    'humongous',\n    'hungry',\n    'hurtful',\n    'husky',\n    'icky',\n    'icy',\n    'ideal',\n    'idealistic',\n    'identical',\n    'idle',\n    'idiotic',\n    'idolized',\n    'ignorant',\n    'ill',\n    'illegal',\n    'ill-fated',\n    'ill-informed',\n    'illiterate',\n    'illustrious',\n    'imaginary',\n    'imaginative',\n    'immaculate',\n    'immaterial',\n    'immediate',\n    'immense',\n    'impassioned',\n    'impeccable',\n    'impartial',\n    'imperfect',\n    'imperturbable',\n    'impish',\n    'impolite',\n    'important',\n    'impossible',\n    'impractical',\n    'impressionable',\n    'impressive',\n    'improbable',\n    'impure',\n    'inborn',\n    'incomparable',\n    'incompatible',\n    'incomplete',\n    'inconsequential',\n    'incredible',\n    'indelible',\n    'inexperienced',\n    'indolent',\n    'infamous',\n    'infantile',\n    'infatuated',\n    'inferior',\n    'infinite',\n    'informal',\n    'innocent',\n    'insecure',\n    'insidious',\n    'insignificant',\n    'insistent',\n    'instructive',\n    'insubstantial',\n    'intelligent',\n    'intent',\n    'intentional',\n    'interesting',\n    'internal',\n    'international',\n    'intrepid',\n    'ironclad',\n    'irresponsible',\n    'irritating',\n    'itchy',\n    'jaded',\n    'jagged',\n    'jam-packed',\n    'jaunty',\n    'jealous',\n    'jittery',\n    'joint',\n    'jolly',\n    'jovial',\n    'joyful',\n    'joyous',\n    'jubilant',\n    'judicious',\n    'juicy',\n    'jumbo',\n    'junior',\n    'jumpy',\n    'juvenile',\n    'kaleidoscopic',\n    'keen',\n    'key',\n    'kind',\n    'kindhearted',\n    'kindly',\n    'klutzy',\n    'knobby',\n    'knotty',\n    'knowledgeable',\n    'knowing',\n    'known',\n    'kooky',\n    'kosher',\n    'lame',\n    'lanky',\n    'large',\n    'last',\n    'lasting',\n    'late',\n    'lavish',\n    'lawful',\n    'lazy',\n    'leading',\n    'lean',\n    'leafy',\n    'left',\n    'legal',\n    'legitimate',\n    'light',\n    'lighthearted',\n    'likable',\n    'likely',\n    'limited',\n    'limp',\n    'limping',\n    'linear',\n    'lined',\n    'liquid',\n    'little',\n    'live',\n    'lively',\n    'livid',\n    'loathsome',\n    'lone',\n    'lonely',\n    'long',\n    'long-term',\n    'loose',\n    'lopsided',\n    'lost',\n    'loud',\n    'lovable',\n    'lovely',\n    'loving',\n    'low',\n    'loyal',\n    'lucky',\n    'lumbering',\n    'luminous',\n    'lumpy',\n    'lustrous',\n    'luxurious',\n    'mad',\n    'made-up',\n    'magnificent',\n    'majestic',\n    'major',\n    'male',\n    'mammoth',\n    'married',\n    'marvelous',\n    'masculine',\n    'massive',\n    'mature',\n    'meager',\n    'mealy',\n    'mean',\n    'measly',\n    'meaty',\n    'medical',\n    'mediocre',\n    'medium',\n    'meek',\n    'mellow',\n    'melodic',\n    'memorable',\n    'menacing',\n    'merry',\n    'messy',\n    'metallic',\n    'mild',\n    'milky',\n    'mindless',\n    'miniature',\n    'minor',\n    'minty',\n    'miserable',\n    'miserly',\n    'misguided',\n    'misty',\n    'mixed',\n    'modern',\n    'modest',\n    'moist',\n    'monstrous',\n    'monthly',\n    'monumental',\n    'moral',\n    'mortified',\n    'motherly',\n    'motionless',\n    'mountainous',\n    'muddy',\n    'muffled',\n    'multicolored',\n    'mundane',\n    'murky',\n    'mushy',\n    'musty',\n    'muted',\n    'mysterious',\n    'naive',\n    'narrow',\n    'nasty',\n    'natural',\n    'naughty',\n    'nautical',\n    'near',\n    'neat',\n    'necessary',\n    'needy',\n    'negative',\n    'neglected',\n    'negligible',\n    'neighboring',\n    'nervous',\n    'new',\n    'next',\n    'nice',\n    'nifty',\n    'nimble',\n    'nippy',\n    'nocturnal',\n    'noisy',\n    'nonstop',\n    'normal',\n    'notable',\n    'noted',\n    'noteworthy',\n    'novel',\n    'noxious',\n    'numb',\n    'nutritious',\n    'nutty',\n    'obedient',\n    'obese',\n    'oblong',\n    'oily',\n    'oblong',\n    'obvious',\n    'occasional',\n    'odd',\n    'oddball',\n    'offbeat',\n    'offensive',\n    'official',\n    'old',\n    'old-fashioned',\n    'only',\n    'open',\n    'optimal',\n    'optimistic',\n    'opulent',\n    'orange',\n    'orderly',\n    'organic',\n    'ornate',\n    'ornery',\n    'ordinary',\n    'original',\n    'other',\n    'our',\n    'outlying',\n    'outgoing',\n    'outlandish',\n    'outrageous',\n    'outstanding',\n    'oval',\n    'overcooked',\n    'overdue',\n    'overjoyed',\n    'overlooked',\n    'palatable',\n    'pale',\n    'paltry',\n    'parallel',\n    'parched',\n    'partial',\n    'passionate',\n    'past',\n    'pastel',\n    'peaceful',\n    'peppery',\n    'perfect',\n    'perfumed',\n    'periodic',\n    'perky',\n    'personal',\n    'pertinent',\n    'pesky',\n    'pessimistic',\n    'petty',\n    'phony',\n    'physical',\n    'piercing',\n    'pink',\n    'pitiful',\n    'plain',\n    'plaintive',\n    'plastic',\n    'playful',\n    'pleasant',\n    'pleased',\n    'pleasing',\n    'plump',\n    'plush',\n    'polished',\n    'polite',\n    'political',\n    'pointed',\n    'pointless',\n    'poised',\n    'poor',\n    'popular',\n    'portly',\n    'posh',\n    'positive',\n    'possible',\n    'potable',\n    'powerful',\n    'powerless',\n    'practical',\n    'precious',\n    'present',\n    'prestigious',\n    'pretty',\n    'precious',\n    'previous',\n    'pricey',\n    'prickly',\n    'primary',\n    'prime',\n    'pristine',\n    'private',\n    'prize',\n    'probable',\n    'productive',\n    'profitable',\n    'profuse',\n    'proper',\n    'proud',\n    'prudent',\n    'punctual',\n    'pungent',\n    'puny',\n    'pure',\n    'purple',\n    'pushy',\n    'putrid',\n    'puzzled',\n    'puzzling',\n    'quaint',\n    'qualified',\n    'quarrelsome',\n    'quarterly',\n    'queasy',\n    'querulous',\n    'questionable',\n    'quick',\n    'quick-witted',\n    'quiet',\n    'quintessential',\n    'quirky',\n    'quixotic',\n    'quizzical',\n    'radiant',\n    'ragged',\n    'rapid',\n    'rare',\n    'rash',\n    'raw',\n    'recent',\n    'reckless',\n    'rectangular',\n    'ready',\n    'real',\n    'realistic',\n    'reasonable',\n    'red',\n    'reflecting',\n    'regal',\n    'regular',\n    'reliable',\n    'relieved',\n    'remarkable',\n    'remorseful',\n    'remote',\n    'repentant',\n    'required',\n    'respectful',\n    'responsible',\n    'repulsive',\n    'revolving',\n    'rewarding',\n    'rich',\n    'rigid',\n    'right',\n    'ringed',\n    'ripe',\n    'roasted',\n    'robust',\n    'rosy',\n    'rotating',\n    'rotten',\n    'rough',\n    'round',\n    'rowdy',\n    'royal',\n    'rubbery',\n    'rundown',\n    'ruddy',\n    'rude',\n    'runny',\n    'rural',\n    'rusty',\n    'sad',\n    'safe',\n    'salty',\n    'same',\n    'sandy',\n    'sane',\n    'sarcastic',\n    'sardonic',\n    'satisfied',\n    'scaly',\n    'scarce',\n    'scared',\n    'scary',\n    'scented',\n    'scholarly',\n    'scientific',\n    'scornful',\n    'scratchy',\n    'scrawny',\n    'second',\n    'secondary',\n    'second-hand',\n    'secret',\n    'self-assured',\n    'self-reliant',\n    'selfish',\n    'sentimental',\n    'separate',\n    'serene',\n    'serious',\n    'serpentine',\n    'several',\n    'severe',\n    'shabby',\n    'shadowy',\n    'shady',\n    'shallow',\n    'shameful',\n    'shameless',\n    'sharp',\n    'shimmering',\n    'shiny',\n    'shocked',\n    'shocking',\n    'shoddy',\n    'short',\n    'short-term',\n    'showy',\n    'shrill',\n    'shy',\n    'sick',\n    'silent',\n    'silky',\n    'silly',\n    'silver',\n    'similar',\n    'simple',\n    'simplistic',\n    'sinful',\n    'single',\n    'sizzling',\n    'skeletal',\n    'skinny',\n    'sleepy',\n    'slight',\n    'slim',\n    'slimy',\n    'slippery',\n    'slow',\n    'slushy',\n    'small',\n    'smart',\n    'smoggy',\n    'smooth',\n    'smug',\n    'snappy',\n    'snarling',\n    'sneaky',\n    'sniveling',\n    'snoopy',\n    'sociable',\n    'soft',\n    'soggy',\n    'solid',\n    'somber',\n    'some',\n    'spherical',\n    'sophisticated',\n    'sore',\n    'sorrowful',\n    'soulful',\n    'soupy',\n    'sour',\n    'Spanish',\n    'sparkling',\n    'sparse',\n    'specific',\n    'spectacular',\n    'speedy',\n    'spicy',\n    'spiffy',\n    'spirited',\n    'spiteful',\n    'splendid',\n    'spotless',\n    'spotted',\n    'spry',\n    'square',\n    'squeaky',\n    'squiggly',\n    'stable',\n    'staid',\n    'stained',\n    'stale',\n    'standard',\n    'starchy',\n    'stark',\n    'starry',\n    'steep',\n    'sticky',\n    'stiff',\n    'stimulating',\n    'stingy',\n    'stormy',\n    'straight',\n    'strange',\n    'steel',\n    'strict',\n    'strident',\n    'striking',\n    'striped',\n    'strong',\n    'studious',\n    'stunning',\n    'stupendous',\n    'stupid',\n    'sturdy',\n    'stylish',\n    'subdued',\n    'submissive',\n    'substantial',\n    'subtle',\n    'suburban',\n    'sudden',\n    'sugary',\n    'sunny',\n    'super',\n    'superb',\n    'superficial',\n    'superior',\n    'supportive',\n    'sure-footed',\n    'surprised',\n    'suspicious',\n    'svelte',\n    'sweaty',\n    'sweet',\n    'sweltering',\n    'swift',\n    'sympathetic',\n    'tall',\n    'talkative',\n    'tame',\n    'tan',\n    'tangible',\n    'tart',\n    'tasty',\n    'tattered',\n    'taut',\n    'tedious',\n    'teeming',\n    'tempting',\n    'tender',\n    'tense',\n    'tepid',\n    'terrible',\n    'terrific',\n    'testy',\n    'thankful',\n    'that',\n    'these',\n    'thick',\n    'thin',\n    'third',\n    'thirsty',\n    'this',\n    'thorough',\n    'thorny',\n    'those',\n    'thoughtful',\n    'threadbare',\n    'thrifty',\n    'thunderous',\n    'tidy',\n    'tight',\n    'timely',\n    'tinted',\n    'tiny',\n    'tired',\n    'torn',\n    'total',\n    'tough',\n    'traumatic',\n    'treasured',\n    'tremendous',\n    'tragic',\n    'trained',\n    'tremendous',\n    'triangular',\n    'tricky',\n    'trifling',\n    'trim',\n    'trivial',\n    'troubled',\n    'true',\n    'trusting',\n    'trustworthy',\n    'trusty',\n    'truthful',\n    'tubby',\n    'turbulent',\n    'twin',\n    'ugly',\n    'ultimate',\n    'unacceptable',\n    'unaware',\n    'uncomfortable',\n    'uncommon',\n    'unconscious',\n    'understated',\n    'unequaled',\n    'uneven',\n    'unfinished',\n    'unfit',\n    'unfolded',\n    'unfortunate',\n    'unhappy',\n    'unhealthy',\n    'uniform',\n    'unimportant',\n    'unique',\n    'united',\n    'unkempt',\n    'unknown',\n    'unlawful',\n    'unlined',\n    'unlucky',\n    'unnatural',\n    'unpleasant',\n    'unrealistic',\n    'unripe',\n    'unruly',\n    'unselfish',\n    'unsightly',\n    'unsteady',\n    'unsung',\n    'untidy',\n    'untimely',\n    'untried',\n    'untrue',\n    'unused',\n    'unusual',\n    'unwelcome',\n    'unwieldy',\n    'unwilling',\n    'unwitting',\n    'unwritten',\n    'upbeat',\n    'upright',\n    'upset',\n    'urban',\n    'usable',\n    'used',\n    'useful',\n    'useless',\n    'utilized',\n    'utter',\n    'vacant',\n    'vague',\n    'vain',\n    'valid',\n    'valuable',\n    'vapid',\n    'variable',\n    'vast',\n    'velvety',\n    'venerated',\n    'vengeful',\n    'verifiable',\n    'vibrant',\n    'vicious',\n    'victorious',\n    'vigilant',\n    'vigorous',\n    'villainous',\n    'violet',\n    'violent',\n    'virtual',\n    'virtuous',\n    'visible',\n    'vital',\n    'vivacious',\n    'vivid',\n    'voluminous',\n    'wan',\n    'warlike',\n    'warm',\n    'warmhearted',\n    'warped',\n    'wary',\n    'wasteful',\n    'watchful',\n    'waterlogged',\n    'watery',\n    'wavy',\n    'wealthy',\n    'weak',\n    'weary',\n    'webbed',\n    'wee',\n    'weekly',\n    'weepy',\n    'weighty',\n    'weird',\n    'welcome',\n    'well-documented',\n    'well-groomed',\n    'well-informed',\n    'well-lit',\n    'well-made',\n    'well-off',\n    'well-to-do',\n    'well-worn',\n    'wet',\n    'which',\n    'whimsical',\n    'whirlwind',\n    'whispered',\n    'white',\n    'whole',\n    'whopping',\n    'wicked',\n    'wide',\n    'wide-eyed',\n    'wiggly',\n    'wild',\n    'willing',\n    'wilted',\n    'winding',\n    'windy',\n    'winged',\n    'wiry',\n    'wise',\n    'witty',\n    'wobbly',\n    'woeful',\n    'wonderful',\n    'wooden',\n    'woozy',\n    'wordy',\n    'worldly',\n    'worn',\n    'worried',\n    'worrisome',\n    'worse',\n    'worst',\n    'worthless',\n    'worthwhile',\n    'worthy',\n    'wrathful',\n    'wretched',\n    'writhing',\n    'wrong',\n    'wry',\n    'yawning',\n    'yearly',\n    'yellow',\n    'yellowish',\n    'young',\n    'youthful',\n    'yummy',\n    'zany',\n    'zealous',\n    'zesty',\n    'zigzag',\n    'rocky',\n  ];\n\n  var name2 = [\n    'people',\n    'history',\n    'way',\n    'art',\n    'world',\n    'information',\n    'map',\n    'family',\n    'government',\n    'health',\n    'system',\n    'computer',\n    'meat',\n    'year',\n    'thanks',\n    'music',\n    'person',\n    'reading',\n    'method',\n    'data',\n    'food',\n    'understanding',\n    'theory',\n    'law',\n    'bird',\n    'literature',\n    'problem',\n    'software',\n    'control',\n    'knowledge',\n    'power',\n    'ability',\n    'economics',\n    'love',\n    'internet',\n    'television',\n    'science',\n    'library',\n    'nature',\n    'fact',\n    'product',\n    'idea',\n    'temperature',\n    'investment',\n    'area',\n    'society',\n    'activity',\n    'story',\n    'industry',\n    'media',\n    'thing',\n    'oven',\n    'community',\n    'definition',\n    'safety',\n    'quality',\n    'development',\n    'language',\n    'management',\n    'player',\n    'variety',\n    'video',\n    'week',\n    'security',\n    'country',\n    'exam',\n    'movie',\n    'organization',\n    'equipment',\n    'physics',\n    'analysis',\n    'policy',\n    'series',\n    'thought',\n    'basis',\n    'boyfriend',\n    'direction',\n    'strategy',\n    'technology',\n    'army',\n    'camera',\n    'freedom',\n    'paper',\n    'environment',\n    'child',\n    'instance',\n    'month',\n    'truth',\n    'marketing',\n    'university',\n    'writing',\n    'article',\n    'department',\n    'difference',\n    'goal',\n    'news',\n    'audience',\n    'fishing',\n    'growth',\n    'income',\n    'marriage',\n    'user',\n    'combination',\n    'failure',\n    'meaning',\n    'medicine',\n    'philosophy',\n    'teacher',\n    'communication',\n    'night',\n    'chemistry',\n    'disease',\n    'disk',\n    'energy',\n    'nation',\n    'road',\n    'role',\n    'soup',\n    'advertising',\n    'location',\n    'success',\n    'addition',\n    'apartment',\n    'education',\n    'math',\n    'moment',\n    'painting',\n    'politics',\n    'attention',\n    'decision',\n    'event',\n    'property',\n    'shopping',\n    'student',\n    'wood',\n    'competition',\n    'distribution',\n    'entertainment',\n    'office',\n    'population',\n    'president',\n    'unit',\n    'category',\n    'cigarette',\n    'context',\n    'introduction',\n    'opportunity',\n    'performance',\n    'driver',\n    'flight',\n    'length',\n    'magazine',\n    'newspaper',\n    'relationship',\n    'teaching',\n    'cell',\n    'dealer',\n    'debate',\n    'finding',\n    'lake',\n    'member',\n    'message',\n    'phone',\n    'scene',\n    'appearance',\n    'association',\n    'concept',\n    'customer',\n    'death',\n    'discussion',\n    'housing',\n    'inflation',\n    'insurance',\n    'mood',\n    'woman',\n    'advice',\n    'blood',\n    'effort',\n    'expression',\n    'importance',\n    'opinion',\n    'payment',\n    'reality',\n    'responsibility',\n    'situation',\n    'skill',\n    'statement',\n    'wealth',\n    'application',\n    'city',\n    'county',\n    'depth',\n    'estate',\n    'foundation',\n    'grandmother',\n    'heart',\n    'perspective',\n    'photo',\n    'recipe',\n    'studio',\n    'topic',\n    'collection',\n    'depression',\n    'imagination',\n    'passion',\n    'percentage',\n    'resource',\n    'setting',\n    'ad',\n    'agency',\n    'college',\n    'connection',\n    'criticism',\n    'debt',\n    'description',\n    'memory',\n    'patience',\n    'secretary',\n    'solution',\n    'administration',\n    'aspect',\n    'attitude',\n    'director',\n    'personality',\n    'psychology',\n    'recommendation',\n    'response',\n    'selection',\n    'storage',\n    'version',\n    'alcohol',\n    'argument',\n    'complaint',\n    'contract',\n    'emphasis',\n    'highway',\n    'loss',\n    'membership',\n    'possession',\n    'preparation',\n    'steak',\n    'union',\n    'agreement',\n    'cancer',\n    'currency',\n    'employment',\n    'engineering',\n    'entry',\n    'interaction',\n    'limit',\n    'mixture',\n    'preference',\n    'region',\n    'republic',\n    'seat',\n    'tradition',\n    'virus',\n    'actor',\n    'classroom',\n    'delivery',\n    'device',\n    'difficulty',\n    'drama',\n    'election',\n    'engine',\n    'football',\n    'guidance',\n    'hotel',\n    'match',\n    'owner',\n    'priority',\n    'protection',\n    'suggestion',\n    'tension',\n    'variation',\n    'anxiety',\n    'atmosphere',\n    'awareness',\n    'bread',\n    'climate',\n    'comparison',\n    'confusion',\n    'construction',\n    'elevator',\n    'emotion',\n    'employee',\n    'employer',\n    'guest',\n    'height',\n    'leadership',\n    'mall',\n    'manager',\n    'operation',\n    'recording',\n    'respect',\n    'sample',\n    'transportation',\n    'boring',\n    'charity',\n    'cousin',\n    'disaster',\n    'editor',\n    'efficiency',\n    'excitement',\n    'extent',\n    'feedback',\n    'guitar',\n    'homework',\n    'leader',\n    'mom',\n    'outcome',\n    'permission',\n    'presentation',\n    'promotion',\n    'reflection',\n    'refrigerator',\n    'resolution',\n    'revenue',\n    'session',\n    'singer',\n    'tennis',\n    'basket',\n    'bonus',\n    'cabinet',\n    'childhood',\n    'church',\n    'clothes',\n    'coffee',\n    'dinner',\n    'drawing',\n    'hair',\n    'hearing',\n    'initiative',\n    'judgment',\n    'lab',\n    'measurement',\n    'mode',\n    'mud',\n    'orange',\n    'poetry',\n    'police',\n    'possibility',\n    'procedure',\n    'queen',\n    'ratio',\n    'relation',\n    'restaurant',\n    'satisfaction',\n    'sector',\n    'signature',\n    'significance',\n    'song',\n    'tooth',\n    'town',\n    'vehicle',\n    'volume',\n    'wife',\n    'accident',\n    'airport',\n    'appointment',\n    'arrival',\n    'assumption',\n    'baseball',\n    'chapter',\n    'committee',\n    'conversation',\n    'database',\n    'enthusiasm',\n    'error',\n    'explanation',\n    'farmer',\n    'gate',\n    'girl',\n    'hall',\n    'historian',\n    'hospital',\n    'injury',\n    'instruction',\n    'maintenance',\n    'manufacturer',\n    'meal',\n    'perception',\n    'pie',\n    'poem',\n    'presence',\n    'proposal',\n    'reception',\n    'replacement',\n    'revolution',\n    'river',\n    'son',\n    'speech',\n    'tea',\n    'village',\n    'warning',\n    'winner',\n    'worker',\n    'writer',\n    'assistance',\n    'breath',\n    'buyer',\n    'chest',\n    'chocolate',\n    'conclusion',\n    'contribution',\n    'cookie',\n    'courage',\n    'desk',\n    'drawer',\n    'establishment',\n    'examination',\n    'garbage',\n    'grocery',\n    'honey',\n    'impression',\n    'improvement',\n    'independence',\n    'insect',\n    'inspection',\n    'inspector',\n    'king',\n    'ladder',\n    'menu',\n    'penalty',\n    'piano',\n    'potato',\n    'profession',\n    'professor',\n    'quantity',\n    'reaction',\n    'requirement',\n    'salad',\n    'sister',\n    'supermarket',\n    'tongue',\n    'weakness',\n    'wedding',\n    'affair',\n    'ambition',\n    'analyst',\n    'apple',\n    'assignment',\n    'assistant',\n    'bathroom',\n    'bedroom',\n    'beer',\n    'birthday',\n    'celebration',\n    'championship',\n    'cheek',\n    'client',\n    'consequence',\n    'departure',\n    'diamond',\n    'dirt',\n    'ear',\n    'fortune',\n    'friendship',\n    'funeral',\n    'gene',\n    'girlfriend',\n    'hat',\n    'indication',\n    'intention',\n    'lady',\n    'midnight',\n    'negotiation',\n    'obligation',\n    'passenger',\n    'pizza',\n    'platform',\n    'poet',\n    'pollution',\n    'recognition',\n    'reputation',\n    'shirt',\n    'speaker',\n    'stranger',\n    'surgery',\n    'sympathy',\n    'tale',\n    'throat',\n    'trainer',\n    'uncle',\n    'youth',\n    'time',\n    'work',\n    'film',\n    'water',\n    'money',\n    'example',\n    'while',\n    'business',\n    'study',\n    'game',\n    'life',\n    'form',\n    'air',\n    'day',\n    'place',\n    'number',\n    'part',\n    'field',\n    'fish',\n    'back',\n    'process',\n    'heat',\n    'hand',\n    'experience',\n    'job',\n    'book',\n    'end',\n    'point',\n    'type',\n    'home',\n    'economy',\n    'value',\n    'body',\n    'market',\n    'guide',\n    'interest',\n    'state',\n    'radio',\n    'course',\n    'company',\n    'price',\n    'size',\n    'card',\n    'list',\n    'mind',\n    'trade',\n    'line',\n    'care',\n    'group',\n    'risk',\n    'word',\n    'fat',\n    'force',\n    'key',\n    'light',\n    'training',\n    'name',\n    'school',\n    'top',\n    'amount',\n    'level',\n    'order',\n    'practice',\n    'research',\n    'sense',\n    'service',\n    'piece',\n    'web',\n    'boss',\n    'sport',\n    'fun',\n    'house',\n    'page',\n    'term',\n    'test',\n    'answer',\n    'sound',\n    'focus',\n    'matter',\n    'kind',\n    'soil',\n    'board',\n    'oil',\n    'picture',\n    'access',\n    'garden',\n    'range',\n    'rate',\n    'reason',\n    'future',\n    'site',\n    'demand',\n    'exercise',\n    'image',\n    'case',\n    'cause',\n    'coast',\n    'action',\n    'age',\n    'bad',\n    'boat',\n    'record',\n    'result',\n    'section',\n    'building',\n    'mouse',\n    'cash',\n    'class',\n    'period',\n    'plan',\n    'store',\n    'tax',\n    'side',\n    'subject',\n    'space',\n    'rule',\n    'stock',\n    'weather',\n    'chance',\n    'figure',\n    'man',\n    'model',\n    'source',\n    'beginning',\n    'earth',\n    'program',\n    'chicken',\n    'design',\n    'feature',\n    'head',\n    'material',\n    'purpose',\n    'question',\n    'rock',\n    'salt',\n    'act',\n    'birth',\n    'car',\n    'dog',\n    'object',\n    'scale',\n    'sun',\n    'note',\n    'profit',\n    'rent',\n    'speed',\n    'style',\n    'war',\n    'bank',\n    'craft',\n    'half',\n    'inside',\n    'outside',\n    'standard',\n    'bus',\n    'exchange',\n    'eye',\n    'fire',\n    'position',\n    'pressure',\n    'stress',\n    'advantage',\n    'benefit',\n    'box',\n    'frame',\n    'issue',\n    'step',\n    'cycle',\n    'face',\n    'item',\n    'metal',\n    'paint',\n    'review',\n    'room',\n    'screen',\n    'structure',\n    'view',\n    'account',\n    'ball',\n    'discipline',\n    'medium',\n    'share',\n    'balance',\n    'bit',\n    'black',\n    'bottom',\n    'choice',\n    'gift',\n    'impact',\n    'machine',\n    'shape',\n    'tool',\n    'wind',\n    'address',\n    'average',\n    'career',\n    'culture',\n    'morning',\n    'pot',\n    'sign',\n    'table',\n    'task',\n    'condition',\n    'contact',\n    'credit',\n    'egg',\n    'hope',\n    'ice',\n    'network',\n    'north',\n    'square',\n    'attempt',\n    'date',\n    'effect',\n    'link',\n    'post',\n    'star',\n    'voice',\n    'capital',\n    'challenge',\n    'friend',\n    'self',\n    'shot',\n    'brush',\n    'couple',\n    'exit',\n    'front',\n    'function',\n    'lack',\n    'living',\n    'plant',\n    'plastic',\n    'spot',\n    'summer',\n    'taste',\n    'theme',\n    'track',\n    'wing',\n    'brain',\n    'button',\n    'click',\n    'desire',\n    'foot',\n    'gas',\n    'influence',\n    'notice',\n    'rain',\n    'wall',\n    'base',\n    'damage',\n    'distance',\n    'feeling',\n    'pair',\n    'savings',\n    'staff',\n    'sugar',\n    'target',\n    'text',\n    'animal',\n    'author',\n    'budget',\n    'discount',\n    'file',\n    'ground',\n    'lesson',\n    'minute',\n    'officer',\n    'phase',\n    'reference',\n    'register',\n    'sky',\n    'stage',\n    'stick',\n    'title',\n    'trouble',\n    'bowl',\n    'bridge',\n    'campaign',\n    'character',\n    'club',\n    'edge',\n    'evidence',\n    'fan',\n    'letter',\n    'lock',\n    'maximum',\n    'novel',\n    'option',\n    'pack',\n    'park',\n    'quarter',\n    'skin',\n    'sort',\n    'weight',\n    'baby',\n    'background',\n    'carry',\n    'dish',\n    'factor',\n    'fruit',\n    'glass',\n    'joint',\n    'master',\n    'muscle',\n    'red',\n    'strength',\n    'traffic',\n    'trip',\n    'vegetable',\n    'appeal',\n    'chart',\n    'gear',\n    'ideal',\n    'kitchen',\n    'land',\n    'log',\n    'mother',\n    'net',\n    'party',\n    'principle',\n    'relative',\n    'sale',\n    'season',\n    'signal',\n    'spirit',\n    'street',\n    'tree',\n    'wave',\n    'belt',\n    'bench',\n    'commission',\n    'copy',\n    'drop',\n    'minimum',\n    'path',\n    'progress',\n    'project',\n    'sea',\n    'south',\n    'status',\n    'stuff',\n    'ticket',\n    'tour',\n    'angle',\n    'blue',\n    'breakfast',\n    'confidence',\n    'daughter',\n    'degree',\n    'doctor',\n    'dot',\n    'dream',\n    'duty',\n    'essay',\n    'father',\n    'fee',\n    'finance',\n    'hour',\n    'juice',\n    'luck',\n    'milk',\n    'mouth',\n    'peace',\n    'pipe',\n    'stable',\n    'storm',\n    'substance',\n    'team',\n    'trick',\n    'afternoon',\n    'bat',\n    'beach',\n    'blank',\n    'catch',\n    'chain',\n    'consideration',\n    'cream',\n    'crew',\n    'detail',\n    'gold',\n    'interview',\n    'kid',\n    'mark',\n    'mission',\n    'pain',\n    'pleasure',\n    'score',\n    'screw',\n    'sex',\n    'shop',\n    'shower',\n    'suit',\n    'tone',\n    'window',\n    'agent',\n    'band',\n    'bath',\n    'block',\n    'bone',\n    'calendar',\n    'candidate',\n    'cap',\n    'coat',\n    'contest',\n    'corner',\n    'court',\n    'cup',\n    'district',\n    'door',\n    'east',\n    'finger',\n    'garage',\n    'guarantee',\n    'hole',\n    'hook',\n    'implement',\n    'layer',\n    'lecture',\n    'lie',\n    'manner',\n    'meeting',\n    'nose',\n    'parking',\n    'partner',\n    'profile',\n    'rice',\n    'routine',\n    'schedule',\n    'swimming',\n    'telephone',\n    'tip',\n    'winter',\n    'airline',\n    'bag',\n    'battle',\n    'bed',\n    'bill',\n    'bother',\n    'cake',\n    'code',\n    'curve',\n    'designer',\n    'dimension',\n    'dress',\n    'ease',\n    'emergency',\n    'evening',\n    'extension',\n    'farm',\n    'fight',\n    'gap',\n    'grade',\n    'holiday',\n    'horror',\n    'horse',\n    'host',\n    'husband',\n    'loan',\n    'mistake',\n    'mountain',\n    'nail',\n    'noise',\n    'occasion',\n    'package',\n    'patient',\n    'pause',\n    'phrase',\n    'proof',\n    'race',\n    'relief',\n    'sand',\n    'sentence',\n    'shoulder',\n    'smoke',\n    'stomach',\n    'string',\n    'tourist',\n    'towel',\n    'vacation',\n    'west',\n    'wheel',\n    'wine',\n    'arm',\n    'aside',\n    'associate',\n    'bet',\n    'blow',\n    'border',\n    'branch',\n    'breast',\n    'brother',\n    'buddy',\n    'bunch',\n    'chip',\n    'coach',\n    'cross',\n    'document',\n    'draft',\n    'dust',\n    'expert',\n    'floor',\n    'god',\n    'golf',\n    'habit',\n    'iron',\n    'judge',\n    'knife',\n    'landscape',\n    'league',\n    'mail',\n    'mess',\n    'native',\n    'opening',\n    'parent',\n    'pattern',\n    'pin',\n    'pool',\n    'pound',\n    'request',\n    'salary',\n    'shame',\n    'shelter',\n    'shoe',\n    'silver',\n    'tackle',\n    'tank',\n    'trust',\n    'assist',\n    'bake',\n    'bar',\n    'bell',\n    'bike',\n    'blame',\n    'boy',\n    'brick',\n    'chair',\n    'closet',\n    'clue',\n    'collar',\n    'comment',\n    'conference',\n    'devil',\n    'diet',\n    'fear',\n    'fuel',\n    'glove',\n    'jacket',\n    'lunch',\n    'monitor',\n    'mortgage',\n    'nurse',\n    'pace',\n    'panic',\n    'peak',\n    'plane',\n    'reward',\n    'row',\n    'sandwich',\n    'shock',\n    'spite',\n    'spray',\n    'surprise',\n    'till',\n    'transition',\n    'weekend',\n    'welcome',\n    'yard',\n    'alarm',\n    'bend',\n    'bicycle',\n    'bite',\n    'blind',\n    'bottle',\n    'cable',\n    'candle',\n    'clerk',\n    'cloud',\n    'concert',\n    'counter',\n    'flower',\n    'grandfather',\n    'harm',\n    'knee',\n    'lawyer',\n    'leather',\n    'load',\n    'mirror',\n    'neck',\n    'pension',\n    'plate',\n    'purple',\n    'ruin',\n    'ship',\n    'skirt',\n    'slice',\n    'snow',\n    'specialist',\n    'stroke',\n    'switch',\n    'trash',\n    'tune',\n    'zone',\n    'anger',\n    'award',\n    'bid',\n    'bitter',\n    'boot',\n    'bug',\n    'camp',\n    'candy',\n    'carpet',\n    'cat',\n    'champion',\n    'channel',\n    'clock',\n    'comfort',\n    'cow',\n    'crack',\n    'engineer',\n    'entrance',\n    'fault',\n    'grass',\n    'guy',\n    'hell',\n    'highlight',\n    'incident',\n    'island',\n    'joke',\n    'jury',\n    'leg',\n    'lip',\n    'mate',\n    'motor',\n    'nerve',\n    'passage',\n    'pen',\n    'pride',\n    'priest',\n    'prize',\n    'promise',\n    'resident',\n    'resort',\n    'ring',\n    'roof',\n    'rope',\n    'sail',\n    'scheme',\n    'script',\n    'sock',\n    'station',\n    'toe',\n    'tower',\n    'truck',\n    'witness',\n    'can',\n    'will',\n    'other',\n    'use',\n    'make',\n    'good',\n    'look',\n    'help',\n    'go',\n    'great',\n    'being',\n    'still',\n    'public',\n    'read',\n    'keep',\n    'start',\n    'give',\n    'human',\n    'local',\n    'general',\n    'specific',\n    'long',\n    'play',\n    'feel',\n    'high',\n    'put',\n    'common',\n    'set',\n    'change',\n    'simple',\n    'past',\n    'big',\n    'possible',\n    'particular',\n    'major',\n    'personal',\n    'current',\n    'national',\n    'cut',\n    'natural',\n    'physical',\n    'show',\n    'try',\n    'check',\n    'second',\n    'call',\n    'move',\n    'pay',\n    'let',\n    'increase',\n    'single',\n    'individual',\n    'turn',\n    'ask',\n    'buy',\n    'guard',\n    'hold',\n    'main',\n    'offer',\n    'potential',\n    'professional',\n    'international',\n    'travel',\n    'cook',\n    'alternative',\n    'special',\n    'working',\n    'whole',\n    'dance',\n    'excuse',\n    'cold',\n    'commercial',\n    'low',\n    'purchase',\n    'deal',\n    'primary',\n    'worth',\n    'fall',\n    'necessary',\n    'positive',\n    'produce',\n    'search',\n    'present',\n    'spend',\n    'talk',\n    'creative',\n    'tell',\n    'cost',\n    'drive',\n    'green',\n    'support',\n    'glad',\n    'remove',\n    'return',\n    'run',\n    'complex',\n    'due',\n    'effective',\n    'middle',\n    'regular',\n    'reserve',\n    'independent',\n    'leave',\n    'original',\n    'reach',\n    'rest',\n    'serve',\n    'watch',\n    'beautiful',\n    'charge',\n    'active',\n    'break',\n    'negative',\n    'safe',\n    'stay',\n    'visit',\n    'visual',\n    'affect',\n    'cover',\n    'report',\n    'rise',\n    'walk',\n    'white',\n    'junior',\n    'pick',\n    'unique',\n    'classic',\n    'final',\n    'lift',\n    'mix',\n    'private',\n    'stop',\n    'teach',\n    'western',\n    'concern',\n    'familiar',\n    'fly',\n    'official',\n    'broad',\n    'comfortable',\n    'gain',\n    'rich',\n    'save',\n    'stand',\n    'young',\n    'heavy',\n    'lead',\n    'listen',\n    'valuable',\n    'worry',\n    'handle',\n    'leading',\n    'meet',\n    'release',\n    'sell',\n    'finish',\n    'normal',\n    'press',\n    'ride',\n    'secret',\n    'spread',\n    'spring',\n    'tough',\n    'wait',\n    'brown',\n    'deep',\n    'display',\n    'flow',\n    'hit',\n    'objective',\n    'shoot',\n    'touch',\n    'cancel',\n    'chemical',\n    'cry',\n    'dump',\n    'extreme',\n    'push',\n    'conflict',\n    'eat',\n    'fill',\n    'formal',\n    'jump',\n    'kick',\n    'opposite',\n    'pass',\n    'pitch',\n    'remote',\n    'total',\n    'treat',\n    'vast',\n    'abuse',\n    'beat',\n    'burn',\n    'deposit',\n    'print',\n    'raise',\n    'sleep',\n    'somewhere',\n    'advance',\n    'consist',\n    'dark',\n    'double',\n    'draw',\n    'equal',\n    'fix',\n    'hire',\n    'internal',\n    'join',\n    'kill',\n    'sensitive',\n    'tap',\n    'win',\n    'attack',\n    'claim',\n    'constant',\n    'drag',\n    'drink',\n    'guess',\n    'minor',\n    'pull',\n    'raw',\n    'soft',\n    'solid',\n    'wear',\n    'weird',\n    'wonder',\n    'annual',\n    'count',\n    'dead',\n    'doubt',\n    'feed',\n    'forever',\n    'impress',\n    'repeat',\n    'round',\n    'sing',\n    'slide',\n    'strip',\n    'wish',\n    'combine',\n    'command',\n    'dig',\n    'divide',\n    'equivalent',\n    'hang',\n    'hunt',\n    'initial',\n    'march',\n    'mention',\n    'spiritual',\n    'survey',\n    'tie',\n    'adult',\n    'brief',\n    'crazy',\n    'escape',\n    'gather',\n    'hate',\n    'prior',\n    'repair',\n    'rough',\n    'sad',\n    'scratch',\n    'sick',\n    'strike',\n    'employ',\n    'external',\n    'hurt',\n    'illegal',\n    'laugh',\n    'lay',\n    'mobile',\n    'nasty',\n    'ordinary',\n    'respond',\n    'royal',\n    'senior',\n    'split',\n    'strain',\n    'struggle',\n    'swim',\n    'train',\n    'upper',\n    'wash',\n    'yellow',\n    'convert',\n    'crash',\n    'dependent',\n    'fold',\n    'funny',\n    'grab',\n    'hide',\n    'miss',\n    'permit',\n    'quote',\n    'recover',\n    'resolve',\n    'roll',\n    'sink',\n    'slip',\n    'spare',\n    'suspect',\n    'sweet',\n    'swing',\n    'twist',\n    'upstairs',\n    'usual',\n    'abroad',\n    'brave',\n    'calm',\n    'concentrate',\n    'estimate',\n    'grand',\n    'male',\n    'mine',\n    'prompt',\n    'quiet',\n    'refuse',\n    'regret',\n    'reveal',\n    'rush',\n    'shake',\n    'shift',\n    'shine',\n    'steal',\n    'suck',\n    'surround',\n    'bear',\n    'brilliant',\n    'dare',\n    'dear',\n    'delay',\n    'drunk',\n    'female',\n    'hurry',\n    'inevitable',\n    'invite',\n    'kiss',\n    'neat',\n    'pop',\n    'punch',\n    'quit',\n    'reply',\n    'representative',\n    'resist',\n    'rip',\n    'rub',\n    'silly',\n    'smile',\n    'spell',\n    'stretch',\n    'stupid',\n    'tear',\n    'temporary',\n    'tomorrow',\n    'wake',\n    'wrap',\n    'yesterday',\n    'Thomas',\n    'Tom',\n    'Lieuwe',\n  ];\n\n  var name =\n    capFirst(name1[getRandomInt(0, name1.length + 1)]) +\n    ' ' +\n    capFirst(name2[getRandomInt(0, name2.length + 1)]);\n  return name;\n}\n","import React, { useState } from 'react';\nimport './UserMenu.css';\nimport { Popup, Button } from 'semantic-ui-react';\n\nexport const UserMenu = ({\n  user,\n  socket,\n  userToManage,\n  trigger,\n  displayName,\n  position,\n  disabled,\n}: {\n  user?: firebase.User;\n  socket: SocketIOClient.Socket;\n  userToManage: string;\n  trigger: any;\n  icon?: string;\n  displayName?: string;\n  position?: any;\n  disabled: boolean;\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const handleOpen = () => setIsOpen(true);\n  const handleClose = () => setIsOpen(false);\n  return (\n    <Popup\n      className=\"userMenu\"\n      trigger={trigger}\n      on=\"click\"\n      open={isOpen}\n      onOpen={handleOpen}\n      onClose={handleClose}\n      position={position}\n      disabled={disabled}\n    >\n      <div className=\"userMenuHeader\">{displayName}</div>\n      <div className=\"userMenuContent\">\n        <Button\n          content=\"Kick\"\n          negative\n          icon=\"ban\"\n          onClick={async () => {\n            const token = await user?.getIdToken();\n            socket.emit('kickUser', {\n              userToBeKicked: userToManage,\n              uid: user?.uid,\n              token,\n            });\n            setIsOpen(false);\n          }}\n        />\n      </div>\n    </Popup>\n  );\n};\n","import React from 'react';\nimport { Button, Comment, Icon, Input } from 'semantic-ui-react';\nimport 'emoji-mart/css/emoji-mart.css';\nimport { EmojiData, Picker } from 'emoji-mart';\nimport onClickOutside from 'react-onclickoutside';\n\nimport {\n  formatTimestamp,\n  getColorForStringHex,\n  getDefaultPicture,\n} from '../../utils';\nimport { Separator } from '../App/App';\nimport { UserMenu } from '../UserMenu/UserMenu';\n\ninterface ChatProps {\n  chat: ChatMessage[];\n  nameMap: StringDict;\n  pictureMap: StringDict;\n  socket: SocketIOClient.Socket;\n  scrollTimestamp: number;\n  className?: string;\n  getMediaDisplayName: Function;\n  hide?: boolean;\n  isChatDisabled?: boolean;\n  user: firebase.User | undefined;\n  owner: string | undefined;\n}\n\nexport class Chat extends React.Component<ChatProps> {\n  public state = { chatMsg: '', isNearBottom: true, isPickerOpen: false };\n  messagesRef = React.createRef<HTMLDivElement>();\n\n  componentDidMount() {\n    this.scrollToBottom();\n    this.messagesRef.current?.addEventListener('scroll', this.onScroll);\n  }\n\n  componentDidUpdate(prevProps: ChatProps) {\n    if (this.props.scrollTimestamp !== prevProps.scrollTimestamp) {\n      if (prevProps.scrollTimestamp === 0 || this.state.isNearBottom) {\n        this.scrollToBottom();\n      }\n    }\n    if (this.props.hide !== prevProps.hide) {\n      this.scrollToBottom();\n    }\n  }\n\n  updateChatMsg = (_e: any, data: { value: string }) => {\n    // console.log(e.target.selectionStart);\n    this.setState({ chatMsg: data.value });\n  };\n\n  sendChatMsg = () => {\n    if (!this.state.chatMsg) {\n      return;\n    }\n    if (this.chatTooLong()) {\n      return;\n    }\n    this.setState({ chatMsg: '' });\n    this.props.socket.emit('CMD:chat', this.state.chatMsg);\n  };\n\n  chatTooLong = () => {\n    return Boolean(this.state.chatMsg?.length > 10000);\n  };\n\n  onScroll = () => {\n    this.setState({ isNearBottom: this.isChatNearBottom() });\n  };\n\n  isChatNearBottom = () => {\n    return (\n      this.messagesRef.current &&\n      this.messagesRef.current.scrollHeight -\n        this.messagesRef.current.scrollTop -\n        this.messagesRef.current.offsetHeight <\n        100\n    );\n  };\n\n  scrollToBottom = () => {\n    if (this.messagesRef.current) {\n      this.messagesRef.current.scrollTop = this.messagesRef.current.scrollHeight;\n    }\n  };\n\n  formatMessage = (cmd: string, msg: string): React.ReactNode | string => {\n    if (cmd === 'host') {\n      return (\n        <React.Fragment>\n          {`changed the video to `}\n          <span style={{ textTransform: 'initial' }}>\n            {this.props.getMediaDisplayName(msg)}\n          </span>\n        </React.Fragment>\n      );\n    } else if (cmd === 'playlistAdd') {\n      return (\n        <React.Fragment>\n          {`added to the playlist: `}\n          <span style={{ textTransform: 'initial' }}>\n            {this.props.getMediaDisplayName(msg)}\n          </span>\n        </React.Fragment>\n      );\n    } else if (cmd === 'seek') {\n      return `jumped to ${formatTimestamp(msg)}`;\n    } else if (cmd === 'play') {\n      return `started the video at ${formatTimestamp(msg)}`;\n    } else if (cmd === 'pause') {\n      return `paused the video at ${formatTimestamp(msg)}`;\n    } else if (cmd === 'lock') {\n      return `locked the room`;\n    } else if (cmd === 'unlock') {\n      return 'unlocked the room';\n    } else if (cmd === 'vBrowserTimeout') {\n      return (\n        <React.Fragment>\n          The VBrowser shut down automatically.\n          <br />\n          Subscribe for longer sessions.\n        </React.Fragment>\n      );\n    } else if (cmd === 'vBrowserAlmostTimeout') {\n      return (\n        <React.Fragment>\n          The VBrowser will shut down soon.\n          <br />\n          Subscribe for longer sessions.\n        </React.Fragment>\n      );\n    }\n    return cmd;\n  };\n\n  addEmoji = (emoji: EmojiData) => {\n    this.setState({ chatMsg: this.state.chatMsg + (emoji as any).native });\n  };\n\n  render() {\n    return (\n      <div\n        className={this.props.className}\n        style={{\n          display: this.props.hide ? 'none' : 'flex',\n          flexDirection: 'column',\n          flexGrow: 1,\n          minHeight: 0,\n          marginTop: 0,\n          marginBottom: 0,\n          padding: '8px',\n        }}\n      >\n        <div\n          className=\"chatContainer\"\n          ref={this.messagesRef}\n          style={{ position: 'relative' }}\n        >\n          <Comment.Group>\n            {this.props.chat.map((msg) => (\n              <ChatMessage\n                key={msg.timestamp + msg.id}\n                message={msg}\n                pictureMap={this.props.pictureMap}\n                nameMap={this.props.nameMap}\n                formatMessage={this.formatMessage}\n                owner={this.props.owner}\n                user={this.props.user}\n                socket={this.props.socket}\n              />\n            ))}\n            {/* <div ref={this.messagesEndRef} /> */}\n          </Comment.Group>\n          {!this.state.isNearBottom && (\n            <Button\n              size=\"tiny\"\n              onClick={this.scrollToBottom}\n              style={{\n                position: 'sticky',\n                bottom: 0,\n                display: 'block',\n                margin: '0 auto',\n              }}\n            >\n              Jump to bottom\n            </Button>\n          )}\n        </div>\n        <Separator />\n        {this.state.isPickerOpen && (\n          <PickerMenu\n            addEmoji={this.addEmoji}\n            closeMenu={() => this.setState({ isPickerOpen: false })}\n          />\n        )}\n        <Input\n          inverted\n          fluid\n          onKeyPress={(e: any) => e.key === 'Enter' && this.sendChatMsg()}\n          onChange={this.updateChatMsg}\n          value={this.state.chatMsg}\n          error={this.chatTooLong()}\n          icon\n          disabled={this.props.isChatDisabled}\n          placeholder={\n            this.props.isChatDisabled\n              ? 'The chat was disabled by the room owner.'\n              : 'Enter a message...'\n          }\n        >\n          <input />\n          <Icon\n            // style={{ right: '40px' }}\n            onClick={() => this.setState({ isPickerOpen: true })}\n            name={'' as any}\n            inverted\n            circular\n            link\n            disabled={this.props.isChatDisabled}\n            style={{ opacity: 1 }}\n          >\n            <span role=\"img\" aria-label=\"Emoji\">\n              \n            </span>\n          </Icon>\n          {/* <Icon onClick={this.sendChatMsg} name=\"send\" inverted circular link /> */}\n        </Input>\n      </div>\n    );\n  }\n}\n\nconst ChatMessage = ({\n  message,\n  nameMap,\n  pictureMap,\n  formatMessage,\n  user,\n  socket,\n  owner,\n}: {\n  message: ChatMessage;\n  nameMap: StringDict;\n  pictureMap: StringDict;\n  formatMessage: (cmd: string, msg: string) => React.ReactNode;\n  user: firebase.User | undefined;\n  socket: SocketIOClient.Socket;\n  owner: string | undefined;\n}) => {\n  const { id, timestamp, cmd, msg, system } = message;\n  return (\n    <Comment>\n      {id ? (\n        <Comment.Avatar\n          src={\n            pictureMap[id] ||\n            getDefaultPicture(nameMap[id], getColorForStringHex(id))\n          }\n        />\n      ) : null}\n      <Comment.Content>\n        <UserMenu\n          displayName={nameMap[id] || id}\n          user={user}\n          socket={socket}\n          userToManage={id}\n          disabled={!Boolean(owner && owner === user?.uid)}\n          trigger={\n            <Comment.Author as=\"a\" className=\"light\">\n              {Boolean(system) && 'System'}\n              {nameMap[id] || id}\n            </Comment.Author>\n          }\n        />\n        <Comment.Metadata className=\"dark\">\n          <div>{new Date(timestamp).toLocaleTimeString()}</div>\n        </Comment.Metadata>\n        <Comment.Text className=\"light system\">\n          {cmd && formatMessage(cmd, msg)}\n        </Comment.Text>\n        <Comment.Text className=\"light\">{!cmd && msg}</Comment.Text>\n      </Comment.Content>\n    </Comment>\n  );\n};\n\nclass PickerMenuInner extends React.Component<{\n  addEmoji: (emoji: EmojiData) => void;\n  closeMenu: Function;\n}> {\n  handleClickOutside = () => {\n    this.props.closeMenu();\n  };\n  render() {\n    return (\n      <div style={{ position: 'absolute', bottom: '60px' }}>\n        <Picker\n          set=\"google\"\n          sheetSize={64}\n          theme=\"dark\"\n          showPreview={false}\n          showSkinTones={false}\n          onSelect={this.props.addEmoji}\n        />\n      </div>\n    );\n  }\n}\n\nconst PickerMenu = onClickOutside(PickerMenuInner);\n","import React from 'react';\nimport { Modal, Button, Form, Message } from 'semantic-ui-react';\nimport * as firebase from 'firebase/app';\nimport 'firebase/auth';\n\nexport class LoginModal extends React.Component<{\n  closeLogin: Function;\n}> {\n  public state = { email: '', password: '', isCreateMode: false, error: '' };\n\n  resetPassword = async () => {\n    try {\n      await firebase.auth().sendPasswordResetEmail(this.state.email);\n      this.props.closeLogin();\n    } catch (e) {\n      // handle exceptions\n      this.setState({ error: e.message });\n    }\n  };\n\n  emailSignIn = async (email: string, password: string) => {\n    try {\n      await firebase.auth().signInWithEmailAndPassword(email, password);\n\n      this.props.closeLogin();\n    } catch (e) {\n      // handle exceptions\n      this.setState({ error: e.message });\n    }\n  };\n\n  createAccount = async (email: string, password: string) => {\n    try {\n      await firebase.auth().createUserWithEmailAndPassword(email, password);\n    } catch (e) {\n      // handle exceptions\n      this.setState({ error: e.message });\n    }\n  };\n\n  emailLinkSignIn = async () => {\n    await firebase.auth().sendSignInLinkToEmail(this.state.email, {\n      url: window.location.href,\n      handleCodeInApp: true,\n    });\n  };\n\n  render() {\n    const { closeLogin } = this.props;\n    return (\n      <Modal open={true} onClose={closeLogin as any}>\n        <Modal.Header>\n          {this.state.isCreateMode ? 'Create an account' : 'Login'}\n        </Modal.Header>\n        <Modal.Content>\n          {this.state.error && (\n            <Message color=\"red\" header=\"Error\" content={this.state.error} />\n          )}\n          <Form>\n            <Form.Field>\n              <label>Email</label>\n              <input\n                placeholder=\"Email\"\n                value={this.state.email}\n                onChange={(e) => this.setState({ email: e.target.value })}\n              />\n            </Form.Field>\n            <Form.Field>\n              <label>Password</label>\n              <input\n                type=\"password\"\n                placeholder=\"Password\"\n                value={this.state.password}\n                onChange={(e) => this.setState({ password: e.target.value })}\n              />\n            </Form.Field>\n            {!this.state.isCreateMode && (\n              <div>\n                Don't have an account?{' '}\n                <button\n                  type=\"button\"\n                  className=\"linkButton\"\n                  onClick={() => this.setState({ isCreateMode: true })}\n                >\n                  Create one.\n                </button>{' '}\n                Forgot your password? Enter your email and{' '}\n                <button\n                  type=\"button\"\n                  className=\"linkButton\"\n                  onClick={this.resetPassword}\n                >\n                  reset it.\n                </button>\n              </div>\n            )}\n            {this.state.isCreateMode ? (\n              <Button\n                type=\"submit\"\n                onClick={() =>\n                  this.createAccount(this.state.email, this.state.password)\n                }\n              >\n                Create\n              </Button>\n            ) : (\n              <Button\n                type=\"submit\"\n                onClick={() =>\n                  this.emailSignIn(this.state.email, this.state.password)\n                }\n              >\n                Login\n              </Button>\n            )}\n          </Form>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import React from 'react';\nimport { Modal, Header, Table, Button, Icon } from 'semantic-ui-react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { SignInButton } from '../TopBar/TopBar';\n\n// Make sure to call `loadStripe` outside of a components render to avoid\n// recreating the `Stripe` object on every render.\nconst stripePromise = process.env.REACT_APP_STRIPE_PUBLIC_KEY\n  ? loadStripe(process.env.REACT_APP_STRIPE_PUBLIC_KEY as string)\n  : null;\n\nexport class SubscribeModal extends React.Component<{\n  closeSubscribe: Function;\n  user?: firebase.User;\n  isSubscriber: boolean;\n}> {\n  onSubscribe = async () => {\n    if (!stripePromise) {\n      console.warn('Stripe integration is not configured, cannot subscribe');\n      return;\n    }\n    const stripe = await stripePromise;\n    const result = await stripe?.redirectToCheckout({\n      lineItems: [\n        {\n          price:\n            process.env.NODE_ENV === 'development'\n              ? 'price_HNGtabCzD5qyfd'\n              : 'price_HNDBoPDI7yYRi9',\n          quantity: 1,\n        },\n      ] as any,\n      mode: 'subscription',\n      successUrl: window.location.href,\n      cancelUrl: window.location.href,\n      customerEmail: this.props.user?.email,\n      clientReferenceId: this.props.user?.uid,\n    } as any);\n    // If `redirectToCheckout` fails due to a browser or network\n    // error, display the localized error message to your customer\n    // using `error.message`.\n    if (result && result.error) {\n      console.error(result.error.message);\n    }\n  };\n  render() {\n    if (this.props.isSubscriber) {\n      this.props.closeSubscribe();\n      return null;\n    }\n    const { closeSubscribe } = this.props;\n    return (\n      <Modal open={true} onClose={closeSubscribe as any}>\n        <Modal.Header>Subscribe to WatchParty Plus</Modal.Header>\n        <Modal.Content image>\n          {/* <Image wrapped size='medium' src='https://react.semantic-ui.com/images/avatar/large/rachel.png' /> */}\n          <Modal.Description>\n            <div>\n              Subscriptions help us maintain the service and build new features!\n              Please consider supporting us if you're enjoying WatchParty.\n            </div>\n            <Header>Features</Header>\n            <Table definition unstackable striped celled>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell />\n                  <Table.HeaderCell>WatchParty Free</Table.HeaderCell>\n                  <Table.HeaderCell>WatchParty Plus</Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n\n              <Table.Body>\n                {/* Priority support */}\n                <Table.Row>\n                  <Table.Cell>\n                    Basic (Synchronized watching, chat, screenshare)\n                  </Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>VBrowser Access</Table.Cell>\n                  <Table.Cell>When capacity allows</Table.Cell>\n                  <Table.Cell>Anytime</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>VBrowser Resolution</Table.Cell>\n                  <Table.Cell>720p</Table.Cell>\n                  <Table.Cell>1080p</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>VBrowser CPU/RAM</Table.Cell>\n                  <Table.Cell>Standard</Table.Cell>\n                  <Table.Cell>Extra</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>VBrowser Session Length</Table.Cell>\n                  <Table.Cell>3 hours</Table.Cell>\n                  <Table.Cell>24 hours</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Number of Permanent Rooms</Table.Cell>\n                  <Table.Cell>1</Table.Cell>\n                  <Table.Cell>20</Table.Cell>\n                </Table.Row>\n                {/* <Table.Row>\n                  <Table.Cell>Max Room Capacity</Table.Cell>\n                  <Table.Cell>20</Table.Cell>\n                  <Table.Cell>100</Table.Cell>\n                </Table.Row> */}\n                <Table.Row>\n                  <Table.Cell>Custom Room URLs</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Discord Subscriber Role (on request)</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Price</Table.Cell>\n                  <Table.Cell>$0 / month</Table.Cell>\n                  <Table.Cell>$5 / month</Table.Cell>\n                </Table.Row>\n              </Table.Body>\n            </Table>\n            <div style={{ textAlign: 'right' }}>\n              {/* if user isn't logged in, provide login prompt */}\n              {this.props.user && this.props.user.email ? (\n                <Button\n                  icon\n                  labelPosition=\"left\"\n                  color=\"blue\"\n                  size=\"large\"\n                  onClick={this.onSubscribe}\n                >\n                  <Icon name=\"cc stripe\" />\n                  Subscribe with Stripe\n                </Button>\n              ) : (\n                <div>\n                  Please sign in to subscribe: <SignInButton user={undefined} />\n                </div>\n              )}\n            </div>\n          </Modal.Description>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import React, { useCallback, useState } from 'react';\nimport { Button, Icon, Popup } from 'semantic-ui-react';\nimport { serverPath } from '../../utils';\nimport { SubscribeModal } from '../Modal/SubscribeModal';\n\nexport const SubscribeButton = ({\n  user,\n  isSubscriber,\n  isCustomer,\n}: {\n  user: firebase.User | undefined;\n  isSubscriber: boolean;\n  isCustomer: boolean;\n}) => {\n  const [isSubscribeModalOpen, setIsSubscribeModalOpen] = useState(false);\n  const onManage = useCallback(async () => {\n    const resp = await window.fetch(serverPath + '/manageSub', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        uid: user?.uid,\n        token: await user?.getIdToken(),\n        return_url: window.location.href,\n      }),\n    });\n    const session = await resp.json();\n    console.log(session);\n    window.location.assign(session.url);\n  }, [user]);\n  return (\n    <>\n      {isSubscribeModalOpen && (\n        <SubscribeModal\n          user={user}\n          isSubscriber={isSubscriber}\n          closeSubscribe={() => setIsSubscribeModalOpen(false)}\n        />\n      )}\n      {!isSubscriber && (\n        <Popup\n          content=\"Subscribe to help support us and enable additional features!\"\n          trigger={\n            <Button\n              fluid\n              color=\"orange\"\n              className=\"toolButton\"\n              icon\n              labelPosition=\"left\"\n              onClick={() => setIsSubscribeModalOpen(true)}\n            >\n              <Icon name=\"plus\" />\n              Subscribe\n            </Button>\n          }\n        />\n      )}\n      {isSubscriber && (\n        <Popup\n          content=\"Manage your subscription\"\n          trigger={\n            <Button\n              fluid\n              color=\"orange\"\n              className=\"toolButton\"\n              icon\n              labelPosition=\"left\"\n              onClick={onManage}\n            >\n              <Icon name=\"wrench\" />\n              Manage\n            </Button>\n          }\n        />\n      )}\n    </>\n  );\n};\n","import React from 'react';\nimport { Modal, Button, Icon, Image } from 'semantic-ui-react';\nimport firebase from 'firebase';\n\nexport class ProfileModal extends React.Component<{\n  close: Function;\n  user: firebase.User;\n  userImage: string | null;\n}> {\n  public state = { resetDisabled: false };\n\n  onSignOut = () => {\n    firebase.auth().signOut();\n    window.location.reload();\n  };\n\n  resetPassword = async () => {\n    try {\n      if (this.props.user.email) {\n        await firebase.auth().sendPasswordResetEmail(this.props.user.email);\n        this.setState({ resetDisabled: true });\n      }\n    } catch (e) {\n      console.warn(e);\n    }\n  };\n\n  render() {\n    const { close, userImage } = this.props;\n    return (\n      <Modal open={true} onClose={close as any}>\n        <Modal.Header>\n          <Image avatar src={userImage} />\n          {this.props.user.email}\n        </Modal.Header>\n        <Modal.Content>\n          <div\n            style={{\n              width: '300px',\n              display: 'flex',\n              alignItems: 'center',\n              flexDirection: 'column',\n              gap: '10px',\n            }}\n          >\n            <Button\n              icon\n              labelPosition=\"left\"\n              fluid\n              href=\"https://gravatar.com\"\n              target=\"_blank\"\n              color=\"blue\"\n            >\n              <Icon name=\"image\" />\n              Edit Gravatar\n            </Button>\n            <Button\n              disabled={this.state.resetDisabled}\n              icon\n              labelPosition=\"left\"\n              fluid\n              color=\"green\"\n              onClick={this.resetPassword}\n            >\n              <Icon name=\"key\" />\n              Reset Password\n            </Button>\n            <Button\n              icon\n              labelPosition=\"left\"\n              onClick={this.onSignOut}\n              color=\"red\"\n              fluid\n            >\n              <Icon name=\"sign out\" />\n              Sign out\n            </Button>\n          </div>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import React from 'react';\nimport { serverPath, colorMappings, getUserImage } from '../../utils';\nimport { Icon, Popup, Button, Dropdown, Image } from 'semantic-ui-react';\nimport * as firebase from 'firebase/app';\nimport 'firebase/auth';\nimport { LoginModal } from '../Modal/LoginModal';\nimport axios from 'axios';\nimport { SubscribeButton } from '../SubscribeButton/SubscribeButton';\nimport { ProfileModal } from '../Modal/ProfileModal';\n\nexport class NewRoomButton extends React.Component<{\n  user: firebase.User | undefined;\n  size?: string;\n  openNewTab?: boolean;\n}> {\n  createRoom = async () => {\n    const uid = this.props.user?.uid;\n    const token = await this.props.user?.getIdToken();\n    const response = await window.fetch(serverPath + '/createRoom', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        uid,\n        token,\n      }),\n    });\n    const data = await response.json();\n    const { name } = data;\n    if (this.props.openNewTab) {\n      window.open('/#' + name);\n    } else {\n      window.location.assign('/#' + name);\n    }\n  };\n  render() {\n    return (\n      <Popup\n        content=\"Create a new room with a random URL that you can share with friends\"\n        trigger={\n          <Button\n            color=\"blue\"\n            size={this.props.size as any}\n            icon\n            labelPosition=\"left\"\n            onClick={this.createRoom}\n            className=\"toolButton\"\n            fluid\n          >\n            <Icon name=\"certificate\" />\n            New Room\n          </Button>\n        }\n      />\n    );\n  }\n}\n\ntype SignInButtonProps = {\n  user: firebase.User | undefined;\n  fluid?: boolean;\n};\n\nexport class SignInButton extends React.Component<SignInButtonProps> {\n  public state = { isLoginOpen: false, isProfileOpen: false, userImage: null };\n\n  async componentDidUpdate(prevProps: SignInButtonProps) {\n    if (!prevProps.user && this.props.user) {\n      this.setState({ userImage: await getUserImage(this.props.user) });\n    }\n  }\n\n  facebookSignIn = async () => {\n    const provider = new firebase.auth.FacebookAuthProvider();\n    await firebase.auth().signInWithPopup(provider);\n  };\n\n  googleSignIn = async () => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    await firebase.auth().signInWithPopup(provider);\n  };\n\n  signOut = () => {\n    firebase.auth().signOut();\n    window.location.reload();\n  };\n\n  render() {\n    if (this.props.user) {\n      return (\n        <div\n          style={{\n            margin: '4px',\n            width: '100px',\n            alignItems: 'center',\n            cursor: 'pointer',\n          }}\n        >\n          <Image\n            avatar\n            src={this.state.userImage}\n            onClick={() => this.setState({ isProfileOpen: true })}\n          />\n          {this.state.isProfileOpen && this.props.user && (\n            <ProfileModal\n              user={this.props.user}\n              userImage={this.state.userImage}\n              close={() => this.setState({ isProfileOpen: false })}\n            />\n          )}\n        </div>\n      );\n    }\n    return (\n      <React.Fragment>\n        {this.state.isLoginOpen && (\n          <LoginModal\n            closeLogin={() => this.setState({ isLoginOpen: false })}\n          />\n        )}\n        <Popup\n          basic\n          content=\"Sign in to set your name and picture, subscribe, or launch VBrowsers\"\n          trigger={\n            <Dropdown\n              style={{ height: '36px' }}\n              icon=\"sign in\"\n              labeled\n              className=\"icon\"\n              button\n              text=\"Sign in\"\n              fluid={this.props.fluid}\n            >\n              <Dropdown.Menu>\n                <Dropdown.Item onClick={this.facebookSignIn}>\n                  <Icon name=\"facebook\" />\n                  Facebook\n                </Dropdown.Item>\n                <Dropdown.Item onClick={this.googleSignIn}>\n                  <Icon name=\"google\" />\n                  Google\n                </Dropdown.Item>\n                <Dropdown.Item\n                  onClick={() => this.setState({ isLoginOpen: true })}\n                >\n                  <Icon name=\"mail\" />\n                  Email\n                </Dropdown.Item>\n              </Dropdown.Menu>\n            </Dropdown>\n          }\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport class ListRoomsButton extends React.Component<{\n  user: firebase.User | undefined;\n}> {\n  public state = { rooms: [] as PermanentRoom[] };\n\n  componentDidMount() {\n    this.refreshRooms();\n  }\n\n  refreshRooms = async () => {\n    if (this.props.user) {\n      const token = await this.props.user.getIdToken();\n      const response = await axios.get(\n        serverPath + `/listRooms?uid=${this.props.user?.uid}&token=${token}`\n      );\n      this.setState({ rooms: response.data });\n    }\n  };\n\n  deleteRoom = async (roomId: string) => {\n    if (this.props.user) {\n      const token = await this.props.user.getIdToken();\n      await axios.delete(\n        serverPath +\n          `/deleteRoom?uid=${this.props.user?.uid}&token=${token}&roomId=${roomId}`\n      );\n      this.setState({\n        rooms: this.state.rooms.filter((room) => room.roomId !== roomId),\n      });\n      this.refreshRooms();\n    }\n  };\n\n  render() {\n    return (\n      <Dropdown\n        style={{ height: '36px' }}\n        icon=\"group\"\n        labeled\n        className=\"icon\"\n        button\n        text=\"My Rooms\"\n        onClick={this.refreshRooms}\n        scrolling\n      >\n        <Dropdown.Menu>\n          {this.state.rooms.length === 0 && (\n            <Dropdown.Item disabled>You have no permanent rooms.</Dropdown.Item>\n          )}\n          {this.state.rooms.map((room: any) => {\n            return (\n              <Dropdown.Item\n                link\n                href={\n                  room.vanity\n                    ? '/r/' + room.vanity\n                    : '/' + room.roomId.replace('/', '#')\n                }\n                onClick={() => {\n                  if (!room.vanity) {\n                    setTimeout(() => window.location.reload(), 100);\n                  }\n                }}\n              >\n                <div style={{ display: 'flex', alignItems: 'center' }}>\n                  {room.vanity\n                    ? `/r/${room.vanity}`\n                    : room.roomId.replace('/', '#')}\n                  <div style={{ marginLeft: 'auto', paddingLeft: '20px' }}>\n                    <Button\n                      icon\n                      onClick={(e: React.MouseEvent) => {\n                        e.stopPropagation();\n                        e.nativeEvent.stopImmediatePropagation();\n                        this.deleteRoom(room.roomId);\n                      }}\n                      color=\"red\"\n                      size=\"mini\"\n                    >\n                      <Icon name=\"trash\" />\n                    </Button>\n                  </div>\n                </div>\n              </Dropdown.Item>\n            );\n          })}\n        </Dropdown.Menu>\n      </Dropdown>\n    );\n  }\n}\n\nexport class TopBar extends React.Component<{\n  user?: firebase.User;\n  hideNewRoom?: boolean;\n  hideSignin?: boolean;\n  hideMyRooms?: boolean;\n  isSubscriber: boolean;\n  isCustomer: boolean;\n}> {\n  render() {\n    const subscribeButton = (\n      <SubscribeButton\n        user={this.props.user}\n        isSubscriber={this.props.isSubscriber ?? false}\n        isCustomer={this.props.isCustomer ?? false}\n      />\n    );\n    return (\n      <React.Fragment>\n        <div\n          style={{\n            display: 'flex',\n            flexWrap: 'wrap',\n            padding: '1em',\n            paddingBottom: '0px',\n          }}\n        >\n          <a href=\"/\" style={{ display: 'flex' }}>\n            <div\n              style={{\n                height: '48px',\n                width: '48px',\n                marginRight: '10px',\n                borderRadius: '50%',\n                position: 'relative',\n                backgroundColor: '#' + colorMappings.blue,\n              }}\n            >\n              <Icon\n                inverted\n                name=\"film\"\n                size=\"large\"\n                style={{\n                  position: 'absolute',\n                  top: 8,\n                  width: '100%',\n                  margin: '0 auto',\n                }}\n              />\n              <Icon\n                inverted\n                name=\"group\"\n                size=\"large\"\n                color=\"green\"\n                style={{\n                  position: 'absolute',\n                  bottom: 8,\n                  width: '100%',\n                  margin: '0 auto',\n                }}\n              />\n            </div>\n            <div\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n              }}\n            >\n              <div\n                style={{\n                  textTransform: 'uppercase',\n                  fontWeight: 700,\n                  color: '#2185d0',\n                  fontSize: '30px',\n                  lineHeight: '30px',\n                }}\n              >\n                Watch\n              </div>\n              <div\n                style={{\n                  textTransform: 'uppercase',\n                  fontWeight: 700,\n                  color: '#21ba45',\n                  fontSize: '30px',\n                  lineHeight: '30px',\n                  marginLeft: 'auto',\n                }}\n              >\n                Party\n              </div>\n            </div>\n          </a>\n          <div\n            style={{\n              display: 'flex',\n              marginLeft: '10px',\n              alignItems: 'center',\n            }}\n          >\n            <a\n              href=\"https://discord.gg/3rYj5HV\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"footerIcon\"\n              title=\"Discord\"\n            >\n              <Icon name=\"discord\" size=\"big\" link />\n            </a>\n            <a\n              href=\"https://github.com/howardchung/watchparty\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"footerIcon\"\n              title=\"GitHub\"\n            >\n              <Icon name=\"github\" size=\"big\" link />\n            </a>\n          </div>\n          <div\n            className=\"mobileStack\"\n            style={{\n              display: 'flex',\n              marginLeft: 'auto',\n              gap: '4px',\n            }}\n          >\n            {!this.props.hideNewRoom && (\n              <NewRoomButton user={this.props.user} openNewTab />\n            )}\n            {!this.props.hideMyRooms && this.props.user && (\n              <ListRoomsButton user={this.props.user} />\n            )}\n            {subscribeButton}\n            {!this.props.hideSignin && <SignInButton user={this.props.user} />}\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n","export const OPCODE = {\n  MOVE: 0x01,\n  SCROLL: 0x02,\n  KEY_DOWN: 0x03,\n  KEY_UP: 0x04,\n} as const;\n","export const EVENT = {\n  // Internal Events\n  CONNECTING: 'CONNECTING',\n  CONNECTED: 'CONNECTED',\n  DISCONNECTED: 'DISCONNECTED',\n  TRACK: 'TRACK',\n  MESSAGE: 'MESSAGE',\n  DATA: 'DATA',\n\n  // Websocket Events\n  SYSTEM: {\n    DISCONNECT: 'system/disconnect',\n  },\n  SIGNAL: {\n    ANSWER: 'signal/answer',\n    PROVIDE: 'signal/provide',\n  },\n  MEMBER: {\n    LIST: 'member/list',\n    CONNECTED: 'member/connected',\n    DISCONNECTED: 'member/disconnected',\n  },\n  CONTROL: {\n    LOCKED: 'control/locked',\n    RELEASE: 'control/release',\n    REQUEST: 'control/request',\n    REQUESTING: 'control/requesting',\n    CLIPBOARD: 'control/clipboard',\n    GIVE: 'control/give',\n  },\n  CHAT: {\n    MESSAGE: 'chat/message',\n    EMOTE: 'chat/emote',\n  },\n  SCREEN: {\n    CONFIGURATIONS: 'screen/configurations',\n    RESOLUTION: 'screen/resolution',\n    SET: 'screen/set',\n  },\n  ADMIN: {\n    BAN: 'admin/ban',\n    KICK: 'admin/kick',\n    LOCK: 'admin/lock',\n    UNLOCK: 'admin/unlock',\n    MUTE: 'admin/mute',\n    UNMUTE: 'admin/unmute',\n    CONTROL: 'admin/control',\n    RELEASE: 'admin/release',\n    GIVE: 'admin/give',\n  },\n} as const;\n\nexport type Events = typeof EVENT;\n\nexport type WebSocketEvents =\n  | SystemEvents\n  | ControlEvents\n  | MemberEvents\n  | SignalEvents\n  | ChatEvents\n  | ScreenEvents\n  | AdminEvents\n  | 'ka';\n\nexport type ControlEvents =\n  | typeof EVENT.CONTROL.LOCKED\n  | typeof EVENT.CONTROL.RELEASE\n  | typeof EVENT.CONTROL.REQUEST\n  | typeof EVENT.CONTROL.GIVE\n  | typeof EVENT.CONTROL.CLIPBOARD;\n\nexport type SystemEvents = typeof EVENT.SYSTEM.DISCONNECT;\nexport type MemberEvents =\n  | typeof EVENT.MEMBER.LIST\n  | typeof EVENT.MEMBER.CONNECTED\n  | typeof EVENT.MEMBER.DISCONNECTED;\nexport type SignalEvents =\n  | typeof EVENT.SIGNAL.ANSWER\n  | typeof EVENT.SIGNAL.PROVIDE;\nexport type ChatEvents = typeof EVENT.CHAT.MESSAGE | typeof EVENT.CHAT.EMOTE;\nexport type ScreenEvents =\n  | typeof EVENT.SCREEN.CONFIGURATIONS\n  | typeof EVENT.SCREEN.RESOLUTION\n  | typeof EVENT.SCREEN.SET;\n\nexport type AdminEvents =\n  | typeof EVENT.ADMIN.BAN\n  | typeof EVENT.ADMIN.KICK\n  | typeof EVENT.ADMIN.LOCK\n  | typeof EVENT.ADMIN.UNLOCK\n  | typeof EVENT.ADMIN.MUTE\n  | typeof EVENT.ADMIN.UNMUTE\n  | typeof EVENT.ADMIN.CONTROL\n  | typeof EVENT.ADMIN.RELEASE\n  | typeof EVENT.ADMIN.GIVE;\n","import EventEmitter from 'eventemitter3';\n\nimport { iceServers } from '../../utils';\nimport { OPCODE } from './data';\nimport { EVENT, WebSocketEvents } from './events';\nimport {\n  SignalProvidePayload,\n  WebSocketMessages,\n  WebSocketPayloads,\n} from './messages';\n\nexport abstract class BaseClient extends EventEmitter<any> {\n  protected _ws?: WebSocket;\n  protected _peer?: RTCPeerConnection;\n  protected _channel?: RTCDataChannel;\n  protected _timeout?: NodeJS.Timeout;\n  protected _displayname?: string;\n  protected _state: RTCIceConnectionState = 'disconnected';\n  protected _id = '';\n\n  get id() {\n    return this._id;\n  }\n\n  get supported() {\n    return (\n      typeof RTCPeerConnection !== 'undefined' &&\n      typeof RTCPeerConnection.prototype.addTransceiver !== 'undefined'\n    );\n  }\n\n  get socketOpen() {\n    return (\n      typeof this._ws !== 'undefined' && this._ws.readyState === WebSocket.OPEN\n    );\n  }\n\n  get peerConnected() {\n    return (\n      typeof this._peer !== 'undefined' &&\n      ['connected', 'checking', 'completed'].includes(this._state)\n    );\n  }\n\n  get connected() {\n    return this.peerConnected && this.socketOpen;\n  }\n\n  public connect(url: string, password: string, displayname: string) {\n    if (this.socketOpen) {\n      this.emit('warn', `attempting to create websocket while connection open`);\n      return;\n    }\n\n    if (!this.supported) {\n      this.onDisconnected(\n        new Error('browser does not support webrtc (RTCPeerConnection missing)')\n      );\n      return;\n    }\n\n    if (displayname === '') {\n      throw new Error('Must add a displayname');\n    }\n\n    this._displayname = displayname;\n    this[EVENT.CONNECTING]();\n\n    try {\n      this._ws = new WebSocket(`${url}ws?password=${password}`);\n      this.emit('debug', `connecting to ${this._ws.url}`);\n      this._ws.onmessage = this.onMessage.bind(this);\n      this._ws.onerror = (event) => this.onError.bind(this);\n      this._ws.onclose = (event) =>\n        this.onDisconnected.bind(this, new Error('websocket closed'));\n      this._timeout = setTimeout(this.onTimeout.bind(this), 15000);\n    } catch (err) {\n      this.onDisconnected(err);\n    }\n  }\n\n  protected disconnect() {\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n\n    if (this.socketOpen) {\n      try {\n        this._ws!.close();\n      } catch (err) {}\n      this._ws = undefined;\n    }\n\n    if (this.peerConnected) {\n      try {\n        this._peer!.close();\n      } catch (err) {}\n      this._peer = undefined;\n    }\n\n    this._state = 'disconnected';\n    this._displayname = undefined;\n    this._id = '';\n  }\n\n  public sendData(\n    event: 'wheel' | 'mousemove',\n    data: { x: number; y: number }\n  ): void;\n  public sendData(\n    event: 'mousedown' | 'mouseup' | 'keydown' | 'keyup',\n    data: { key: number }\n  ): void;\n  public sendData(event: string, data: any) {\n    if (!this.connected) {\n      this.emit('warn', `attempting to send data while disconnected`);\n      return;\n    }\n\n    let buffer: ArrayBuffer;\n    let payload: DataView;\n    switch (event) {\n      case 'mousemove':\n        buffer = new ArrayBuffer(7);\n        payload = new DataView(buffer);\n        payload.setUint8(0, OPCODE.MOVE);\n        payload.setUint16(1, 4, true);\n        payload.setUint16(3, data.x, true);\n        payload.setUint16(5, data.y, true);\n        break;\n      case 'wheel':\n        buffer = new ArrayBuffer(7);\n        payload = new DataView(buffer);\n        payload.setUint8(0, OPCODE.SCROLL);\n        payload.setUint16(1, 4, true);\n        payload.setInt16(3, data.x, true);\n        payload.setInt16(5, data.y, true);\n        break;\n      case 'keydown':\n      case 'mousedown':\n        buffer = new ArrayBuffer(5);\n        payload = new DataView(buffer);\n        payload.setUint8(0, OPCODE.KEY_DOWN);\n        payload.setUint16(1, 1, true);\n        payload.setUint16(3, data.key, true);\n        break;\n      case 'keyup':\n      case 'mouseup':\n        buffer = new ArrayBuffer(5);\n        payload = new DataView(buffer);\n        payload.setUint8(0, OPCODE.KEY_UP);\n        payload.setUint16(1, 1, true);\n        payload.setUint16(3, data.key, true);\n        break;\n      default:\n        this.emit('warn', `unknown data event: ${event}`);\n    }\n\n    // @ts-ignore\n    if (typeof buffer !== 'undefined') {\n      this._channel!.send(buffer);\n    }\n  }\n\n  public sendMessage(event: WebSocketEvents, payload?: WebSocketPayloads) {\n    if (!this.connected) {\n      this.emit('warn', `attempting to send message while disconnected`);\n      return;\n    }\n    this.emit(\n      'debug',\n      `sending event '${event}' ${payload ? `with payload: ` : ''}`,\n      payload\n    );\n    this._ws!.send(JSON.stringify({ event, ...payload }));\n  }\n\n  public createPeer(sdp: string, lite: boolean, servers: string[]) {\n    this.emit('debug', `creating peer`);\n    if (!this.socketOpen) {\n      this.emit(\n        'warn',\n        `attempting to create peer with no websocket: `,\n        this._ws ? `state: ${this._ws.readyState}` : 'no socket'\n      );\n      return;\n    }\n\n    if (this.peerConnected) {\n      this.emit('warn', `attempting to create peer while connected`);\n      return;\n    }\n\n    this._peer = new RTCPeerConnection();\n    if (lite !== true) {\n      this._peer = new RTCPeerConnection({\n        iceServers: servers ? [{ urls: servers }] : iceServers(),\n      });\n    }\n\n    this._peer.onconnectionstatechange = (event) => {\n      this.emit(\n        'debug',\n        `peer connection state changed`,\n        this._peer ? this._peer.connectionState : undefined\n      );\n    };\n\n    this._peer.onsignalingstatechange = (event) => {\n      this.emit(\n        'debug',\n        `peer signaling state changed`,\n        this._peer ? this._peer.signalingState : undefined\n      );\n    };\n\n    this._peer.oniceconnectionstatechange = (event) => {\n      this._state = this._peer!.iceConnectionState;\n\n      this.emit(\n        'debug',\n        `peer ice connection state changed: ${this._peer!.iceConnectionState}`\n      );\n\n      switch (this._state) {\n        case 'checking':\n          if (this._timeout) {\n            clearTimeout(this._timeout);\n          }\n          break;\n        case 'connected':\n          this.onConnected();\n          break;\n        case 'failed':\n          this.onDisconnected(new Error('peer failed'));\n          break;\n        case 'disconnected':\n          this.onDisconnected(new Error('peer disconnected'));\n          break;\n      }\n    };\n\n    this._peer.ontrack = this.onTrack.bind(this);\n    this._peer.addTransceiver('audio', { direction: 'recvonly' });\n    this._peer.addTransceiver('video', { direction: 'recvonly' });\n\n    this._channel = this._peer.createDataChannel('data');\n    this._channel.onerror = this.onError.bind(this);\n    this._channel.onmessage = this.onData.bind(this);\n    this._channel.onclose = this.onDisconnected.bind(\n      this,\n      new Error('peer data channel closed')\n    );\n\n    this._peer.setRemoteDescription({ type: 'offer', sdp });\n    this._peer\n      .createAnswer()\n      .then((d) => {\n        this._peer!.setLocalDescription(d);\n        this._ws!.send(\n          JSON.stringify({\n            event: EVENT.SIGNAL.ANSWER,\n            sdp: d.sdp,\n            displayname: this._displayname,\n          })\n        );\n      })\n      .catch((err) => this.emit('error', err));\n  }\n\n  private onMessage(e: MessageEvent) {\n    const { event, ...payload } = JSON.parse(e.data) as WebSocketMessages;\n\n    this.emit(\n      'debug',\n      `received websocket event ${event} ${payload ? `with payload: ` : ''}`,\n      payload\n    );\n\n    if (event === EVENT.SIGNAL.PROVIDE) {\n      const { sdp, lite, ice, id } = payload as SignalProvidePayload;\n      this._id = id;\n      this.createPeer(sdp, lite, ice);\n      return;\n    }\n\n    // @ts-ignore\n    if (typeof this[event] === 'function') {\n      // @ts-ignore\n      this[event](payload);\n    } else {\n      this[EVENT.MESSAGE](event, payload);\n    }\n  }\n\n  private onData(e: MessageEvent) {\n    this[EVENT.DATA](e.data);\n  }\n\n  private onTrack(event: RTCTrackEvent) {\n    this.emit(\n      'debug',\n      `received ${event.track.kind} track from peer: ${event.track.id}`,\n      event\n    );\n    const stream = event.streams[0];\n    if (!stream) {\n      this.emit(\n        'warn',\n        `no stream provided for track ${event.track.id}(${event.track.label})`\n      );\n      return;\n    }\n    this[EVENT.TRACK](event);\n  }\n\n  private onError(event: Event) {\n    this.emit('error', (event as ErrorEvent).error);\n  }\n\n  private onConnected() {\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n\n    if (!this.connected) {\n      this.emit('warn', `onConnected called while being disconnected`);\n      return;\n    }\n\n    this.emit('debug', `connected`);\n    this[EVENT.CONNECTED]();\n  }\n\n  private onTimeout() {\n    this.emit('debug', `connection timeout`);\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n    this.onDisconnected(new Error('connection timeout'));\n  }\n\n  protected onDisconnected(reason?: Error) {\n    this.disconnect();\n    this.emit('debug', `disconnected:`, reason);\n    this[EVENT.DISCONNECTED](reason);\n  }\n\n  protected [EVENT.MESSAGE](event: string, payload: any) {\n    this.emit('warn', `unhandled websocket event '${event}':`, payload);\n  }\n\n  protected abstract [EVENT.CONNECTING](): void;\n  protected abstract [EVENT.CONNECTED](): void;\n  protected abstract [EVENT.DISCONNECTED](reason?: Error): void;\n  protected abstract [EVENT.TRACK](event: RTCTrackEvent): void;\n  protected abstract [EVENT.DATA](data: any): void;\n}\n","import React from 'react';\n\nimport { EVENT } from './events';\nimport { NekoClient } from '.';\n\n// import { EVENT } from './events';\n\nexport default class VBrowser extends React.Component<{\n  username: string;\n  password: string;\n  hostname: string;\n  controlling: boolean;\n  setLoadingFalse: Function;\n  resolution: string;\n  setResolution: Function;\n  doPlay: Function;\n}> {\n  // private observer = new ResizeObserver(this.onResize);\n  private focused = false;\n  private fullscreen = false;\n  private activeKeys: Set<number> = new Set();\n  private controlling = false;\n  private scroll = 1; // 1 to 10\n  private scroll_invert = true;\n  private width = 1280;\n  private height = 720;\n  private rate = 30;\n  private keepAliveInterval = 0;\n  // private _component = React.createRef<HTMLDivElement>();\n  private _container = React.createRef<HTMLDivElement>();\n  private _overlay = React.createRef<HTMLDivElement>();\n  // private _aspect = React.createRef<HTMLDivElement>();\n  // private _player = React.createRef<HTMLDivElement>();\n  private _video = React.createRef<HTMLVideoElement>();\n  // private _resolution = React.createRef<HTMLDivElement>();\n  private $client: NekoClient = new NekoClient();\n\n  componentDidMount() {\n    this.controlling = this.props.controlling;\n    this.keepAliveInterval = window.setInterval(\n      () => this.$client.sendMessage('ka'),\n      10000\n    );\n\n    this.$client.on(EVENT.CONNECTED, () => {\n      if (this.props.controlling) {\n        this.takeControl();\n      }\n    });\n    this.$client.on(EVENT.DISCONNECTED, () => {\n      this.$client.login(url, this.props.password, this.props.username);\n    });\n    this.$client.on(EVENT.SCREEN.RESOLUTION, (data) => {\n      this.width = data.width;\n      this.height = data.height;\n      this.rate = data.rate;\n      // Update our state with the resolution sent from server\n      this.props.setResolution(`${this.width}x${this.height}@${this.rate}`);\n    });\n    this.$client.on(EVENT.TRACK, (track: MediaStreamTrack, stream) => {\n      // console.log(track, streams);\n      const video = document.getElementById('leftVideo') as HTMLVideoElement;\n      video.src = '';\n      video.srcObject = stream;\n      // Manually play audio for iPhone Safari since this seems to create two separate streams\n      if (stream.getTracks().length === 1 && track.kind === 'audio') {\n        const audio = document.getElementById(\n          'iPhoneAudio'\n        ) as HTMLAudioElement;\n        audio.srcObject = new MediaStream([track]);\n        audio.play();\n      }\n      this.props.doPlay();\n    });\n    this.$client.on(EVENT.CONTROL.CLIPBOARD, this.onClipboardChanged);\n\n    if (process.env.NODE_ENV === 'development') {\n      this.$client.on('debug', (e, data) => console.log(e, data));\n    }\n\n    const url = 'wss://' + this.props.hostname + '/';\n    this.$client.login(url, this.props.password, this.props.username);\n\n    // this._container.current?.addEventListener('resize', this.onResize);\n    // this.onResize();\n\n    // document.addEventListener('fullscreenchange', () => {\n    //   this.onResize();\n    // });\n\n    document.addEventListener('focusin', this.onFocus.bind(this));\n    document.addEventListener('focusout', this.onBlur.bind(this));\n\n    document\n      .getElementById('leftOverlay')\n      ?.addEventListener('wheel', this.onWheel, { passive: false });\n  }\n\n  componentDidUpdate(prevProps: any) {\n    // console.log(this.props.controlling, prevProps.controlling);\n    this.controlling = this.props.controlling;\n    if (this.props.controlling && !prevProps.controlling) {\n      this.takeControl();\n    }\n    if (this.props.resolution !== prevProps.resolution) {\n      this.changeResolution(this.props.resolution);\n    }\n  }\n\n  componentWillUnmount() {\n    window.clearInterval(this.keepAliveInterval);\n    this.$client.removeAllListeners();\n    this.$client.logout();\n  }\n\n  takeControl = () => {\n    if (this.$client.connected) {\n      this.$client.sendMessage(EVENT.ADMIN.CONTROL);\n    } else {\n      this.$client.once(EVENT.CONNECTED, () => {\n        this.$client.sendMessage(EVENT.ADMIN.CONTROL);\n      });\n    }\n  };\n\n  changeResolution = (resString: string) => {\n    const split = resString.split(/x|@/);\n    const width = Number(split[0]);\n    const height = Number(split[1]);\n    const rate = Number(split[2]);\n    this.$client.sendMessage(EVENT.SCREEN.SET, { width, height, rate });\n  };\n\n  onClipboardChanged(clipboard: string) {\n    if (\n      navigator.clipboard &&\n      typeof navigator.clipboard.writeText === 'function'\n    ) {\n      // Received clipboard contents from vbrowser\n      navigator.clipboard.writeText(clipboard);\n    }\n  }\n  onFocus = async () => {\n    if (\n      this.props.controlling &&\n      navigator.clipboard &&\n      typeof navigator.clipboard.readText === 'function'\n    ) {\n      const text = await navigator.clipboard.readText();\n      // console.log('[FOCUS]', text);\n      // send clipboard contents to vbrowser\n      this.$client.sendMessage(EVENT.CONTROL.CLIPBOARD, { text });\n    }\n  };\n\n  onBlur = () => {\n    if (!this.focused || !this.controlling) {\n      return;\n    }\n\n    this.activeKeys.forEach((key) => {\n      this.$client.sendData('keyup', { key });\n      this.activeKeys.delete(key);\n    });\n  };\n\n  onClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  onContextMenu = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  onMousePos = (e: MouseEvent | React.MouseEvent) => {\n    const { w, h } = { w: this.width, h: this.height };\n    const rect = this._overlay.current!.getBoundingClientRect();\n    this.$client.sendData('mousemove', {\n      x: Math.round((w / rect.width) * (e.clientX - rect.left)),\n      y: Math.round((h / rect.height) * (e.clientY - rect.top)),\n    });\n  };\n\n  onWheel = (e: WheelEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.controlling) {\n      return;\n    }\n    this.onMousePos(e);\n\n    let x = e.deltaX;\n    let y = e.deltaY;\n\n    if (this.scroll_invert) {\n      x = x * -1;\n      y = y * -1;\n    }\n\n    x = Math.min(Math.max(x, -this.scroll), this.scroll);\n    y = Math.min(Math.max(y, -this.scroll), this.scroll);\n\n    this.$client.sendData('wheel', { x, y });\n  };\n\n  onMouseDown = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.controlling) {\n      return;\n    }\n    this.onMousePos(e);\n    this.$client.sendData('mousedown', { key: e.button });\n  };\n\n  onMouseUp = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.controlling) {\n      return;\n    }\n    this.onMousePos(e);\n    this.$client.sendData('mouseup', { key: e.button });\n  };\n\n  onMouseMove = (e: React.MouseEvent) => {\n    if (!this.controlling) {\n      return;\n    }\n    this.onMousePos(e);\n  };\n\n  onMouseEnter = (e: React.MouseEvent) => {\n    if (!this.controlling) {\n      return;\n    }\n    this._overlay.current!.focus();\n    this.onFocus();\n    this.focused = true;\n  };\n\n  onMouseLeave = (e: React.MouseEvent) => {\n    if (!this.controlling) {\n      return;\n    }\n    this._overlay.current!.blur();\n    this.focused = false;\n  };\n\n  // frick you firefox\n  getCode = (e: React.KeyboardEvent): number => {\n    let key = e.keyCode;\n    if (key === 59 && (e.key === ';' || e.key === ':')) {\n      key = 186;\n    }\n\n    if (key === 61 && (e.key === '=' || e.key === '+')) {\n      key = 187;\n    }\n\n    if (key === 173 && (e.key === '-' || e.key === '_')) {\n      key = 189;\n    }\n\n    return key;\n  };\n\n  onKeyDown = (e: React.KeyboardEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.focused || !this.controlling) {\n      return;\n    }\n\n    let key = this.getCode(e);\n    this.$client.sendData('keydown', { key });\n    this.activeKeys.add(key);\n  };\n\n  onKeyUp = (e: React.KeyboardEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.focused || !this.controlling) {\n      return;\n    }\n\n    let key = this.getCode(e);\n    this.$client.sendData('keyup', { key });\n    this.activeKeys.delete(key);\n  };\n\n  onResize = () => {\n    // let height = 0;\n    // if (!this.fullscreen) {\n    //   const offsetWidth = this._component.current?.offsetWidth;\n    //   const offsetHeight = this._component.current?.offsetHeight;\n    //   this._player.current!.style.width = `${offsetWidth}px`;\n    //   this._player.current!.style.height = `${offsetHeight}px`;\n    //   height = offsetHeight as number;\n    // } else {\n    //   const offsetHeight = this._player.current?.offsetHeight;\n    //   height = offsetHeight as number;\n    // }\n    // this._container.current!.style.maxWidth = `${\n    //   (this.horizontal / this.vertical) * height\n    // }px`;\n    // this._aspect.current!.style.paddingBottom = `${\n    //   (this.vertical / this.horizontal) * 100\n    // }%`;\n  };\n\n  render() {\n    return (\n      <div\n        id=\"leftVideoParent\"\n        style={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n        }}\n      >\n        <div\n          ref={this._container}\n          style={{ width: '100%', height: 'fit-content', position: 'relative' }}\n        >\n          <video\n            playsInline\n            ref={this._video}\n            id=\"leftVideo\"\n            style={{ width: '100%' }}\n          />\n          <audio id=\"iPhoneAudio\" />\n          <div\n            ref={this._overlay}\n            id={'leftOverlay'}\n            tabIndex={0}\n            style={{\n              width: document.getElementById('leftVideo')?.clientWidth,\n              height: document.getElementById('leftVideo')?.clientHeight,\n              position: 'absolute',\n              top: 0,\n              bottom: 0,\n              // disable firefox scrollbars?\n              scrollbarWidth: 'none',\n            }}\n            onClick={this.onClick}\n            onContextMenu={this.onContextMenu}\n            // onWheel={this.onWheel}\n            onMouseMove={this.onMouseMove}\n            onMouseDown={this.onMouseDown}\n            onMouseUp={this.onMouseUp}\n            onMouseEnter={this.onMouseEnter}\n            onMouseLeave={this.onMouseLeave}\n            onKeyDown={this.onKeyDown}\n            onKeyUp={this.onKeyUp}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import EventEmitter from 'eventemitter3';\n\nimport { BaseClient } from './base';\n//import { Member } from './types';\nimport { EVENT } from './events';\nimport {\n  ControlClipboardPayload,\n  ControlPayload,\n  ControlTargetPayload,\n  DisconnectPayload,\n  ScreenConfigurationsPayload,\n  ScreenResolutionPayload,\n} from './messages';\n\nexport class NekoClient extends BaseClient implements EventEmitter<any> {\n  login(url: string, password: string, displayname: string) {\n    this.connect(url, password, displayname);\n  }\n\n  logout() {\n    this.disconnect();\n  }\n\n  /////////////////////////////\n  // Internal Events\n  /////////////////////////////\n  protected [EVENT.CONNECTING]() {}\n\n  protected [EVENT.CONNECTED]() {\n    this.emit(EVENT.CONNECTED);\n  }\n\n  protected [EVENT.DISCONNECTED](reason?: Error) {\n    console.warn(reason);\n    this.emit(EVENT.DISCONNECTED);\n  }\n\n  protected [EVENT.TRACK](event: RTCTrackEvent) {\n    const { track, streams } = event;\n    this.emit(EVENT.TRACK, track, streams[0]);\n  }\n\n  protected [EVENT.DATA](data: any) {\n    console.log('[DATA]', data);\n  }\n\n  /////////////////////////////\n  // System Events\n  /////////////////////////////\n  protected [EVENT.SYSTEM.DISCONNECT]({ message }: DisconnectPayload) {\n    this.onDisconnected(new Error(message));\n  }\n\n  /////////////////////////////\n  // Control Events\n  /////////////////////////////\n  protected [EVENT.CONTROL.LOCKED]({ id }: ControlPayload) {\n    //this.$accessor.remote.setHost(id);\n    // const member = this.member(id);\n    // if (!member) {\n    //   return;\n    // }\n  }\n\n  protected [EVENT.CONTROL.RELEASE]({ id }: ControlPayload) {\n    //this.$accessor.remote.reset();\n    // const member = this.member(id);\n    // if (!member) {\n    //   return;\n    // }\n  }\n\n  protected [EVENT.CONTROL.GIVE]({ id, target }: ControlTargetPayload) {\n    // const member = this.member(target);\n    // if (!member) {\n    //   return;\n    // }\n    //this.$accessor.remote.setHost(member);\n  }\n\n  protected [EVENT.CONTROL.CLIPBOARD]({ text }: ControlClipboardPayload) {\n    this.emit(EVENT.CONTROL.CLIPBOARD, text);\n  }\n\n  /////////////////////////////\n  // Screen Events\n  /////////////////////////////\n  protected [EVENT.SCREEN.CONFIGURATIONS]({\n    configurations,\n  }: ScreenConfigurationsPayload) {\n    // console.log('[CONFIGURATIONS]', configurations);\n    //this.$accessor.video.setConfigurations(configurations);\n  }\n\n  protected [EVENT.SCREEN.RESOLUTION]({\n    id,\n    width,\n    height,\n    rate,\n  }: ScreenResolutionPayload) {\n    this.emit(EVENT.SCREEN.RESOLUTION, { width, height, rate });\n  }\n}\n\nexport { default as VBrowser } from './VBrowser';\n","import React from 'react';\nimport { Button, Icon } from 'semantic-ui-react';\n\nimport {\n  formatTimestamp,\n  getColorForStringHex,\n  getDefaultPicture,\n  iceServers,\n} from '../../utils';\nimport { UserMenu } from '../UserMenu/UserMenu';\n\ninterface VideoChatProps {\n  socket: SocketIOClient.Socket;\n  participants: User[];\n  pictureMap: StringDict;\n  nameMap: StringDict;\n  tsMap: NumberDict;\n  rosterUpdateTS: Number;\n  hide?: boolean;\n  owner: string | undefined;\n  user: firebase.User | undefined;\n}\n\nexport class VideoChat extends React.Component<VideoChatProps> {\n  ourStream?: MediaStream;\n  videoRefs: any = {};\n  videoPCs: PCDict = {};\n  socket = this.props.socket;\n\n  componentDidMount() {\n    this.socket.on('signal', this.handleSignal);\n  }\n\n  componentWillUnmount() {\n    this.socket.off('signal', this.handleSignal);\n  }\n\n  componentDidUpdate(prevProps: VideoChatProps) {\n    if (this.props.rosterUpdateTS !== prevProps.rosterUpdateTS) {\n      this.updateWebRTC();\n    }\n  }\n\n  handleSignal = async (data: any) => {\n    // Handle messages received from signaling server\n    const msg = data.msg;\n    const from = data.from;\n    const pc = this.videoPCs[from];\n    console.log('recv', from, data);\n    if (msg.ice !== undefined) {\n      pc.addIceCandidate(new RTCIceCandidate(msg.ice));\n    } else if (msg.sdp && msg.sdp.type === 'offer') {\n      // console.log('offer');\n      await pc.setRemoteDescription(new RTCSessionDescription(msg.sdp));\n      const answer = await pc.createAnswer();\n      await pc.setLocalDescription(answer);\n      this.sendSignal(from, { sdp: pc.localDescription });\n    } else if (msg.sdp && msg.sdp.type === 'answer') {\n      pc.setRemoteDescription(new RTCSessionDescription(msg.sdp));\n    }\n  };\n\n  setupWebRTC = async () => {\n    // Set up our own video\n    // Create default stream\n    let black = ({ width = 640, height = 480 } = {}) => {\n      let canvas: any = Object.assign(document.createElement('canvas'), {\n        width,\n        height,\n      });\n      canvas.getContext('2d')?.fillRect(0, 0, width, height);\n      let stream = canvas.captureStream();\n      return Object.assign(stream.getVideoTracks()[0], { enabled: false });\n    };\n    let stream = new MediaStream([black()]);\n\n    try {\n      stream = await navigator?.mediaDevices.getUserMedia({\n        audio: true,\n        video: true,\n      });\n    } catch (e) {\n      console.warn(e);\n      try {\n        console.log('attempt audio only stream');\n        stream = await navigator?.mediaDevices?.getUserMedia({\n          audio: true,\n          video: false,\n        });\n      } catch (e) {\n        console.warn(e);\n      }\n    }\n    this.ourStream = stream;\n    // alert server we've joined video chat\n    this.socket.emit('CMD:joinVideo');\n  };\n\n  stopWebRTC = () => {\n    this.ourStream &&\n      this.ourStream.getTracks().forEach((track) => {\n        track.stop();\n      });\n    this.ourStream = undefined;\n    Object.keys(this.videoPCs).forEach((key) => {\n      this.videoPCs[key].close();\n      delete this.videoPCs[key];\n    });\n    this.socket.emit('CMD:leaveVideo');\n  };\n\n  toggleVideoWebRTC = () => {\n    if (this.ourStream && this.ourStream.getVideoTracks()[0]) {\n      this.ourStream.getVideoTracks()[0].enabled = !this.ourStream.getVideoTracks()[0]\n        ?.enabled;\n    }\n    this.forceUpdate();\n  };\n\n  getVideoWebRTC = () => {\n    return this.ourStream && this.ourStream.getVideoTracks()[0]?.enabled;\n  };\n\n  toggleAudioWebRTC = () => {\n    if (this.ourStream && this.ourStream.getAudioTracks()[0]) {\n      this.ourStream.getAudioTracks()[0].enabled = !this.ourStream.getAudioTracks()[0]\n        ?.enabled;\n    }\n    this.forceUpdate();\n  };\n\n  getAudioWebRTC = () => {\n    return (\n      this.ourStream &&\n      this.ourStream.getAudioTracks()[0] &&\n      this.ourStream.getAudioTracks()[0].enabled\n    );\n  };\n\n  updateWebRTC = () => {\n    if (!this.ourStream) {\n      // We haven't started video chat, exit\n      return;\n    }\n    this.props.participants.forEach((user) => {\n      const id = user.id;\n      if (!user.isVideoChat && this.videoPCs[id]) {\n        // User isn't in video chat but we have a connection, close it\n        this.videoPCs[id].close();\n        delete this.videoPCs[id];\n      }\n      if (!user.isVideoChat || this.videoPCs[id]) {\n        // User isn't in video chat, or we already have a connection to them\n        return;\n      }\n      if (id === this.socket.id) {\n        this.videoPCs[id] = new RTCPeerConnection();\n        this.videoRefs[id].srcObject = this.ourStream;\n      } else {\n        const pc = new RTCPeerConnection({ iceServers: iceServers() });\n        this.videoPCs[id] = pc;\n        // Add our own video as outgoing stream\n        this.ourStream?.getTracks().forEach((track) => {\n          if (this.ourStream) {\n            pc.addTrack(track, this.ourStream);\n          }\n        });\n        pc.onicecandidate = (event) => {\n          // We generated an ICE candidate, send it to peer\n          if (event.candidate) {\n            this.sendSignal(id, { ice: event.candidate });\n          }\n        };\n        pc.ontrack = (event: RTCTrackEvent) => {\n          // Mount the stream from peer\n          // console.log(stream);\n          this.videoRefs[id].srcObject = event.streams[0];\n        };\n        // For each pair, have the lexicographically smaller ID be the offerer\n        const isOfferer = this.socket.id < id;\n        if (isOfferer) {\n          pc.onnegotiationneeded = async () => {\n            // Start connection for peer's video\n            const offer = await pc.createOffer();\n            await pc.setLocalDescription(offer);\n            this.sendSignal(id, { sdp: pc.localDescription });\n          };\n        }\n      }\n    });\n  };\n\n  sendSignal = async (to: string, data: any) => {\n    console.log('send', to, data);\n    this.socket.emit('signal', { to, msg: data });\n  };\n\n  render() {\n    const {\n      participants,\n      pictureMap,\n      nameMap,\n      tsMap,\n      socket,\n      owner,\n      user,\n    } = this.props;\n    const videoChatContentStyle = {\n      height: participants.length < 3 ? 220 : 110,\n      borderRadius: '4px',\n      objectFit: 'contain',\n    };\n    return (\n      <div\n        style={{\n          display: this.props.hide ? 'none' : 'flex',\n          width: '100%',\n          flexDirection: 'column',\n          overflow: 'auto',\n        }}\n      >\n        {!this.ourStream && (\n          <div\n            style={{\n              display: 'flex',\n              flexWrap: 'wrap',\n              marginTop: '8px',\n            }}\n          >\n            <Button\n              fluid\n              title=\"Join Video Chat\"\n              color={'purple'}\n              size=\"medium\"\n              icon\n              labelPosition=\"left\"\n              onClick={this.setupWebRTC}\n            >\n              <Icon name=\"video\" />\n              {`Join Video Chat`}\n            </Button>\n          </div>\n        )}\n        {this.ourStream && (\n          <div\n            style={{\n              display: 'flex',\n              flexWrap: 'wrap',\n            }}\n          >\n            <Button\n              fluid\n              color={'red'}\n              size=\"medium\"\n              icon\n              labelPosition=\"left\"\n              onClick={this.stopWebRTC}\n            >\n              <Icon name=\"external\" />\n              {`Leave Video Chat`}\n            </Button>\n            <div\n              style={{\n                display: 'flex',\n                justifyContent: 'center',\n                marginTop: '8px',\n                width: '100%',\n              }}\n            >\n              <Button\n                color={this.getVideoWebRTC() ? 'green' : 'red'}\n                fluid\n                size=\"medium\"\n                icon\n                labelPosition=\"left\"\n                onClick={this.toggleVideoWebRTC}\n              >\n                <Icon name=\"video\" />\n                {this.getVideoWebRTC() ? 'On' : 'Off'}\n              </Button>\n              <Button\n                color={this.getAudioWebRTC() ? 'green' : 'red'}\n                fluid\n                size=\"medium\"\n                icon\n                labelPosition=\"left\"\n                onClick={this.toggleAudioWebRTC}\n              >\n                <Icon\n                  name={\n                    this.getAudioWebRTC() ? 'microphone' : 'microphone slash'\n                  }\n                />\n                {this.getAudioWebRTC() ? 'On' : 'Off'}\n              </Button>\n            </div>\n          </div>\n        )}\n        <div\n          style={{\n            display: 'flex',\n            flexWrap: 'wrap',\n            justifyContent: 'center',\n            marginTop: '8px',\n          }}\n        >\n          {participants.map((p) => {\n            return (\n              <div key={p.id}>\n                <div\n                  style={{\n                    position: 'relative',\n                    //marginLeft: '4px',\n                  }}\n                >\n                  <div>\n                    <UserMenu\n                      displayName={nameMap[p.id] || p.id}\n                      user={user}\n                      disabled={!Boolean(owner && owner === user?.uid)}\n                      position={'left center'}\n                      socket={socket}\n                      userToManage={p.id}\n                      trigger={\n                        <Icon\n                          name=\"ellipsis vertical\"\n                          size=\"large\"\n                          style={{\n                            position: 'absolute',\n                            right: -7,\n                            top: 5,\n                            cursor: 'pointer',\n                            opacity: 0.75,\n                            visibility: Boolean(owner && owner === user?.uid)\n                              ? 'visible'\n                              : 'hidden',\n                          }}\n                        />\n                      }\n                    />\n                    {this.ourStream && p.isVideoChat ? (\n                      <video\n                        ref={(el) => {\n                          this.videoRefs[p.id] = el;\n                        }}\n                        style={{\n                          ...(videoChatContentStyle as any),\n                          // mirror the video if it's our stream. this style mimics Zoom where your\n                          // video is mirrored only for you)\n                          transform: `scaleX(${\n                            p.id === socket.id ? '-1' : '1'\n                          })`,\n                        }}\n                        autoPlay\n                        muted={p.id === socket.id}\n                        data-id={p.id}\n                      />\n                    ) : (\n                      <img\n                        style={videoChatContentStyle as any}\n                        src={\n                          pictureMap[p.id] ||\n                          getDefaultPicture(\n                            nameMap[p.id],\n                            getColorForStringHex(p.id)\n                          )\n                        }\n                        alt=\"\"\n                      />\n                    )}\n                    <div\n                      style={{\n                        position: 'absolute',\n                        bottom: '4px',\n                        left: '0px',\n                        width: '100%',\n                        backgroundColor: 'rgba(0,0,0,0)',\n                        color: 'white',\n                        borderRadius: '4px',\n                        fontSize: '10px',\n                        fontWeight: 700,\n                        display: 'flex',\n                      }}\n                    >\n                      <div\n                        title={nameMap[p.id] || p.id}\n                        style={{\n                          width: '80px',\n                          backdropFilter: 'brightness(80%)',\n                          padding: '4px',\n                          textOverflow: 'ellipsis',\n                          whiteSpace: 'nowrap',\n                          overflow: 'hidden',\n                          display: 'inline-block',\n                        }}\n                      >\n                        {p.isVideoChat && <Icon size=\"small\" name=\"video\" />}\n                        {nameMap[p.id] || p.id}\n                      </div>\n                      <div\n                        style={{\n                          backdropFilter: 'brightness(60%)',\n                          padding: '4px',\n                          flexGrow: 1,\n                          display: 'flex',\n                          justifyContent: 'center',\n                        }}\n                      >\n                        {formatTimestamp(tsMap[p.id] || 0)}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Button, Form, Header, Icon, Modal, TextArea } from 'semantic-ui-react';\n\nexport const SettingsModal = ({ trigger }: any) => (\n  <Modal trigger={trigger} basic closeIcon size=\"small\">\n    <Header icon=\"setting\" content=\"Settings\" />\n    <Modal.Content>\n      <Form>\n        <TextArea rows={10} id=\"settings_textarea\">\n          {window.localStorage.getItem('watchparty-setting') ||\n            JSON.stringify(getDefaultSettings(), null, 2)}\n        </TextArea>\n      </Form>\n    </Modal.Content>\n    <Modal.Actions>\n      <Button\n        color=\"green\"\n        inverted\n        onClick={() => {\n          const newSetting = (document.getElementById(\n            'settings_textarea'\n          ) as HTMLTextAreaElement)!.value;\n          try {\n            validateSettingsString(newSetting);\n            updateSettings(newSetting);\n            window.location.reload();\n          } catch (e) {\n            alert(e);\n          }\n        }}\n      >\n        <Icon name=\"checkmark\" />\n        Save\n      </Button>\n    </Modal.Actions>\n  </Modal>\n);\n\nexport function getDefaultSettings(): Settings {\n  return {};\n}\n\nexport function getCurrentSettings(): Settings {\n  const setting = window.localStorage.getItem('watchparty-setting');\n  try {\n    let settings = validateSettingsString(setting);\n    if (!settings) {\n      return {};\n    }\n    return settings;\n  } catch (e) {\n    console.warn(e);\n    return getDefaultSettings();\n  }\n}\n\n/**\n * Validate a setting string. Return a parsed setting object if valid, otherwise throw exception\n */\nexport function validateSettingsString(\n  setting: string | null\n): Settings | null {\n  // Don't have a setting or invalid value\n  let settingObject: Settings = JSON.parse(setting as any);\n  if (!setting) {\n    return {};\n  }\n  if (setting[0] !== '{') {\n    throw new Error('failed to parse settings, using defaults');\n  }\n  return settingObject;\n}\n\nexport function updateSettings(newSetting: string) {\n  window.localStorage.setItem('watchparty-setting', newSetting);\n}\n","import React from 'react';\nimport { Modal, Loader, List } from 'semantic-ui-react';\n\nexport const MultiStreamModal = ({\n  streams,\n  setMedia,\n  resetMultiSelect,\n}: {\n  streams: any[];\n  setMedia: Function;\n  resetMultiSelect: Function;\n}) => (\n  <Modal inverted basic open closeIcon onClose={resetMultiSelect as any}>\n    <Modal.Header>Select a file</Modal.Header>\n    <Modal.Content>\n      {streams.length === 0 && <Loader />}\n      {streams && (\n        <List inverted>\n          {streams.map((file: any) => (\n            <List.Item>\n              <List.Icon name=\"file\" />\n              <List.Content>\n                <List.Header\n                  as=\"a\"\n                  onClick={() => {\n                    setMedia(null, { value: file.url });\n                    resetMultiSelect();\n                  }}\n                >\n                  {file.name}\n                </List.Header>\n                <List.Description>\n                  {file.length.toLocaleString()} bytes\n                </List.Description>\n              </List.Content>\n            </List.Item>\n          ))}\n        </List>\n      )}\n    </Modal.Content>\n  </Modal>\n);\n","export const examples = [\n  'https://upload.wikimedia.org/wikipedia/commons/a/a5/Spring_-_Blender_Open_Movie.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/8/88/Big_Buck_Bunny_alt.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/7/75/Sintel_movie_720x306.ogv',\n  'https://upload.wikimedia.org/wikipedia/commons/c/cb/Tears_of_Steel_1080p.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/3/36/Cosmos_Laundromat_-_First_Cycle_-_Official_Blender_Foundation_release.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/a/a2/Elephants_Dream_%282006%29.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/a/a9/HERO_-_Blender_Open_Movie-full_movie.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/0/02/Glass_Half_-_Blender_Open_Movie-full_movie.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/d/d0/Caminandes-_Llama_Drama_-_Short_Movie.ogv',\n].map((url) => ({\n  url,\n  type: 'file',\n  name: url,\n  duration: 0,\n}));\n","import React from 'react';\nimport { Button, ButtonGroup, DropdownProps, Icon } from 'semantic-ui-react';\nimport { decodeEntities, formatTimestamp } from '../../utils';\n\nimport classes from './ChatVideoCard.module.css';\n\nconst ChatVideoCard: React.FC<{\n  video: PlaylistVideo;\n  index: number;\n  controls?: boolean;\n  onPlay?: (index: number) => void;\n  onRemove?: (index: number) => void;\n  onPlayNext?: (index: number) => void;\n  onSetMedia?: (e: any, data: DropdownProps) => void;\n  onPlaylistAdd?: (e: any, data: DropdownProps) => void;\n  isYoutube?: boolean;\n  disabled?: boolean;\n}> = (props) => {\n  const {\n    video,\n    index,\n    controls,\n    onPlay,\n    onPlayNext,\n    onRemove,\n    onSetMedia,\n    disabled,\n    onPlaylistAdd,\n    isYoutube,\n  } = props;\n\n  const handlePlayClick = React.useCallback(\n    (e) => {\n      if (onPlay) {\n        onPlay(index);\n      }\n    },\n    [onPlay, index]\n  );\n\n  const handlePlayNextClick = React.useCallback(\n    (e) => {\n      e.stopPropagation();\n      e.nativeEvent.stopImmediatePropagation();\n      if (onPlayNext) {\n        onPlayNext(index);\n      }\n    },\n    [onPlayNext, index]\n  );\n\n  const handleRemoveClick = React.useCallback(\n    (e) => {\n      e.stopPropagation();\n      e.nativeEvent.stopImmediatePropagation();\n      if (onRemove) {\n        onRemove(index);\n      }\n    },\n    [onRemove, index]\n  );\n\n  const Element = 'div';\n\n  return (\n    <Element\n      title={video.name}\n      className={classes.Card}\n      onClick={\n        onSetMedia\n          ? (e) => {\n              onSetMedia(e, { value: video.url });\n            }\n          : undefined\n      }\n    >\n      <div className={classes.Wrapper}>\n        <div className={classes.ThumbnailWrapper}>\n          {!!video.duration && (\n            <div className={classes.DurationLabel}>\n              {formatTimestamp(video.duration)}\n            </div>\n          )}\n          {!!video.img && (\n            <img\n              className={classes.Thumbnail}\n              src={video.img}\n              alt={video.name}\n            />\n          )}\n        </div>\n        <Icon\n          color={isYoutube ? 'red' : 'black'}\n          size=\"large\"\n          name={isYoutube ? 'youtube' : 'linkify'}\n        />\n        <div className={classes.Content}>\n          <div className={classes.Title}>{decodeEntities(video.name)}</div>\n          <div className={classes.ChannelName}>{video.channel}</div>\n        </div>\n        {onPlaylistAdd && (\n          <div className={classes.Controls}>\n            <div style={{ marginLeft: 'auto' }}>\n              <Button\n                className=\"playlistAddButton\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  e.nativeEvent.stopImmediatePropagation();\n                  onPlaylistAdd(e, { value: video.url });\n                }}\n              >\n                Add To Playlist\n              </Button>\n            </div>\n          </div>\n        )}\n        {controls && (\n          <div className={classes.Controls}>\n            <ButtonGroup size=\"mini\">\n              <Button\n                icon\n                color=\"green\"\n                title=\"Play now\"\n                onClick={handlePlayClick}\n                disabled={disabled}\n              >\n                <Icon name=\"play\" />\n              </Button>\n              <Button\n                icon\n                color=\"black\"\n                title=\"Play next\"\n                onClick={handlePlayNextClick}\n                disabled={disabled}\n              >\n                <Icon name=\"arrow up\" />\n              </Button>\n              <Button\n                icon\n                color=\"red\"\n                title=\"Remove\"\n                onClick={handleRemoveClick}\n                disabled={disabled}\n              >\n                <Icon name=\"trash\" />\n              </Button>\n            </ButtonGroup>\n          </div>\n        )}\n      </div>\n    </Element>\n  );\n};\n\nexport default ChatVideoCard;\n","import React from 'react';\nimport { DropdownProps, Menu, Input, Icon, Dropdown } from 'semantic-ui-react';\nimport { debounce, getYouTubeResults } from '../../utils';\nimport { examples } from '../../utils/examples';\nimport ChatVideoCard from '../Playlist/ChatVideoCard';\n\ninterface ComboBoxProps {\n  setMedia: (e: any, data: DropdownProps) => void;\n  playlistAdd: (e: any, data: DropdownProps) => void;\n  playlistMove: (index: number, toIndex: number) => void;\n  playlistDelete: (index: number) => void;\n  currentMedia: string;\n  getMediaDisplayName: Function;\n  launchMultiSelect: Function;\n  mediaPath: string | undefined;\n  streamPath: string | undefined;\n  disabled?: boolean;\n  playlist: PlaylistVideo[];\n}\n\nexport class ComboBox extends React.Component<ComboBoxProps> {\n  state = {\n    inputMedia: undefined as string | undefined,\n    results: undefined,\n    loading: false,\n    lastResultTimestamp: Number(new Date()),\n  };\n  debounced: any = null;\n\n  setMediaAndClose = (e: any, data: DropdownProps) => {\n    window.setTimeout(\n      () => this.setState({ inputMedia: undefined, results: undefined }),\n      300\n    );\n    this.props.setMedia(e, data);\n  };\n\n  doSearch = async (e: any) => {\n    e.persist();\n    this.setState({ inputMedia: e.target.value }, () => {\n      if (!this.debounced) {\n        this.debounced = debounce(async () => {\n          this.setState({ loading: true });\n          const query: string = this.state.inputMedia || '';\n          let timestamp = Number(new Date());\n          let results: JSX.Element[] | undefined = undefined;\n          if (query === '' || (query && query.startsWith('http'))) {\n            let items = examples;\n            if (query) {\n              items = [\n                {\n                  name: query,\n                  type: 'file',\n                  url: query,\n                  duration: 0,\n                },\n              ];\n            }\n            results = items.map((result: SearchResult, index: number) => (\n              <Menu.Item\n                key={result.url}\n                onClick={(e: any) =>\n                  this.setMediaAndClose(e, { value: result.url })\n                }\n              >\n                <ChatVideoCard\n                  video={result}\n                  index={index}\n                  onPlaylistAdd={this.props.playlistAdd}\n                />\n              </Menu.Item>\n            ));\n          } else {\n            const data = await getYouTubeResults(query);\n            results = data.map((result, index) => (\n              <Menu.Item\n                key={result.url}\n                onClick={(e: any) =>\n                  this.setMediaAndClose(e, { value: result.url })\n                }\n              >\n                <ChatVideoCard\n                  video={result}\n                  index={index}\n                  onPlaylistAdd={this.props.playlistAdd}\n                  isYoutube\n                />\n              </Menu.Item>\n            ));\n          }\n          if (timestamp > this.state.lastResultTimestamp) {\n            this.setState({\n              loading: false,\n              results,\n              lastResultTimestamp: timestamp,\n            });\n          }\n        }, 500);\n      }\n      this.debounced();\n    });\n  };\n\n  render() {\n    const { currentMedia, getMediaDisplayName } = this.props;\n    const { results } = this.state;\n    return (\n      <div style={{ position: 'relative' }}>\n        <div style={{ display: 'flex', gap: '4px' }}>\n          <Input\n            style={{ flexGrow: 1 }}\n            inverted\n            fluid\n            focus\n            disabled={this.props.disabled}\n            onChange={this.doSearch}\n            onFocus={(e: any) => {\n              e.persist();\n              this.setState(\n                {\n                  inputMedia: getMediaDisplayName(currentMedia),\n                },\n                () => {\n                  if (\n                    !this.state.inputMedia ||\n                    (this.state.inputMedia &&\n                      this.state.inputMedia.startsWith('http'))\n                  ) {\n                    this.doSearch(e);\n                  }\n                }\n              );\n              setTimeout(() => e.target.select(), 100);\n            }}\n            onBlur={() => {\n              setTimeout(\n                () =>\n                  this.setState({ inputMedia: undefined, results: undefined }),\n                100\n              );\n            }}\n            onKeyPress={(e: any) => {\n              if (e.key === 'Enter') {\n                this.setMediaAndClose(e, {\n                  value: this.state.inputMedia,\n                });\n              }\n            }}\n            icon={\n              <Icon\n                onClick={(e: any) =>\n                  this.setMediaAndClose(e, {\n                    value: this.state.inputMedia,\n                  })\n                }\n                name=\"arrow right\"\n                link\n                circular\n                //bordered\n              />\n            }\n            loading={this.state.loading}\n            label={'Now Watching:'}\n            placeholder=\"Enter video file URL, YouTube link, or YouTube search term\"\n            value={\n              this.state.inputMedia !== undefined\n                ? this.state.inputMedia\n                : getMediaDisplayName(currentMedia)\n            }\n          />\n          <Dropdown\n            icon=\"list\"\n            labeled\n            className=\"icon\"\n            button\n            text={`Playlist (${this.props.playlist.length})`}\n            scrolling\n          >\n            <Dropdown.Menu direction=\"left\">\n              {this.props.playlist.length === 0 && (\n                <Dropdown.Item disabled>\n                  There are no items in the playlist.\n                </Dropdown.Item>\n              )}\n              {this.props.playlist.map((item: PlaylistVideo, index: number) => {\n                return (\n                  <Dropdown.Item>\n                    <div style={{ maxWidth: '500px' }}>\n                      <ChatVideoCard\n                        video={item}\n                        index={index}\n                        controls\n                        onPlay={(index) => {\n                          this.props.setMedia(null, {\n                            value: this.props.playlist[index]?.url,\n                          });\n                          this.props.playlistDelete(index);\n                        }}\n                        onPlayNext={(index) => {\n                          this.props.playlistMove(index, 0);\n                        }}\n                        onRemove={(index) => {\n                          this.props.playlistDelete(index);\n                        }}\n                        disabled={this.props.disabled}\n                        isYoutube={Boolean(item.img)}\n                      />\n                    </div>\n                  </Dropdown.Item>\n                );\n              })}\n            </Dropdown.Menu>\n          </Dropdown>\n        </div>\n        {Boolean(results) && this.state.inputMedia !== undefined && (\n          <Menu\n            fluid\n            vertical\n            style={{\n              position: 'absolute',\n              top: '22px',\n              maxHeight: '250px',\n              overflow: 'scroll',\n              zIndex: 1001,\n            }}\n          >\n            {results}\n          </Menu>\n        )}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Menu, Icon, Label, Button } from 'semantic-ui-react';\nimport { decodeEntities } from '../../utils';\n\nexport const YouTubeSearchResult = (\n  props: SearchResult & { setMedia: Function; playlistAdd: Function }\n) => {\n  const result = props;\n  const setMedia = props.setMedia;\n  return (\n    <Menu.Item\n      onClick={(e) => {\n        setMedia(e, { value: result.url });\n      }}\n    >\n      <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n        <img style={{ height: '50px' }} src={result.img} alt={result.name} />\n        <Icon color=\"red\" size=\"large\" name=\"youtube\" />\n        <div>{decodeEntities(result.name)}</div>\n        <div style={{ marginLeft: 'auto' }}>\n          <Button\n            onClick={(e) => {\n              e.stopPropagation();\n              e.nativeEvent.stopImmediatePropagation();\n              props.playlistAdd(e, { value: result.url });\n            }}\n          >\n            Add To Playlist\n          </Button>\n        </div>\n      </div>\n    </Menu.Item>\n  );\n};\n\nexport const MediaPathSearchResult = (\n  props: SearchResult & { setMedia: Function }\n) => {\n  const result = props;\n  const setMedia = props.setMedia;\n  return (\n    <Menu.Item\n      onClick={(e) => {\n        setMedia(e, { value: result.url });\n      }}\n    >\n      <div style={{ display: 'flex' }}>\n        <Icon name=\"file\" />\n        {result.name}\n      </div>\n    </Menu.Item>\n  );\n};\n\nexport class StreamPathSearchResult extends React.Component<\n  SearchResult & {\n    setMedia: Function;\n    launchMultiSelect: Function;\n    streamPath: string;\n  }\n> {\n  render() {\n    const result = this.props;\n    const setMedia = this.props.setMedia;\n    return (\n      <React.Fragment>\n        <Menu.Item\n          onClick={async (e) => {\n            this.props.launchMultiSelect([]);\n            let response = await window.fetch(\n              this.props.streamPath +\n                '/data?torrent=' +\n                encodeURIComponent(result.magnet!)\n            );\n            let metadata = await response.json();\n            // console.log(metadata);\n            if (\n              metadata.files.filter(\n                (file: any) => file.length > 10 * 1024 * 1024\n              ).length > 1\n            ) {\n              // Multiple large files, present user selection\n              const multiStreamSelection = metadata.files.map(\n                (file: any, i: number) => ({\n                  ...file,\n                  url:\n                    this.props.streamPath +\n                    '/stream?torrent=' +\n                    encodeURIComponent(result.magnet!) +\n                    '&fileIndex=' +\n                    i,\n                })\n              );\n              multiStreamSelection.sort((a: any, b: any) =>\n                a.name.localeCompare(b.name)\n              );\n              this.props.launchMultiSelect(multiStreamSelection);\n            } else {\n              this.props.launchMultiSelect(undefined);\n              setMedia(e, {\n                value:\n                  this.props.streamPath +\n                  '/stream?torrent=' +\n                  encodeURIComponent(result.magnet!),\n              });\n            }\n          }}\n        >\n          <Label\n            circular\n            empty\n            color={Number(result.seeders) ? 'green' : 'red'}\n          />\n          <Icon name=\"film\" />\n          {result.name +\n            ' - ' +\n            result.size +\n            ' - ' +\n            result.seeders +\n            ' peers'}\n        </Menu.Item>\n      </React.Fragment>\n    );\n  }\n}\n","import React from 'react';\nimport {\n  debounce,\n  getYouTubeResults,\n  getMediaPathResults,\n  getStreamPathResults,\n} from '../../utils';\nimport { DropdownProps, Dropdown } from 'semantic-ui-react';\nimport {\n  YouTubeSearchResult,\n  MediaPathSearchResult,\n  StreamPathSearchResult,\n} from '../SearchResult/SearchResult';\n\ninterface SearchComponentProps {\n  setMedia: Function;\n  playlistAdd: Function;\n  type?: 'youtube' | 'media' | 'stream';\n  launchMultiSelect?: Function;\n  mediaPath: string | undefined;\n  streamPath: string | undefined;\n  disabled?: boolean;\n}\n\nexport class SearchComponent extends React.Component<SearchComponentProps> {\n  state = {\n    results: [] as SearchResult[],\n    resetDropdown: Number(new Date()),\n    loading: false,\n    lastResultTimestamp: Number(new Date()),\n    inputMedia: undefined,\n  };\n  debounced: any = null;\n\n  doSearch = async (e: any) => {\n    e.persist();\n    this.setState({ inputMedia: e.target.value }, () => {\n      if (!this.debounced) {\n        this.debounced = debounce(async () => {\n          this.setState({ loading: true });\n          let query = this.state.inputMedia || '';\n          let results: SearchResult[] = [];\n          let timestamp = Number(new Date());\n          if (this.props.type === 'youtube') {\n            results = await getYouTubeResults(query);\n          } else if (this.props.type === 'media' && this.props.mediaPath) {\n            results = await getMediaPathResults(this.props.mediaPath, query);\n          } else if (this.props.type === 'stream' && this.props.streamPath) {\n            results = await getStreamPathResults(this.props.streamPath, query);\n          }\n          if (timestamp > this.state.lastResultTimestamp) {\n            this.setState({\n              loading: false,\n              results,\n              lastResultTimestamp: timestamp,\n            });\n          }\n        }, 500);\n      }\n      this.debounced();\n    });\n  };\n\n  setMedia = (e: any, data: DropdownProps) => {\n    window.setTimeout(\n      () => this.setState({ resetDropdown: Number(new Date()) }),\n      300\n    );\n    this.props.setMedia(e, data);\n  };\n\n  render() {\n    const setMedia = this.setMedia;\n    let placeholder = 'Search streams';\n    let icon = 'film';\n    if (this.props.type === 'youtube') {\n      placeholder = 'Search YouTube';\n      icon = 'youtube';\n    } else if (this.props.type === 'media') {\n      placeholder = this.props.mediaPath || '';\n      icon = 'file';\n    }\n    if (this.state.loading) {\n      icon = 'loading circle notch';\n    }\n    return (\n      <React.Fragment>\n        <Dropdown\n          key={this.state.resetDropdown}\n          fluid\n          style={{ height: '36px' }}\n          button\n          icon={icon}\n          className=\"icon\"\n          labeled\n          disabled={this.props.disabled}\n          search={(() => {}) as any}\n          text={placeholder}\n          onSearchChange={this.doSearch}\n          onFocus={async (e) => {\n            if (this.props.type === 'media' && this.props.mediaPath) {\n              this.doSearch(e);\n            }\n          }}\n          scrolling\n          // onBlur={() => this.setState({ results: this.state.watchOptions })}\n          //searchQuery={this.state.query}\n          //loading={this.state.loading}\n        >\n          {Boolean(this.state.results.length) ? (\n            <Dropdown.Menu>\n              {this.state.results.map((result: SearchResult) => {\n                if (this.props.type === 'youtube') {\n                  return (\n                    <YouTubeSearchResult\n                      key={result.url}\n                      {...result}\n                      setMedia={setMedia}\n                      playlistAdd={this.props.playlistAdd}\n                    />\n                  );\n                } else if (this.props.type === 'media') {\n                  return (\n                    <MediaPathSearchResult\n                      key={result.url}\n                      {...result}\n                      setMedia={setMedia}\n                    />\n                  );\n                }\n                return (\n                  <StreamPathSearchResult\n                    key={result.url}\n                    {...result}\n                    setMedia={setMedia}\n                    launchMultiSelect={this.props.launchMultiSelect as Function}\n                    streamPath={this.props.streamPath || ''}\n                  />\n                );\n              })}\n            </Dropdown.Menu>\n          ) : null}\n        </Dropdown>\n      </React.Fragment>\n    );\n  }\n}\n","import React from 'react';\nimport { Icon, Progress, Label, Popup } from 'semantic-ui-react';\nimport { Slider } from 'react-semantic-ui-range';\nimport { formatTimestamp } from '../../utils';\n\ninterface ControlsProps {\n  duration: number;\n  togglePlay: Function;\n  onSeek: Function;\n  fullScreen: Function;\n  toggleMute: Function;\n  toggleSubtitle: Function;\n  jumpToLeader: Function;\n  paused: boolean;\n  muted: boolean;\n  subtitled: boolean;\n  currentTime: number;\n  getVolume: Function;\n  setVolume: Function;\n  disabled?: boolean;\n  leaderTime?: number;\n  isPauseDisabled?: boolean;\n}\n\n// TODO a lot of this state is currently tied to the per-second tsMap update, which is leading to some UI lag\n// e.g. cc, mute, timestamp\n// play/pause seems to work better since it triggers a server emit\n// Should probably have local state tracking CC/mute/time etc.\nexport class Controls extends React.Component<ControlsProps> {\n  state = {\n    showTimestamp: false,\n    currTimestamp: 0,\n    posTimestamp: 0,\n  };\n\n  onMouseOver = () => {\n    // console.log('mouseover');\n    this.setState({ showTimestamp: true });\n  };\n\n  onMouseOut = () => {\n    // console.log('mouseout');\n    this.setState({ showTimestamp: false });\n  };\n\n  onMouseMove = (e: any) => {\n    const rect = e.target.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const max = rect.width;\n    const pct = x / max;\n    // console.log(x, max);\n    const target = pct * this.props.duration;\n    // console.log(pct);\n    if (pct >= 0) {\n      this.setState({ currTimestamp: target, posTimestamp: pct });\n    }\n  };\n\n  render() {\n    const {\n      togglePlay,\n      onSeek,\n      fullScreen,\n      toggleMute,\n      toggleSubtitle,\n      jumpToLeader,\n      paused,\n      muted,\n      subtitled,\n      currentTime,\n      duration,\n      leaderTime,\n      isPauseDisabled,\n      disabled,\n    } = this.props;\n    const isBehind = leaderTime && leaderTime - currentTime > 5;\n    return (\n      <div className=\"controls\">\n        <Icon\n          size=\"large\"\n          onClick={togglePlay}\n          className=\"control action\"\n          disabled={disabled || isPauseDisabled}\n          name={paused ? 'play' : 'pause'}\n        />\n        <Popup\n          content={\n            (isBehind ? \"We've detected that your stream is behind. \" : '') +\n            'Click to sync to leader.'\n          }\n          trigger={\n            <Icon\n              size=\"large\"\n              onClick={jumpToLeader}\n              className={`control action ${isBehind ? 'glowing' : ''}`}\n              name={'angle double right'}\n            />\n          }\n        />\n        <div className=\"control\">{formatTimestamp(currentTime)}</div>\n        <Progress\n          size=\"tiny\"\n          color=\"blue\"\n          onClick={\n            duration < Infinity && !this.props.disabled ? onSeek : undefined\n          }\n          onMouseOver={this.onMouseOver}\n          onMouseOut={this.onMouseOut}\n          onMouseMove={this.onMouseMove}\n          className=\"control action\"\n          inverted\n          style={{\n            flexGrow: 1,\n            marginTop: 0,\n            marginBottom: 0,\n            position: 'relative',\n            minWidth: '50px',\n          }}\n          value={currentTime}\n          total={duration}\n        >\n          {duration < Infinity && this.state.showTimestamp && (\n            <div\n              style={{\n                position: 'absolute',\n                bottom: '0px',\n                left: `calc(${this.state.posTimestamp * 100 + '% - 27px'})`,\n                pointerEvents: 'none',\n              }}\n            >\n              <Label basic color=\"blue\" pointing=\"below\">\n                <div style={{ width: '34px' }}>\n                  {formatTimestamp(this.state.currTimestamp)}\n                </div>\n              </Label>\n            </div>\n          )}\n        </Progress>\n        <div className=\"control\">{formatTimestamp(duration)}</div>\n        <Icon\n          size=\"large\"\n          onClick={toggleSubtitle}\n          className=\"control action\"\n          name={subtitled ? 'closed captioning' : 'closed captioning outline'}\n          title=\"Captions\"\n        />\n        <Icon\n          size=\"large\"\n          onClick={() => fullScreen(false)}\n          className=\"control action\"\n          style={{ transform: 'rotate(90deg)' }}\n          name=\"window maximize outline\"\n          title=\"Theater Mode\"\n        />\n        <Icon\n          size=\"large\"\n          onClick={() => fullScreen(true)}\n          className=\"control action\"\n          name=\"expand\"\n          title=\"Fullscreen\"\n        />\n        <Icon\n          size=\"large\"\n          onClick={toggleMute}\n          className=\"control action\"\n          name={muted ? 'volume off' : 'volume up'}\n          title=\"Mute\"\n        />\n        <div style={{ width: '100px', marginRight: '10px' }}>\n          <Slider\n            value={this.props.getVolume()}\n            color=\"blue\"\n            settings={{\n              min: 0,\n              max: 1,\n              step: 0.01,\n              onChange: (value: number) => {\n                this.props.setVolume(value);\n              },\n            }}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Modal, Button, Table, Message } from 'semantic-ui-react';\nimport {\n  GoogleReCaptchaProvider,\n  withGoogleReCaptcha,\n} from 'react-google-recaptcha-v3';\nimport { SignInButton } from '../TopBar/TopBar';\nimport { serverPath } from '../../utils';\n\nexport class VBrowserModal extends React.Component<{\n  closeModal: Function;\n  startVBrowser: Function;\n  isSubscriber: Boolean;\n  subscribeButton: JSX.Element;\n  user?: firebase.User;\n}> {\n  state = { isVMPoolFull: false };\n  async componentDidMount() {\n    const resp = await fetch(serverPath + '/metadata');\n    const metadata = await resp.json();\n    if (metadata.isVMPoolFull) {\n      this.setState({ isVMPoolFull: true });\n    }\n  }\n  render() {\n    const { closeModal, startVBrowser } = this.props;\n    const LaunchButton = withGoogleReCaptcha(\n      ({ googleReCaptchaProps, large }: any) => (\n        <Button\n          size=\"large\"\n          color={large ? 'orange' : undefined}\n          onClick={async () => {\n            const rcToken = await (googleReCaptchaProps as any).executeRecaptcha(\n              'launchVBrowser'\n            );\n            startVBrowser(rcToken, { size: large ? 'large' : '' });\n            closeModal();\n          }}\n        >\n          {large ? 'Launch VBrowser+' : 'Continue with Free'}\n        </Button>\n      )\n    );\n    const vmPoolFullMessage = (\n      <Message\n        size=\"small\"\n        color=\"red\"\n        icon=\"hourglass two\"\n        style={{ width: '380px' }}\n        header=\"All Free VBrowsers In Use\"\n        content={\n          <div>\n            <div>All of the free VBrowsers are currently being used.</div>\n            <div>\n              Please consider subscribing for anytime access to faster\n              VBrowsers, or try again later.\n            </div>\n          </div>\n        }\n      />\n    );\n    return (\n      <GoogleReCaptchaProvider\n        reCaptchaKey={process.env.REACT_APP_RECAPTCHA_SITE_KEY as string}\n        useRecaptchaNet\n      >\n        <Modal open={true} onClose={closeModal as any}>\n          <Modal.Header>Launch a VBrowser</Modal.Header>\n          <Modal.Content image>\n            <Modal.Description>\n              <div>\n                You're about to launch a virtual browser to share in this room.\n              </div>\n              <Table definition unstackable striped celled>\n                <Table.Header>\n                  <Table.Row>\n                    <Table.HeaderCell />\n                    <Table.HeaderCell>WatchParty Free</Table.HeaderCell>\n                    <Table.HeaderCell>WatchParty Plus</Table.HeaderCell>\n                  </Table.Row>\n                </Table.Header>\n\n                <Table.Body>\n                  <Table.Row>\n                    <Table.Cell>VBrowser Resolution</Table.Cell>\n                    <Table.Cell>720p</Table.Cell>\n                    <Table.Cell>1080p</Table.Cell>\n                  </Table.Row>\n                  <Table.Row>\n                    <Table.Cell>VBrowser CPU/RAM</Table.Cell>\n                    <Table.Cell>Standard</Table.Cell>\n                    <Table.Cell>Extra</Table.Cell>\n                  </Table.Row>\n                  <Table.Row>\n                    <Table.Cell>VBrowser Session Length</Table.Cell>\n                    <Table.Cell>3 hours</Table.Cell>\n                    <Table.Cell>24 hours</Table.Cell>\n                  </Table.Row>\n                  <Table.Row>\n                    <Table.Cell></Table.Cell>\n                    <Table.Cell>\n                      {this.props.user ? (\n                        this.state.isVMPoolFull ? (\n                          vmPoolFullMessage\n                        ) : (\n                          <LaunchButton />\n                        )\n                      ) : (\n                        <SignInButton fluid user={this.props.user} />\n                      )}\n                    </Table.Cell>\n                    <Table.Cell>\n                      {this.props.isSubscriber ? (\n                        <LaunchButton large />\n                      ) : (\n                        this.props.subscribeButton\n                      )}\n                    </Table.Cell>\n                  </Table.Row>\n                </Table.Body>\n              </Table>\n            </Modal.Description>\n          </Modal.Content>\n        </Modal>\n      </GoogleReCaptchaProvider>\n    );\n  }\n}\n","import React from 'react';\nimport { Modal, Table, Icon } from 'semantic-ui-react';\n\nexport class PermanentRoomModal extends React.Component<{\n  closeModal: Function;\n}> {\n  render() {\n    const { closeModal } = this.props;\n    return (\n      <Modal open={true} onClose={closeModal as any} closeIcon>\n        <Modal.Header>Permanent Rooms</Modal.Header>\n        <Modal.Content image>\n          <Modal.Description>\n            <div>\n              Registered users have the ability to make their rooms permanent.\n              Subscribed users can create multiple permanent rooms.\n            </div>\n            <Table definition unstackable striped celled>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell />\n                  <Table.HeaderCell>Temporary</Table.HeaderCell>\n                  <Table.HeaderCell>Permanent</Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n\n              <Table.Body>\n                <Table.Row>\n                  <Table.Cell>Expiry</Table.Cell>\n                  <Table.Cell>After 24 hours of inactivity</Table.Cell>\n                  <Table.Cell>Never</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Room Passwords</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Disable Chat</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Kick Users</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Custom Room URLs (subscribers)</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                {/* <Table.Row>\n                  <Table.Cell>Max Room Capacity (subscribers)</Table.Cell>\n                    <Table.Cell>20</Table.Cell>\n                    <Table.Cell>100</Table.Cell>\n                  </Table.Row> */}\n              </Table.Body>\n            </Table>\n          </Modal.Description>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import React, { useState, useCallback } from 'react';\nimport {\n  Icon,\n  Divider,\n  Radio,\n  CheckboxProps,\n  Message,\n  Input,\n  Button,\n  Label,\n} from 'semantic-ui-react';\n// import { SignInButton } from '../TopBar/TopBar';\nimport { getCurrentSettings, updateSettings } from './LocalSettings';\nimport axios from 'axios';\nimport { serverPath } from '../../utils';\nimport { PermanentRoomModal } from '../Modal/PermanentRoomModal';\n\ninterface SettingsTabProps {\n  hide: boolean;\n  user: firebase.User | undefined;\n  roomLock: string;\n  setRoomLock: Function;\n  socket: SocketIOClient.Socket;\n  isSubscriber: boolean;\n  roomId: string;\n  owner: string | undefined;\n  setOwner: Function;\n  vanity: string | undefined;\n  setVanity: Function;\n  roomLink: string;\n  password: string | undefined;\n  setPassword: Function;\n  isChatDisabled: boolean;\n  setIsChatDisabled: Function;\n  clearChat: Function;\n}\n\nexport const SettingsTab = ({\n  hide,\n  user,\n  roomLock,\n  setRoomLock,\n  socket,\n  isSubscriber,\n  owner,\n  vanity,\n  setVanity,\n  roomLink,\n  password,\n  setPassword,\n  isChatDisabled,\n  setIsChatDisabled,\n  clearChat,\n}: SettingsTabProps) => {\n  const [updateTS, setUpdateTS] = useState(0);\n  const [permModalOpen, setPermModalOpen] = useState(false);\n  const [validVanity, setValidVanity] = useState(true);\n  const [validVanityLoading, setValidVanityLoading] = useState(false);\n  const [adminSettingsChanged, setAdminSettingsChanged] = useState(false);\n\n  const setRoomState = useCallback(\n    async (data: any) => {\n      const token = await user?.getIdToken();\n      socket.emit('CMD:setRoomState', {\n        uid: user?.uid,\n        token,\n        ...data,\n      });\n    },\n    [socket, user]\n  );\n  const setRoomOwner = useCallback(\n    async (data: any) => {\n      const token = await user?.getIdToken();\n      socket.emit('CMD:setRoomOwner', {\n        uid: user?.uid,\n        token,\n        ...data,\n      });\n    },\n    [socket, user]\n  );\n  const checkValidVanity = useCallback(\n    async (input: string) => {\n      if (!input) {\n        setValidVanity(true);\n        return;\n      }\n      setValidVanity(false);\n      setValidVanityLoading(true);\n      const response = await axios.get(serverPath + '/resolveRoom/' + input);\n      const data = response.data;\n      setValidVanityLoading(false);\n      if (\n        data &&\n        data.vanity &&\n        data.vanity !== roomLink.split('/').slice(-1)[0]\n      ) {\n        // Already exists and doesn't match current room\n        setValidVanity(false);\n      } else {\n        setValidVanity(true);\n      }\n    },\n    [setValidVanity, roomLink]\n  );\n  const lockDisabled =\n    !Boolean(user) || Boolean(roomLock && roomLock !== user?.uid);\n  const permanentDisabled =\n    !Boolean(user) || Boolean(owner && owner !== user?.uid);\n\n  return (\n    <div\n      style={{\n        display: hide ? 'none' : 'block',\n        color: 'white',\n        overflow: 'scroll',\n        padding: '8px',\n      }}\n    >\n      {permModalOpen && (\n        <PermanentRoomModal\n          closeModal={() => setPermModalOpen(false)}\n        ></PermanentRoomModal>\n      )}\n      <div className=\"sectionHeader\">Room Settings</div>\n      {!user && (\n        <Message color=\"yellow\" size=\"tiny\">\n          You need to be signed in to change these settings.\n        </Message>\n      )}\n      <SettingRow\n        icon={roomLock ? 'lock' : 'lock open'}\n        name={`Lock Room`}\n        description=\"Only the person who locked the room can control the video.\"\n        checked={Boolean(roomLock)}\n        disabled={lockDisabled}\n        onChange={(_e, data) => setRoomLock(data.checked)}\n      />\n      {\n        <SettingRow\n          icon={'clock'}\n          name={`Make Room Permanent`}\n          description={\n            'Prevent this room from expiring. This also unlocks additional room features.'\n          }\n          helpIcon={\n            <Icon\n              name=\"help circle\"\n              onClick={() => setPermModalOpen(true)}\n              style={{ cursor: 'pointer' }}\n            ></Icon>\n          }\n          checked={Boolean(owner)}\n          disabled={permanentDisabled}\n          onChange={(_e, data) => setRoomOwner({ undo: !data.checked })}\n        />\n      }\n      {owner && owner === user?.uid && (\n        <div className=\"sectionHeader\">Admin Settings</div>\n      )}\n      {owner && owner === user?.uid && (\n        <SettingRow\n          icon={'key'}\n          name={`Set Room Password`}\n          description=\"Users must know this password in order to join the room.\"\n          content={\n            <Input\n              value={password}\n              size=\"mini\"\n              onChange={(e) => {\n                setAdminSettingsChanged(true);\n                setPassword(e.target.value);\n              }}\n              fluid\n            />\n          }\n          disabled={false}\n        />\n      )}\n      {owner && owner === user?.uid && (\n        <SettingRow\n          icon={'i cursor'}\n          name={`Disable Chat`}\n          description=\"Prevent users from sending messages in chat.\"\n          checked={Boolean(isChatDisabled)}\n          disabled={false}\n          onChange={(_e, data) => {\n            setAdminSettingsChanged(true);\n            setIsChatDisabled(Boolean(data.checked));\n          }}\n        />\n      )}\n      {owner && owner === user?.uid && (\n        <SettingRow\n          icon={'i delete'}\n          name={`Clear Chat`}\n          description=\"Delete all existing chat messages\"\n          disabled={false}\n          content={\n            <Button\n              color=\"red\"\n              icon\n              labelPosition=\"left\"\n              onClick={() => clearChat()}\n            >\n              <Icon name=\"delete\" />\n              Delete Messages\n            </Button>\n          }\n        />\n      )}\n      {owner && owner === user?.uid && (\n        <SettingRow\n          icon={'linkify'}\n          name={`Set Custom Room URL`}\n          description=\"Set a custom URL for this room. Inappropriate names may be revoked.\"\n          checked={Boolean(roomLock)}\n          disabled={!isSubscriber}\n          subOnly={true}\n          content={\n            <React.Fragment>\n              <Input\n                value={vanity}\n                disabled={!isSubscriber}\n                onChange={(e) => {\n                  setAdminSettingsChanged(true);\n                  checkValidVanity(e.target.value);\n                  setVanity(e.target.value);\n                }}\n                label={<Label>{`${window.location.origin}/r/`}</Label>}\n                loading={validVanityLoading}\n                fluid\n                size=\"mini\"\n                icon\n                action={\n                  validVanity ? (\n                    <Icon name=\"checkmark\" color=\"green\" />\n                  ) : (\n                    <Icon name=\"close\" color=\"red\" />\n                  )\n                }\n              ></Input>\n            </React.Fragment>\n          }\n        />\n      )}\n      <p />\n      {owner && owner === user?.uid && (\n        <Button\n          primary\n          disabled={!validVanity || !adminSettingsChanged}\n          labelPosition=\"left\"\n          icon\n          fluid\n          onClick={() => {\n            setRoomState({\n              vanity: vanity,\n              password: password,\n              isChatDisabled: isChatDisabled,\n            });\n            setAdminSettingsChanged(false);\n          }}\n        >\n          <Icon name=\"save\" />\n          Save Admin Settings\n        </Button>\n      )}\n      {/* MEDIA_PATH */}\n      <div className=\"sectionHeader\">Local Settings</div>\n      <SettingRow\n        updateTS={updateTS}\n        icon=\"bell\"\n        name=\"Disable chat notification sound\"\n        description=\"Don't play a sound when a chat message is sent while you're on another tab\"\n        checked={Boolean(getCurrentSettings().disableChatSound)}\n        disabled={false}\n        onChange={(_e, data) => {\n          updateSettings(\n            JSON.stringify({\n              ...getCurrentSettings(),\n              disableChatSound: data.checked,\n            })\n          );\n          setUpdateTS(Number(new Date()));\n        }}\n      />\n    </div>\n  );\n};\n\nconst SettingRow = ({\n  icon,\n  name,\n  description,\n  checked,\n  disabled,\n  onChange,\n  content,\n  subOnly,\n  helpIcon,\n}: {\n  icon: string;\n  name: string;\n  description?: React.ReactNode;\n  checked?: boolean;\n  disabled: boolean;\n  updateTS?: number;\n  onChange?: (e: React.FormEvent, data: CheckboxProps) => void;\n  content?: React.ReactNode;\n  subOnly?: boolean;\n  helpIcon?: React.ReactNode;\n}) => {\n  return (\n    <React.Fragment>\n      <Divider inverted horizontal />\n      <div>\n        <div style={{ display: 'flex' }}>\n          <Icon size=\"large\" name={icon as any} />\n          <div>\n            {name} {helpIcon}\n            {subOnly ? (\n              <Label size=\"mini\" color=\"orange\">\n                Subscriber only\n              </Label>\n            ) : null}\n          </div>\n          {!content && (\n            <Radio\n              style={{ marginLeft: 'auto' }}\n              toggle\n              checked={checked}\n              disabled={disabled}\n              onChange={onChange}\n            />\n          )}\n        </div>\n        <div className=\"smallText\" style={{ marginBottom: '8px' }}>\n          {description}\n        </div>\n        {content}\n      </div>\n    </React.Fragment>\n  );\n};\n","import React from 'react';\nimport { Modal, Header, Button, Icon } from 'semantic-ui-react';\n\nexport const ErrorModal = ({ error }: { error: string }) => {\n  return (\n    <Modal inverted basic open>\n      <Header as=\"h1\" style={{ textAlign: 'center' }}>\n        {error}\n      </Header>\n      <div style={{ display: 'flex', justifyContent: 'center' }}>\n        <Button\n          primary\n          size=\"huge\"\n          onClick={() => {\n            window.location.href = '/';\n          }}\n          icon\n          labelPosition=\"left\"\n        >\n          <Icon name=\"home\" />\n          Go to home page\n        </Button>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useCallback } from 'react';\nimport { Modal, Header, Input, Icon } from 'semantic-ui-react';\n\nexport const PasswordModal = ({\n  savedPasswords,\n  roomId,\n}: {\n  savedPasswords: StringDict;\n  roomId: string;\n}) => {\n  const setPassword = useCallback(() => {\n    window.localStorage.setItem(\n      'watchparty-passwords',\n      JSON.stringify({\n        ...savedPasswords,\n        [roomId]: (document.getElementById('roomPassword') as HTMLInputElement)\n          ?.value,\n      })\n    );\n    window.location.reload();\n  }, [savedPasswords, roomId]);\n  return (\n    <Modal inverted basic open>\n      <Header as=\"h1\" style={{ textAlign: 'center' }}>\n        This room requires a password.\n      </Header>\n      <div style={{ display: 'flex', justifyContent: 'center' }}>\n        <Input\n          id=\"roomPassword\"\n          type=\"password\"\n          size=\"large\"\n          onKeyPress={(e: any) => e.key === 'Enter' && setPassword()}\n          icon={\n            <Icon onClick={setPassword} name=\"key\" inverted circular link />\n          }\n        />\n      </div>\n    </Modal>\n  );\n};\n","import React from 'react';\nimport { Modal, Button } from 'semantic-ui-react';\n\nexport class ScreenShareModal extends React.Component<{\n  closeModal: Function;\n  startScreenShare: Function;\n}> {\n  render() {\n    const { closeModal } = this.props;\n    return (\n      <Modal open={true} onClose={closeModal as any}>\n        <Modal.Header>Share Your Screen</Modal.Header>\n        <Modal.Content image>\n          <Modal.Description>\n            <div>You're about to share your screen.</div>\n            <ul>\n              <li>This feature is only supported on Chrome and Edge.</li>\n              <li>\n                To share audio, you need to check the \"Share audio\" checkbox in\n                the screen selection dialog.\n              </li>\n              <li>\n                Audio sharing is only supported if sharing your entire screen or\n                a browser tab, not an application.\n              </li>\n            </ul>\n            <Button\n              onClick={() => {\n                this.props.startScreenShare();\n                this.props.closeModal();\n              }}\n            >\n              Start Screenshare\n            </Button>\n          </Modal.Description>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import React from 'react';\nimport { Modal, Button } from 'semantic-ui-react';\n\nexport class FileShareModal extends React.Component<{\n  closeModal: Function;\n  startFileShare: Function;\n}> {\n  render() {\n    const { closeModal } = this.props;\n    return (\n      <Modal open={true} onClose={closeModal as any}>\n        <Modal.Header>Share A File</Modal.Header>\n        <Modal.Content image>\n          <Modal.Description>\n            <div>You're about to share a file from your device.</div>\n            <ul>\n              <li>This feature is only supported on Chrome and Edge.</li>\n              <li>\n                To test whether the file can be shared, you can try opening it\n                locally with your browser to see if it will play properly.\n              </li>\n              <li>\n                Certain codecs, such as HEVC, AC3, and H265 will not play in\n                Chrome (they may work in Edge)\n              </li>\n              <li>\n                There is a Chrome issue where the sharer needs to{' '}\n                <a\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                  href=\"https://www.howtogeek.com/412738/how-to-turn-hardware-acceleration-on-and-off-in-chrome/\"\n                >\n                  disable hardware acceleration\n                </a>{' '}\n                in order for others to receive video.\n              </li>\n            </ul>\n            <Button\n              onClick={() => {\n                this.props.startFileShare();\n                this.props.closeModal();\n              }}\n            >\n              Start Fileshare\n            </Button>\n          </Modal.Description>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import './App.css';\n\nimport querystring from 'querystring';\nimport axios from 'axios';\nimport magnet from 'magnet-uri';\nimport React from 'react';\nimport {\n  Button,\n  Dimmer,\n  Dropdown,\n  DropdownProps,\n  Grid,\n  Icon,\n  Input,\n  Loader,\n  Message,\n  Popup,\n  Progress,\n  Menu,\n  Modal,\n} from 'semantic-ui-react';\nimport io from 'socket.io-client';\nimport VTTConverter from 'srt-webvtt';\nimport {\n  formatSpeed,\n  getMediaType,\n  iceServers,\n  isMobile,\n  serverPath,\n  testAutoplay,\n  openFileSelector,\n  getAndSaveClientId,\n  calculateMedian,\n  getUserImage,\n} from '../../utils';\nimport { generateName } from '../../utils/generateName';\nimport { Chat } from '../Chat';\nimport { TopBar } from '../TopBar';\nimport { VBrowser } from '../VBrowser';\nimport { VideoChat } from '../VideoChat';\nimport { getCurrentSettings } from '../Settings';\nimport { MultiStreamModal } from '../Modal/MultiStreamModal';\nimport { ComboBox } from '../ComboBox/ComboBox';\nimport { SearchComponent } from '../SearchComponent/SearchComponent';\nimport { Controls } from '../Controls/Controls';\nimport { VBrowserModal } from '../Modal/VBrowserModal';\nimport { SettingsTab } from '../Settings/SettingsTab';\nimport { ErrorModal } from '../Modal/ErrorModal';\nimport { PasswordModal } from '../Modal/PasswordModal';\nimport { SubscribeButton } from '../SubscribeButton/SubscribeButton';\nimport { ScreenShareModal } from '../Modal/ScreenShareModal';\nimport { FileShareModal } from '../Modal/FileShareModal';\n\ndeclare global {\n  interface Window {\n    onYouTubeIframeAPIReady: any;\n    YT: any;\n    FB: any;\n    fbAsyncInit: Function;\n  }\n}\n\ninterface AppProps {\n  vanity?: string;\n  user?: firebase.User;\n  isSubscriber: boolean;\n  isCustomer: boolean;\n}\n\ninterface AppState {\n  state: 'init' | 'starting' | 'connected';\n  currentMedia: string;\n  currentSubtitle: string;\n  currentMediaPaused: boolean;\n  participants: User[];\n  rosterUpdateTS: Number;\n  chat: ChatMessage[];\n  playlist: PlaylistVideo[];\n  tsMap: NumberDict;\n  nameMap: StringDict;\n  pictureMap: StringDict;\n  myName: string;\n  myPicture: string;\n  loading: boolean;\n  scrollTimestamp: number;\n  fullScreen: boolean;\n  controlsTimestamp: number;\n  watchOptions: SearchResult[];\n  isScreenSharing: boolean;\n  isScreenSharingFile: boolean;\n  isVBrowser: boolean;\n  isYouTubeReady: boolean;\n  isAutoPlayable: boolean;\n  downloaded: number;\n  total: number;\n  speed: number;\n  connections: number;\n  multiStreamSelection?: any[];\n  error: string;\n  isErrorAuth: boolean;\n  settings: Settings;\n  vBrowserResolution: string;\n  isVBrowserLarge: boolean;\n  nonPlayableMedia: boolean;\n  currentTab: string;\n  isSubscribeModalOpen: boolean;\n  isVBrowserModalOpen: boolean;\n  isScreenShareModalOpen: boolean;\n  isFileShareModalOpen: boolean;\n  roomLock: string;\n  controller?: string;\n  savedPasswords: StringDict;\n  roomId: string;\n  errorMessage: string;\n  successMessage: string;\n  isChatDisabled: boolean;\n  showRightBar: boolean;\n  owner: string | undefined;\n  vanity: string | undefined;\n  password: string | undefined;\n  roomLink: string;\n}\n\nexport default class App extends React.Component<AppProps, AppState> {\n  state: AppState = {\n    state: 'starting',\n    currentMedia: '',\n    currentMediaPaused: false,\n    currentSubtitle: '',\n    participants: [],\n    rosterUpdateTS: Number(new Date()),\n    chat: [],\n    playlist: [],\n    tsMap: {},\n    nameMap: {},\n    pictureMap: {},\n    myName: '',\n    myPicture: '',\n    loading: true,\n    scrollTimestamp: 0,\n    fullScreen: false,\n    controlsTimestamp: 0,\n    watchOptions: [],\n    isScreenSharing: false,\n    isScreenSharingFile: false,\n    isVBrowser: false,\n    isYouTubeReady: false,\n    isAutoPlayable: true,\n    downloaded: 0,\n    total: 0,\n    speed: 0,\n    connections: 0,\n    multiStreamSelection: undefined,\n    error: '',\n    isErrorAuth: false,\n    settings: {},\n    vBrowserResolution: '1280x720@30',\n    isVBrowserLarge: false,\n    nonPlayableMedia: false,\n    currentTab:\n      (querystring.parse(window.location.search.substring(1)).tab as string) ||\n      'chat',\n    isSubscribeModalOpen: false,\n    isVBrowserModalOpen: false,\n    isScreenShareModalOpen: false,\n    isFileShareModalOpen: false,\n    roomLock: '',\n    controller: '',\n    roomId: '',\n    savedPasswords: {},\n    errorMessage: '',\n    successMessage: '',\n    isChatDisabled: false,\n    showRightBar: true,\n    owner: undefined,\n    vanity: undefined,\n    password: undefined,\n    roomLink: '',\n  };\n  socket: SocketIOClient.Socket = null as any;\n  watchPartyYTPlayer: any = null;\n  ytDebounce = true;\n  screenShareStream?: MediaStream;\n  screenHostPC: PCDict = {};\n  screenSharePC?: RTCPeerConnection;\n  progressUpdater?: number;\n  heartbeat: number | undefined = undefined;\n\n  async componentDidMount() {\n    document.onfullscreenchange = this.onFullScreenChange;\n    document.onkeydown = this.onKeydown;\n\n    // Send heartbeat to the server\n    this.heartbeat = window.setInterval(() => {\n      window.fetch(serverPath + '/ping');\n    }, 10 * 60 * 1000);\n\n    const canAutoplay = await testAutoplay();\n    this.setState({ isAutoPlayable: canAutoplay });\n    this.loadSettings();\n    this.loadYouTube();\n    this.init();\n  }\n\n  getRoomLink = (vanity: string) => {\n    if (vanity) {\n      return `${window.location.origin}/r/${vanity}`;\n    }\n    return `${window.location.origin}${this.state.roomId.replace('/', '#')}`;\n  };\n\n  handleRoomState = (data: any) => {\n    this.setOwner(data.owner);\n    this.setVanity(data.vanity);\n    this.setPassword(data.password);\n    this.setRoomLink(this.getRoomLink(data.vanity));\n    this.setIsChatDisabled(data.isChatDisabled);\n    window.history.replaceState('', '', this.getRoomLink(data.vanity));\n  };\n\n  componentWillUnmount() {\n    document.removeEventListener('fullscreenchange', this.onFullScreenChange);\n    document.removeEventListener('keydown', this.onKeydown);\n    window.clearInterval(this.heartbeat);\n  }\n\n  componentDidUpdate(prevProps: AppProps) {\n    if (this.props.user && !prevProps.user) {\n      this.loadSignInData();\n    }\n  }\n\n  loadSettings = async () => {\n    // Load settings from localstorage and remote\n    const customSettingsData = await fetch(serverPath + '/settings');\n    const customSettings = await customSettingsData.json();\n    let settings = { ...getCurrentSettings(), ...customSettings };\n    this.setState({ settings });\n  };\n\n  loadSignInData = async () => {\n    const user = this.props.user;\n    if (user && this.socket) {\n      // NOTE: firebase auth doesn't provide the actual first name data that individual providers (G/FB) do\n      // It's accessible at the time the user logs in but not afterward\n      // If we want accurate surname/given name we'll need to save that somewhere\n      const firstName = user.displayName?.split(' ')[0];\n      if (firstName) {\n        this.updateName(null, { value: firstName });\n      }\n      const userImage = await getUserImage(user);\n      if (userImage) {\n        this.updatePicture(userImage);\n      }\n      this.updateUid(user);\n    }\n  };\n\n  loadYouTube = () => {\n    // This code loads the IFrame Player API code asynchronously.\n    const tag = document.createElement('script');\n    tag.src = 'https://www.youtube.com/iframe_api';\n    var firstScriptTag = document.getElementsByTagName('script')[0];\n    firstScriptTag!.parentNode!.insertBefore(tag, firstScriptTag);\n\n    window.onYouTubeIframeAPIReady = () => {\n      // Note: this fails silently if the element is not available\n      const ytPlayer = new window.YT.Player('leftYt', {\n        events: {\n          onReady: () => {\n            this.watchPartyYTPlayer = ytPlayer;\n            this.setState({ isYouTubeReady: true, loading: false });\n            // We might have failed to play YT originally, ask for the current video again\n            if (this.isYouTube()) {\n              this.socket.emit('CMD:askHost');\n            }\n          },\n          onStateChange: (e: any) => {\n            if (\n              getMediaType(this.state.currentMedia) === 'youtube' &&\n              e.data === window.YT?.PlayerState?.CUED\n            ) {\n              this.setState({ loading: false });\n            }\n            if (\n              getMediaType(this.state.currentMedia) === 'youtube' &&\n              e.data === window.YT?.PlayerState?.ENDED\n            ) {\n              this.onVideoEnded();\n            }\n            // console.log(this.ytDebounce, e.data, this.watchPartyYTPlayer?.getVideoUrl());\n            if (\n              this.ytDebounce &&\n              ((e.data === window.YT?.PlayerState?.PLAYING &&\n                this.state.currentMediaPaused) ||\n                (e.data === window.YT?.PlayerState?.PAUSED &&\n                  !this.state.currentMediaPaused))\n            ) {\n              this.ytDebounce = false;\n              if (e.data === window.YT?.PlayerState?.PLAYING) {\n                this.socket.emit('CMD:play');\n                this.doPlay();\n              } else {\n                this.socket.emit('CMD:pause');\n                this.doPause();\n              }\n              window.setTimeout(() => (this.ytDebounce = true), 500);\n            }\n          },\n        },\n      });\n    };\n  };\n\n  setOwner = (owner: string) => {\n    this.setState({ owner });\n  };\n  setVanity = (vanity: string | undefined) => {\n    this.setState({ vanity });\n  };\n  setPassword = (password: string | undefined) => {\n    this.setState({ password });\n  };\n  setRoomLink = (roomLink: string) => {\n    this.setState({ roomLink });\n  };\n\n  init = async () => {\n    // Load room ID from url\n    let roomId = '/default';\n    let query = window.location.hash.substring(1);\n    if (query) {\n      roomId = '/' + query;\n    }\n    // if a vanity name, resolve the url to a room id\n    if (this.props.vanity) {\n      try {\n        const response = await axios.get(\n          serverPath + '/resolveRoom/' + this.props.vanity\n        );\n        if (response.data.roomId) {\n          roomId = response.data.roomId;\n        } else {\n          throw new Error('failed to resolve room name');\n        }\n      } catch (e) {\n        console.error(e);\n        this.setState({ error: \"There's no room with this name.\" });\n        return;\n      }\n    }\n    this.setState({ roomId }, () => {\n      this.join(roomId);\n    });\n  };\n\n  join = async (roomId: string) => {\n    let password = '';\n    try {\n      const savedPasswordsString = window.localStorage.getItem(\n        'watchparty-passwords'\n      );\n      const savedPasswords = JSON.parse(savedPasswordsString || '{}');\n      this.setState({ savedPasswords });\n      password = savedPasswords[roomId] || '';\n    } catch (e) {\n      console.warn('[ALERT] Could not parse saved passwords');\n    }\n    let shard = '';\n    if (/^\\d/.test(roomId.slice(1))) {\n      // Rooms assigned to shards start with a number\n      shard = /^\\d+/.exec(roomId.slice(1))?.[0] ?? '';\n    }\n    const socket = io.connect(serverPath + roomId, {\n      transports: ['websocket'],\n      query: {\n        clientId: getAndSaveClientId(),\n        password,\n        shard,\n      },\n    });\n    this.socket = socket;\n    socket.on('connect', async () => {\n      this.setState({ state: 'connected' });\n      // Load username from localstorage\n      let userName = window.localStorage.getItem('watchparty-username');\n      this.updateName(null, { value: userName || generateName() });\n      this.loadSignInData();\n    });\n    socket.on('error', (err: any) => {\n      console.error(err);\n      if (err === 'Invalid namespace') {\n        this.setState({ error: \"There's no room with this name.\" });\n      } else if (err === 'not authorized') {\n        this.setState({ isErrorAuth: true });\n      } else if (err === 'room full') {\n        this.setState({ error: 'This room is full.' });\n      } else {\n        this.setState({ error: 'An error occurred.' });\n      }\n    });\n    socket.on('errorMessage', (err: string) => {\n      this.setState({ errorMessage: err });\n      setTimeout(() => {\n        this.setState({ errorMessage: '' });\n      }, 3000);\n    });\n    socket.on('successMessage', (success: string) => {\n      this.setState({ successMessage: success });\n      setTimeout(() => {\n        this.setState({ successMessage: '' });\n      }, 3000);\n    });\n    socket.on('kicked', () => {\n      window.location.assign('/');\n    });\n    socket.on('REC:play', () => {\n      this.doPlay();\n    });\n    socket.on('REC:pause', () => {\n      this.doPause();\n    });\n    socket.on('REC:seek', (data: any) => {\n      this.doSeek(data);\n    });\n    socket.on('REC:subtitle', (data: string) => {\n      this.setState(\n        { currentSubtitle: serverPath + '/subtitle/' + data },\n        () => {\n          if (!this.isSubtitled()) {\n            this.toggleSubtitle();\n          }\n        }\n      );\n    });\n    socket.on('REC:changeController', (data: string) => {\n      this.setState({ controller: data });\n    });\n    socket.on('REC:host', async (data: HostState) => {\n      let currentMedia = data.video || '';\n      if (this.isScreenShare() && !currentMedia.startsWith('screenshare://')) {\n        this.stopScreenShare();\n      }\n      if (this.isFileShare() && !currentMedia.startsWith('fileshare://')) {\n        this.stopScreenShare();\n      }\n      if (this.isScreenShare() && currentMedia.startsWith('screenshare://')) {\n        // Ignore, it's probably a reconnection\n        return;\n      }\n      if (this.isFileShare() && currentMedia.startsWith('fileshare://')) {\n        // Ignore, it's probably a reconnection\n        return;\n      }\n      if (this.isVBrowser() && !currentMedia.startsWith('vbrowser://')) {\n        this.stopVBrowser();\n      }\n      this.setState(\n        {\n          currentMedia,\n          currentMediaPaused: data.paused,\n          currentSubtitle: Boolean(data.subtitle)\n            ? serverPath + '/subtitle/' + data.subtitle\n            : '',\n          loading: Boolean(data.video),\n          nonPlayableMedia: false,\n          isVBrowserLarge: data.isVBrowserLarge,\n          vBrowserResolution: data.isVBrowserLarge\n            ? '1920x1080@30'\n            : '1280x720@30',\n          controller: data.controller,\n        },\n        () => {\n          if (\n            this.state.isScreenSharingFile ||\n            (this.isVBrowser() && this.getVBrowserHost())\n          ) {\n            console.log(\n              'skipping REC:host video since fileshare is using leftVideo or this is a vbrowser'\n            );\n            this.setLoadingFalse();\n            return;\n          }\n          // Stop all players\n          const leftVideo = document.getElementById(\n            'leftVideo'\n          ) as HTMLMediaElement;\n          leftVideo?.pause();\n          this.watchPartyYTPlayer?.stopVideo();\n\n          if (this.isYouTube() && !this.watchPartyYTPlayer) {\n            console.log(\n              'YT player not ready, onReady callback will retry when it is'\n            );\n          } else if (this.isVBrowser()) {\n            console.log(\n              'not playing video as this is a vbrowser:// placeholder'\n            );\n          } else {\n            // Start this video\n            this.doSrc(data.video, data.videoTS);\n            if (!data.paused) {\n              this.doPlay();\n            }\n            if (data.subtitle) {\n              if (!this.isSubtitled()) {\n                this.toggleSubtitle();\n              }\n            }\n            // One time, when we're ready to play\n            leftVideo?.addEventListener(\n              'canplay',\n              () => {\n                this.setLoadingFalse();\n                this.jumpToLeader();\n              },\n              { once: true }\n            );\n\n            // Progress updater\n            window.clearInterval(this.progressUpdater);\n            this.setState({ downloaded: 0, total: 0, speed: 0 });\n            if (currentMedia.includes('/stream?torrent=magnet')) {\n              this.progressUpdater = window.setInterval(async () => {\n                const response = await window.fetch(\n                  currentMedia.replace('/stream', '/progress')\n                );\n                const data = await response.json();\n                this.setState({\n                  downloaded: data.downloaded,\n                  total: data.total,\n                  speed: data.speed,\n                  connections: data.connections,\n                });\n              }, 1000);\n            }\n          }\n        }\n      );\n    });\n    socket.on('REC:chat', (data: ChatMessage) => {\n      if (\n        !getCurrentSettings().disableChatSound &&\n        document.visibilityState &&\n        document.visibilityState !== 'visible'\n      ) {\n        new Audio('/clearly.mp3').play();\n      }\n      this.state.chat.push(data);\n      this.setState({\n        chat: this.state.chat,\n        scrollTimestamp: Number(new Date()),\n      });\n    });\n    socket.on('REC:tsMap', (data: NumberDict) => {\n      this.setState({ tsMap: data });\n      this.syncSubtitle();\n    });\n    socket.on('REC:nameMap', (data: StringDict) => {\n      this.setState({ nameMap: data });\n    });\n    socket.on('REC:pictureMap', (data: StringDict) => {\n      this.setState({ pictureMap: data });\n    });\n    socket.on('REC:lock', (data: string) => {\n      this.setState({ roomLock: data });\n    });\n    socket.on('roster', (data: User[]) => {\n      this.setState(\n        { participants: data, rosterUpdateTS: Number(new Date()) },\n        () => {\n          this.updateScreenShare();\n        }\n      );\n    });\n    socket.on('chatinit', (data: ChatMessage[]) => {\n      this.setState({ chat: data, scrollTimestamp: Number(new Date()) });\n    });\n    socket.on('playlist', (data: PlaylistVideo[]) => {\n      this.setState({ playlist: data });\n    });\n    socket.on('signalSS', async (data: any) => {\n      // Handle messages received from signaling server\n      const msg = data.msg;\n      const from = data.from;\n      // Determine whether the message came from the sharer or the sharee\n      const pc = (data.sharer\n        ? this.screenSharePC\n        : this.screenHostPC[from]) as RTCPeerConnection;\n      if (msg.ice !== undefined) {\n        pc.addIceCandidate(new RTCIceCandidate(msg.ice));\n      } else if (msg.sdp && msg.sdp.type === 'offer') {\n        // console.log('offer');\n        // TODO Currently ios/Safari cannot handle this property, so remove it from the offer\n        const _sdp = msg.sdp.sdp\n          .split('\\n')\n          .filter((line: string) => {\n            return line.trim() !== 'a=extmap-allow-mixed';\n          })\n          .join('\\n');\n        msg.sdp.sdp = _sdp;\n        await pc.setRemoteDescription(new RTCSessionDescription(msg.sdp));\n        const answer = await pc.createAnswer();\n        answer.sdp = answer.sdp?.replace(\n          'useinbandfec=1',\n          'useinbandfec=1; stereo=1; maxaveragebitrate=510000'\n        );\n        await pc.setLocalDescription(answer);\n        this.sendSignalSS(from, { sdp: pc.localDescription }, !data.sharer);\n      } else if (msg.sdp && msg.sdp.type === 'answer') {\n        pc.setRemoteDescription(new RTCSessionDescription(msg.sdp));\n      }\n    });\n    socket.on('REC:getRoomState', this.handleRoomState);\n    window.setInterval(() => {\n      if (this.state.currentMedia) {\n        this.socket.emit('CMD:ts', this.getCurrentTime());\n      }\n    }, 1000);\n  };\n\n  setupFileShare = async () => {\n    const files = await openFileSelector();\n    if (!files) {\n      return;\n    }\n    const file = files[0];\n    const leftVideo = document.getElementById('leftVideo') as HTMLMediaElement;\n    leftVideo.srcObject = null;\n    leftVideo.src = URL.createObjectURL(file);\n    leftVideo.play();\n    //@ts-ignore\n    const stream = leftVideo.captureStream ? leftVideo.captureStream() : {};\n    // Can render video to a canvas to resize it, reduce size\n    stream.onaddtrack = () => {\n      console.log(stream, stream.getVideoTracks(), stream.getAudioTracks());\n      if (\n        !this.screenShareStream &&\n        stream.getVideoTracks().length &&\n        stream.getAudioTracks().length\n      ) {\n        stream.getVideoTracks()[0].onended = this.stopScreenShare;\n        this.screenShareStream = stream;\n        this.socket.emit('CMD:joinScreenShare', { file: true });\n        this.setState({ isScreenSharing: true, isScreenSharingFile: true });\n        stream.onaddtrack = undefined;\n      }\n    };\n  };\n\n  setupScreenShare = async () => {\n    //@ts-ignore\n    if (navigator.mediaDevices.getDisplayMedia) {\n      //@ts-ignore\n      const stream = await navigator.mediaDevices.getDisplayMedia({\n        video: { cursor: 'never', height: 720, logicalSurface: true },\n        audio: {\n          autoGainControl: false,\n          channelCount: 2,\n          echoCancellation: false,\n          latency: 0,\n          noiseSuppression: false,\n          sampleRate: 48000,\n          sampleSize: 16,\n          volume: 1.0,\n        },\n      });\n      stream.getVideoTracks()[0].onended = this.stopScreenShare;\n      this.screenShareStream = stream;\n      this.socket.emit('CMD:joinScreenShare');\n      this.setState({ isScreenSharing: true });\n    }\n  };\n\n  stopScreenShare = async () => {\n    this.screenShareStream &&\n      this.screenShareStream.getTracks().forEach((track) => {\n        track.stop();\n      });\n    this.screenShareStream = undefined;\n    if (this.screenSharePC) {\n      this.screenSharePC.close();\n      this.screenSharePC = undefined;\n    }\n    Object.values(this.screenHostPC).forEach((pc) => {\n      pc.close();\n    });\n    this.screenHostPC = {};\n    if (this.state.isScreenSharing) {\n      this.socket.emit('CMD:leaveScreenShare');\n    }\n    this.setState({ isScreenSharing: false, isScreenSharingFile: false });\n  };\n\n  updateScreenShare = async () => {\n    if (!this.isScreenShare() && !this.isFileShare()) {\n      return;\n    }\n    // TODO teardown for those who leave\n    const sharer = this.state.participants.find((p) => p.isScreenShare);\n    if (sharer && sharer.id === this.socket.id) {\n      // We're the sharer, create a connection to each other member\n      this.state.participants.forEach((user) => {\n        const id = user.id;\n        if (id === this.socket.id && this.state.isScreenSharingFile) {\n          // Don't set up a connection to ourselves if sharing file\n          return;\n        }\n        if (!this.screenHostPC[id]) {\n          // Set up the RTCPeerConnection for sharing media to each member\n          const pc = new RTCPeerConnection({ iceServers: iceServers() });\n          this.screenHostPC[id] = pc;\n          this.screenShareStream?.getTracks().forEach((track) => {\n            if (this.screenShareStream != null) {\n              pc.addTrack(track, this.screenShareStream);\n            }\n          });\n          pc.onicecandidate = (event) => {\n            // We generated an ICE candidate, send it to peer\n            if (event.candidate) {\n              this.sendSignalSS(id, { ice: event.candidate }, true);\n            }\n          };\n          pc.onnegotiationneeded = async () => {\n            // Start connection for peer's video\n            const offer = await pc.createOffer();\n            await pc.setLocalDescription(offer);\n            this.sendSignalSS(id, { sdp: pc.localDescription }, true);\n          };\n        }\n      });\n    }\n    // We're a watcher, establish connection to sharer\n    // If screensharing, sharer also does this\n    // If filesharing, sharer does not do this since we use leftVideo\n    if (sharer && !this.screenSharePC && !this.state.isScreenSharingFile) {\n      const pc = new RTCPeerConnection({ iceServers: iceServers() });\n      this.screenSharePC = pc;\n      pc.onicecandidate = (event) => {\n        // We generated an ICE candidate, send it to peer\n        if (event.candidate) {\n          this.sendSignalSS(sharer.id, { ice: event.candidate });\n        }\n      };\n      pc.ontrack = (event: RTCTrackEvent) => {\n        // Mount the stream from peer\n        // console.log(stream);\n        const leftVideo = document.getElementById(\n          'leftVideo'\n        ) as HTMLMediaElement;\n        if (leftVideo) {\n          leftVideo.src = '';\n          leftVideo.srcObject = event.streams[0];\n          this.doPlay();\n        }\n      };\n    }\n  };\n\n  startVBrowser = async (rcToken: string, options: { size: string }) => {\n    // user.uid is the public user identifier\n    // user.getIdToken() is the secret access token we can send to the server to prove identity\n    const user = this.props.user;\n    const uid = user?.uid;\n    const token = await user?.getIdToken();\n    this.socket.emit('CMD:startVBrowser', { options, uid, token, rcToken });\n  };\n\n  stopVBrowser = async () => {\n    this.socket.emit('CMD:stopVBrowser');\n  };\n\n  changeController = async (_e: any, data: DropdownProps) => {\n    // console.log(data);\n    this.socket.emit('CMD:changeController', data.value);\n  };\n\n  setSubtitle = async () => {\n    const files = await openFileSelector('.srt');\n    if (!files) {\n      return;\n    }\n    const file = files[0];\n    const reader = new FileReader();\n    reader.addEventListener('load', (event) => {\n      const subData = event.target?.result;\n      this.socket.emit('CMD:subtitle', subData);\n    });\n    reader.readAsText(file);\n  };\n\n  sendSignalSS = async (to: string, data: any, sharer?: boolean) => {\n    // console.log('sendSS', to, data);\n    this.socket.emit('signalSS', { to, msg: data, sharer });\n  };\n\n  isYouTube = () => {\n    return getMediaType(this.state.currentMedia) === 'youtube';\n  };\n\n  isVideo = () => {\n    return getMediaType(this.state.currentMedia) === 'video';\n  };\n\n  isScreenShare = () => {\n    return this.state.currentMedia.startsWith('screenshare://');\n  };\n\n  isFileShare = () => {\n    return this.state.currentMedia.startsWith('fileshare://');\n  };\n\n  isVBrowser = () => {\n    return this.state.currentMedia.startsWith('vbrowser://');\n  };\n\n  isHttp = () => {\n    return this.state.currentMedia.startsWith('http');\n  };\n\n  getVBrowserPass = () => {\n    return this.state.currentMedia.replace('vbrowser://', '').split('@')[0];\n  };\n\n  getVBrowserHost = () => {\n    return this.state.currentMedia.replace('vbrowser://', '').split('@')[1];\n  };\n\n  getCurrentTime = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return leftVideo?.currentTime;\n    }\n    if (this.isYouTube()) {\n      return this.watchPartyYTPlayer?.getCurrentTime();\n    }\n  };\n\n  getDuration = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return leftVideo.duration;\n    }\n    if (this.isYouTube()) {\n      return this.watchPartyYTPlayer?.getDuration();\n    }\n    return 0;\n  };\n\n  isPauseDisabled = () => {\n    return this.isScreenShare() || this.isVBrowser();\n  };\n\n  isPaused = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return leftVideo.paused || leftVideo.ended;\n    }\n    if (this.isYouTube()) {\n      return (\n        this.watchPartyYTPlayer?.getPlayerState() ===\n          window.YT?.PlayerState?.PAUSED ||\n        this.watchPartyYTPlayer?.getPlayerState() ===\n          window.YT?.PlayerState?.ENDED\n      );\n    }\n    return false;\n  };\n\n  isMuted = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return leftVideo?.muted;\n    }\n    if (this.isYouTube()) {\n      return this.watchPartyYTPlayer?.isMuted();\n    }\n    return false;\n  };\n\n  isSubtitled = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return (\n        leftVideo.textTracks[0] && leftVideo.textTracks[0].mode === 'showing'\n      );\n    }\n    if (this.isYouTube()) {\n      try {\n        const current = this.watchPartyYTPlayer?.getOption('captions', 'track');\n        return Boolean(current && current.languageCode);\n      } catch (e) {\n        console.warn(e);\n        return false;\n      }\n    }\n    return false;\n  };\n\n  jumpToLeader = () => {\n    // Jump to the leader's position\n    const maxTS = this.getLeaderTime();\n    if (maxTS > 0) {\n      console.log('jump to leader at ', maxTS);\n      this.doSeek(maxTS);\n    }\n  };\n\n  doSrc = async (src: string, time: number) => {\n    console.log('doSrc', src, time);\n    if (this.isScreenShare() || this.isFileShare() || this.isVBrowser()) {\n      // No-op as we'll set video when WebRTC completes\n      return;\n    }\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      if (leftVideo) {\n        leftVideo.srcObject = null;\n        leftVideo.src = src;\n        leftVideo.currentTime = time;\n        // Clear subtitles\n        leftVideo.innerHTML = '';\n      }\n    }\n    if (this.isYouTube()) {\n      let url = new window.URL(src);\n      // Standard link https://www.youtube.com/watch?v=ID\n      let videoId = querystring.parse(url.search.substring(1))['v'];\n      // Link shortener https://youtu.be/ID\n      let altVideoId = src.split('/').slice(-1)[0];\n      this.watchPartyYTPlayer?.cueVideoById(videoId || altVideoId, time);\n    }\n  };\n\n  doPlay = async () => {\n    const canAutoplay = this.state.isAutoPlayable || (await testAutoplay());\n    this.setState(\n      { currentMediaPaused: false, isAutoPlayable: canAutoplay },\n      async () => {\n        if (this.isVideo()) {\n          const leftVideo = document.getElementById(\n            'leftVideo'\n          ) as HTMLMediaElement;\n          try {\n            if (this.state.isAutoPlayable) {\n              this.setMute(false);\n            } else {\n              this.setMute(true);\n            }\n            await leftVideo?.play();\n          } catch (e) {\n            console.warn(e);\n            if (e.name === 'NotSupportedError') {\n              this.setState({ loading: false, nonPlayableMedia: true });\n            }\n          }\n        }\n        if (this.isYouTube()) {\n          console.log('play yt');\n          this.watchPartyYTPlayer?.playVideo();\n        }\n      }\n    );\n  };\n\n  doPause = () => {\n    this.setState({ currentMediaPaused: true }, async () => {\n      if (this.isVideo()) {\n        const leftVideo = document.getElementById(\n          'leftVideo'\n        ) as HTMLMediaElement;\n        leftVideo.pause();\n      }\n      if (this.isYouTube()) {\n        console.log('pause');\n        this.watchPartyYTPlayer?.pauseVideo();\n      }\n    });\n  };\n\n  doSeek = (time: number) => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      leftVideo.currentTime = time;\n    }\n    if (this.isYouTube()) {\n      this.watchPartyYTPlayer?.seekTo(time, true);\n    }\n  };\n\n  togglePlay = () => {\n    if (this.isPauseDisabled()) {\n      return;\n    }\n    let shouldPlay = true;\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      shouldPlay = leftVideo.paused || leftVideo.ended;\n    } else if (this.isYouTube()) {\n      shouldPlay =\n        this.watchPartyYTPlayer?.getPlayerState() ===\n          window.YT?.PlayerState.PAUSED ||\n        this.getCurrentTime() === this.getDuration();\n    }\n    if (shouldPlay) {\n      this.socket.emit('CMD:play');\n      this.doPlay();\n    } else {\n      this.socket.emit('CMD:pause');\n      this.doPause();\n    }\n  };\n\n  onSeek = (e: any, time: number) => {\n    let target = time;\n    if (e) {\n      const rect = e.target.getBoundingClientRect();\n      const x = e.clientX - rect.left;\n      const max = rect.width;\n      target = (x / max) * this.getDuration();\n    }\n    target = Math.max(target, 0);\n    this.doSeek(target);\n    this.socket.emit('CMD:seek', target);\n  };\n\n  onFullScreenChange = () => {\n    this.setState({ fullScreen: Boolean(document.fullscreenElement) });\n  };\n\n  onKeydown = (e: any) => {\n    if (!document.activeElement || document.activeElement.tagName === 'BODY') {\n      if (e.key === ' ') {\n        e.preventDefault();\n        this.togglePlay();\n      } else if (e.key === 'ArrowRight') {\n        this.onSeek(null, this.getCurrentTime() + 10);\n      } else if (e.key === 'ArrowLeft') {\n        this.onSeek(null, this.getCurrentTime() - 10);\n      } else if (e.key === 'c') {\n        this.toggleSubtitle();\n      } else if (e.key === 't') {\n        this.fullScreen(false);\n      } else if (e.key === 'f') {\n        this.fullScreen(true);\n      } else if (e.key === 'm') {\n        this.toggleMute();\n      }\n    }\n  };\n\n  fullScreen = async (bVideoOnly: boolean) => {\n    let container = document.getElementById(\n      'fullScreenContainer'\n    ) as HTMLElement;\n    if (bVideoOnly || isMobile()) {\n      if (this.isVBrowser() && !isMobile()) {\n        // Can't really control the VBrowser on mobile anyway, so just fullscreen the video\n        // https://github.com/howardchung/watchparty/issues/208\n        container = document.getElementById('leftVideoParent') as HTMLElement;\n      } else {\n        container = document.getElementById(\n          this.isYouTube() ? 'leftYt' : 'leftVideo'\n        ) as HTMLElement;\n      }\n    }\n    if (\n      !container.requestFullscreen &&\n      (container as any).webkitEnterFullScreen\n    ) {\n      // e.g. iPhone doesn't allow requestFullscreen\n      (container as any).webkitEnterFullscreen();\n      return;\n    }\n    if (!document.fullscreenElement) {\n      await container.requestFullscreen();\n      return;\n    }\n    const bChangeElements = document.fullscreenElement !== container;\n    await document.exitFullscreen();\n    if (bChangeElements) {\n      await container.requestFullscreen();\n    }\n  };\n\n  toggleMute = () => {\n    this.setMute(!this.isMuted());\n  };\n\n  setMute = (muted: boolean) => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      if (leftVideo) {\n        leftVideo.muted = muted;\n      }\n      const audio = document.getElementById('iPhoneAudio') as HTMLAudioElement;\n      if (audio) {\n        audio.muted = muted;\n      }\n    }\n    if (this.isYouTube()) {\n      if (muted) {\n        this.watchPartyYTPlayer?.mute();\n      } else {\n        this.watchPartyYTPlayer?.unMute();\n      }\n    }\n  };\n\n  setVolume = (volume: number) => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      leftVideo.volume = volume;\n    }\n    if (this.isYouTube()) {\n      this.watchPartyYTPlayer?.setVolume(volume * 100);\n    }\n  };\n\n  getVolume = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return leftVideo.volume;\n    }\n    if (this.isYouTube()) {\n      const volume = this.watchPartyYTPlayer?.getVolume();\n      return volume / 100;\n    }\n  };\n\n  loadSubtitles = async () => {\n    const leftVideo = document.getElementById('leftVideo') as HTMLMediaElement;\n    // Clear subtitles\n    leftVideo.innerHTML = '';\n    let subtitleSrc = '';\n    const src = this.state.currentMedia;\n    if (this.state.currentSubtitle) {\n      subtitleSrc = this.state.currentSubtitle;\n    } else if (src.includes('/stream?torrent=magnet')) {\n      subtitleSrc = src.replace('/stream', '/subtitles2');\n    } else if (src.startsWith('http')) {\n      const subtitlePath = src.slice(0, src.lastIndexOf('/') + 1);\n      // Expect subtitle name to be file name + .srt\n      subtitleSrc =\n        subtitlePath + 'subtitles/' + this.getFileName(src) + '.srt';\n    }\n    if (subtitleSrc) {\n      const response = await window.fetch(subtitleSrc);\n      const buffer = await response.arrayBuffer();\n      const vttConverter = new VTTConverter(new Blob([buffer]));\n      const url = await vttConverter.getURL();\n      const track = document.createElement('track');\n      track.kind = 'captions';\n      track.label = 'English';\n      track.srclang = 'en';\n      track.src = url;\n      leftVideo.appendChild(track);\n      leftVideo.textTracks[0].mode = 'showing';\n    }\n  };\n\n  syncSubtitle = () => {\n    const sharer = this.state.participants.find((p) => p.isScreenShare);\n    if (!sharer || sharer.id === this.socket.id) {\n      return;\n    }\n    // When sharing, our timestamp doesn't match the subtitles so adjust them\n    // For each cue, subtract the videoTS of the sharer, then add our own\n    const leftVideo = document.getElementById('leftVideo') as HTMLMediaElement;\n    const track = leftVideo?.textTracks[0];\n    let offset = leftVideo.currentTime - this.state.tsMap[sharer.id];\n    if (track && track.cues && offset) {\n      for (let i = 0; i < track.cues.length; i++) {\n        let cue = track?.cues?.[i];\n        if (!cue) {\n          continue;\n        }\n        // console.log(cue.text, offset, (cue as any).origStart, (cue as any).origEnd);\n        if (!(cue as any).origStart) {\n          (cue as any).origStart = cue.startTime;\n          (cue as any).origEnd = cue.endTime;\n        }\n        cue.startTime = (cue as any).origStart + offset;\n        cue.endTime = (cue as any).origEnd + offset;\n      }\n    }\n  };\n\n  toggleSubtitle = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      if (this.isSubtitled()) {\n        leftVideo.innerHTML = '';\n      } else {\n        this.loadSubtitles();\n      }\n    }\n    if (this.isYouTube()) {\n      const isSubtitled = this.isSubtitled();\n      // console.log(isSubtitled);\n      if (isSubtitled) {\n        // BUG this doesn't actually set the value so subtitles can't be toggled off\n        this.watchPartyYTPlayer?.setOption('captions', 'track', {});\n      } else {\n        this.watchPartyYTPlayer?.setOption('captions', 'reload', true);\n        const tracks = this.watchPartyYTPlayer?.getOption(\n          'captions',\n          'tracklist'\n        );\n        this.watchPartyYTPlayer?.setOption('captions', 'track', tracks?.[0]);\n      }\n    }\n  };\n\n  setMedia = (_e: any, data: DropdownProps) => {\n    this.socket.emit('CMD:host', data.value);\n  };\n\n  playlistAdd = (_e: any, data: DropdownProps) => {\n    this.socket.emit('CMD:playlistAdd', data.value);\n  };\n\n  playlistMove = (index: number, toIndex: number) => {\n    this.socket.emit('CMD:playlistMove', { index, toIndex });\n  };\n\n  playlistDelete = (index: number) => {\n    this.socket.emit('CMD:playlistDelete', index);\n  };\n\n  launchMultiSelect = (data: any) => {\n    this.setState({ multiStreamSelection: data });\n  };\n\n  resetMultiSelect = () => {\n    this.setState({ multiStreamSelection: undefined });\n  };\n\n  updateName = (_e: any, data: { value: string }) => {\n    this.setState({ myName: data.value });\n    this.socket.emit('CMD:name', data.value);\n    window.localStorage.setItem('watchparty-username', data.value);\n  };\n\n  updatePicture = (url: string) => {\n    this.setState({ myPicture: url });\n    this.socket.emit('CMD:picture', url);\n  };\n\n  updateUid = async (user: firebase.User) => {\n    const uid = user.uid;\n    const token = await user.getIdToken();\n    this.socket.emit('CMD:uid', { uid, token });\n  };\n\n  getMediaDisplayName = (input: string) => {\n    if (!input) {\n      return '';\n    }\n    // Show the whole URL for youtube\n    if (getMediaType(input) === 'youtube') {\n      return input;\n    }\n    if (input.startsWith('screenshare://')) {\n      let id = input.slice('screenshare://'.length);\n      return this.state.nameMap[id] + \"'s screen\";\n    }\n    if (input.startsWith('fileshare://')) {\n      let id = input.slice('fileshare://'.length);\n      return this.state.nameMap[id] + \"'s file\";\n    }\n    if (input.startsWith('vbrowser://')) {\n      return 'Virtual Browser' + (this.state.isVBrowserLarge ? '+' : '');\n    }\n    if (input.includes('/stream?torrent=magnet')) {\n      const search = new URL(input).search;\n      const magnetUrl = querystring.parse(search.substring(1))\n        .torrent as string;\n      const magnetParsed = magnet.decode(magnetUrl);\n      return magnetParsed.name;\n    }\n    // Get the filename out of the URL\n    return input;\n  };\n\n  getFileName = (input: string) => {\n    return input.split('/').slice(-1)[0];\n  };\n\n  setLoadingFalse = () => {\n    this.setState({ loading: false });\n  };\n\n  setRoomLock = async (locked: boolean) => {\n    const uid = this.props.user?.uid;\n    const token = await this.props.user?.getIdToken();\n    this.socket.emit('CMD:lock', { uid, token, locked });\n  };\n\n  haveLock = () => {\n    if (!this.state.roomLock) {\n      return true;\n    }\n    return this.props.user?.uid === this.state.roomLock;\n  };\n\n  setIsChatDisabled = (val: boolean) => this.setState({ isChatDisabled: val });\n\n  clearChat = async () => {\n    const uid = this.props.user?.uid;\n    const token = await this.props.user?.getIdToken();\n    this.socket.emit('CMD:clearchat', { uid, token });\n  };\n\n  getLeaderTime = () => {\n    return calculateMedian(Object.values(this.state.tsMap));\n  };\n\n  onVideoEnded = () => {\n    this.socket.emit('CMD:playlistNext', this.state.currentMedia);\n    // Play next\n    if (this.state.currentMedia?.includes('/stream?torrent=magnet')) {\n      const url = new URL(this.state.currentMedia);\n      const fileIndex = url.searchParams.get('fileIndex');\n      if (fileIndex != null) {\n        url.searchParams.set('fileIndex', (Number(fileIndex) + 1).toString());\n        this.setMedia(null, { value: url.toString() });\n      }\n    }\n  };\n\n  render() {\n    const sharer = this.state.participants.find((p) => p.isScreenShare);\n    const controls = (\n      <Controls\n        key={this.state.controlsTimestamp}\n        togglePlay={this.togglePlay}\n        onSeek={this.onSeek}\n        fullScreen={this.fullScreen}\n        toggleMute={this.toggleMute}\n        toggleSubtitle={this.toggleSubtitle}\n        setVolume={this.setVolume}\n        getVolume={this.getVolume}\n        jumpToLeader={this.jumpToLeader}\n        paused={this.isPaused()}\n        muted={this.isMuted()}\n        subtitled={this.isSubtitled()}\n        currentTime={this.getCurrentTime()}\n        duration={this.getDuration()}\n        disabled={!this.haveLock()}\n        leaderTime={this.isHttp() ? this.getLeaderTime() : undefined}\n        isPauseDisabled={this.isPauseDisabled()}\n      />\n    );\n    const subscribeButton = (\n      <SubscribeButton\n        user={this.props.user}\n        isSubscriber={this.props.isSubscriber}\n        isCustomer={this.props.isCustomer}\n      />\n    );\n    const displayRightContent =\n      this.state.showRightBar || this.state.fullScreen;\n    const rightBar = (\n      <Grid.Column\n        width={displayRightContent ? 4 : 1}\n        style={{ display: 'flex', flexDirection: 'column' }}\n        className={`${\n          this.state.fullScreen\n            ? 'fullHeightColumnFullscreen'\n            : 'fullHeightColumn'\n        }`}\n      >\n        <Input\n          inverted\n          fluid\n          label={'My name is:'}\n          value={this.state.myName}\n          onChange={this.updateName}\n          style={{ visibility: displayRightContent ? '' : 'hidden' }}\n          icon={\n            <Icon\n              onClick={() => this.updateName(null, { value: generateName() })}\n              name=\"refresh\"\n              inverted\n              circular\n              link\n            />\n          }\n        />\n        {\n          <Menu\n            inverted\n            widths={3}\n            style={{\n              marginTop: '4px',\n              marginBottom: '4px',\n              visibility: displayRightContent ? '' : 'hidden',\n            }}\n          >\n            <Menu.Item\n              name=\"chat\"\n              active={this.state.currentTab === 'chat'}\n              onClick={() => this.setState({ currentTab: 'chat' })}\n              as=\"a\"\n            >\n              {/* <Icon name=\"conversation\" /> */}\n              Chat\n            </Menu.Item>\n            <Menu.Item\n              name=\"people\"\n              active={this.state.currentTab === 'people'}\n              onClick={() => this.setState({ currentTab: 'people' })}\n              as=\"a\"\n            >\n              {/* <Icon name=\"group\" /> */}\n              People ({this.state.participants.length})\n            </Menu.Item>\n            <Menu.Item\n              name=\"settings\"\n              active={this.state.currentTab === 'settings'}\n              onClick={() => this.setState({ currentTab: 'settings' })}\n              as=\"a\"\n            >\n              {/* <Icon name=\"setting\" /> */}\n              Settings\n            </Menu.Item>\n          </Menu>\n        }\n        <Chat\n          chat={this.state.chat}\n          nameMap={this.state.nameMap}\n          pictureMap={this.state.pictureMap}\n          socket={this.socket}\n          scrollTimestamp={this.state.scrollTimestamp}\n          getMediaDisplayName={this.getMediaDisplayName}\n          hide={this.state.currentTab !== 'chat' || !displayRightContent}\n          isChatDisabled={this.state.isChatDisabled}\n          owner={this.state.owner}\n          user={this.props.user}\n        />\n        {this.state.state === 'connected' && (\n          <VideoChat\n            socket={this.socket}\n            participants={this.state.participants}\n            nameMap={this.state.nameMap}\n            pictureMap={this.state.pictureMap}\n            tsMap={this.state.tsMap}\n            rosterUpdateTS={this.state.rosterUpdateTS}\n            hide={this.state.currentTab !== 'people' || !displayRightContent}\n            owner={this.state.owner}\n            user={this.props.user}\n          />\n        )}\n        <SettingsTab\n          hide={this.state.currentTab !== 'settings' || !displayRightContent}\n          user={this.props.user}\n          roomLock={this.state.roomLock}\n          setRoomLock={this.setRoomLock}\n          socket={this.socket}\n          isSubscriber={this.props.isSubscriber}\n          roomId={this.state.roomId}\n          isChatDisabled={this.state.isChatDisabled}\n          setIsChatDisabled={this.setIsChatDisabled}\n          owner={this.state.owner}\n          setOwner={this.setOwner}\n          vanity={this.state.vanity}\n          setVanity={this.setVanity}\n          roomLink={this.state.roomLink}\n          password={this.state.password}\n          setPassword={this.setPassword}\n          clearChat={this.clearChat}\n        />\n      </Grid.Column>\n    );\n    return (\n      <React.Fragment>\n        {!this.state.isAutoPlayable && (\n          <Modal inverted basic open>\n            <div style={{ display: 'flex', justifyContent: 'center' }}>\n              <Button\n                primary\n                size=\"large\"\n                onClick={() => {\n                  this.setState({ isAutoPlayable: true });\n                  this.setMute(false);\n                }}\n                icon\n                labelPosition=\"left\"\n              >\n                <Icon name=\"volume up\" />\n                Click to unmute\n              </Button>\n            </div>\n          </Modal>\n        )}\n        {this.state.multiStreamSelection && (\n          <MultiStreamModal\n            streams={this.state.multiStreamSelection}\n            setMedia={this.setMedia}\n            resetMultiSelect={this.resetMultiSelect}\n          />\n        )}\n        {this.state.isVBrowserModalOpen && (\n          <VBrowserModal\n            isSubscriber={this.props.isSubscriber}\n            subscribeButton={subscribeButton}\n            closeModal={() => this.setState({ isVBrowserModalOpen: false })}\n            startVBrowser={this.startVBrowser}\n            user={this.props.user}\n          />\n        )}\n        {this.state.isScreenShareModalOpen && (\n          <ScreenShareModal\n            closeModal={() => this.setState({ isScreenShareModalOpen: false })}\n            startScreenShare={this.setupScreenShare}\n          />\n        )}\n        {this.state.isFileShareModalOpen && (\n          <FileShareModal\n            closeModal={() => this.setState({ isFileShareModalOpen: false })}\n            startFileShare={this.setupFileShare}\n          />\n        )}\n        {this.state.error && <ErrorModal error={this.state.error} />}\n        {this.state.isErrorAuth && (\n          <PasswordModal\n            savedPasswords={this.state.savedPasswords}\n            roomId={this.state.roomId}\n          />\n        )}\n        {this.state.errorMessage && (\n          <Message\n            negative\n            header=\"Error\"\n            content={this.state.errorMessage}\n            style={{\n              position: 'fixed',\n              bottom: '10px',\n              right: '10px',\n              zIndex: 1000,\n            }}\n          ></Message>\n        )}\n        {this.state.successMessage && (\n          <Message\n            positive\n            header=\"Success\"\n            content={this.state.successMessage}\n            style={{\n              position: 'fixed',\n              bottom: '10px',\n              right: '10px',\n              zIndex: 1000,\n            }}\n          ></Message>\n        )}\n        <TopBar\n          user={this.props.user}\n          isCustomer={this.props.isCustomer}\n          isSubscriber={this.props.isSubscriber}\n        />\n        {\n          <Grid stackable celled=\"internally\">\n            <Grid.Row>\n              <Grid.Column\n                width={this.state.showRightBar ? 12 : 15}\n                className=\"fullHeightColumn\"\n              >\n                <div\n                  style={{\n                    display: 'flex',\n                    flexDirection: 'column',\n                    height: '100%',\n                  }}\n                >\n                  <ComboBox\n                    setMedia={this.setMedia}\n                    playlistAdd={this.playlistAdd}\n                    playlistDelete={this.playlistDelete}\n                    playlistMove={this.playlistMove}\n                    currentMedia={this.state.currentMedia}\n                    getMediaDisplayName={this.getMediaDisplayName}\n                    launchMultiSelect={this.launchMultiSelect}\n                    streamPath={this.state.settings.streamPath}\n                    mediaPath={this.state.settings.mediaPath}\n                    disabled={!this.haveLock()}\n                    playlist={this.state.playlist}\n                  />\n                  <Separator />\n                  <div\n                    className=\"mobileStack\"\n                    style={{ display: 'flex', gap: '4px' }}\n                  >\n                    {this.screenShareStream && (\n                      <Button\n                        fluid\n                        className=\"toolButton\"\n                        icon\n                        labelPosition=\"left\"\n                        color=\"red\"\n                        onClick={this.stopScreenShare}\n                        disabled={sharer?.id !== this.socket?.id}\n                      >\n                        <Icon name=\"cancel\" />\n                        Stop Share\n                      </Button>\n                    )}\n                    {!this.screenShareStream && !sharer && !this.isVBrowser() && (\n                      <Popup\n                        content={`Share a tab or an application. Make sure to check \"Share audio\" for best results.`}\n                        trigger={\n                          <Button\n                            fluid\n                            className=\"toolButton\"\n                            disabled={!this.haveLock()}\n                            icon\n                            labelPosition=\"left\"\n                            color={'instagram'}\n                            onClick={() => {\n                              this.setState({ isScreenShareModalOpen: true });\n                            }}\n                          >\n                            <Icon name={'slideshare'} />\n                            Screenshare\n                          </Button>\n                        }\n                      />\n                    )}\n                    {!this.screenShareStream && !sharer && !this.isVBrowser() && (\n                      <Popup\n                        content=\"Launch a shared virtual browser\"\n                        trigger={\n                          <Button\n                            fluid\n                            className=\"toolButton\"\n                            disabled={!this.haveLock()}\n                            icon\n                            labelPosition=\"left\"\n                            color=\"green\"\n                            onClick={() => {\n                              this.setState({ isVBrowserModalOpen: true });\n                            }}\n                          >\n                            <Icon name=\"desktop\" />\n                            VBrowser\n                          </Button>\n                        }\n                      />\n                    )}\n                    {this.isVBrowser() && (\n                      <Popup\n                        content=\"Choose the person controlling the VBrowser\"\n                        trigger={\n                          <Dropdown\n                            icon=\"keyboard\"\n                            labeled\n                            className=\"icon\"\n                            style={{ height: '36px' }}\n                            button\n                            value={this.state.controller}\n                            placeholder=\"No controller\"\n                            clearable\n                            onChange={this.changeController}\n                            selection\n                            disabled={!this.haveLock()}\n                            options={this.state.participants.map((p) => ({\n                              text: this.state.nameMap[p.id] || p.id,\n                              value: p.id,\n                            }))}\n                          ></Dropdown>\n                        }\n                      />\n                    )}\n                    {this.isVBrowser() && (\n                      <Dropdown\n                        icon=\"desktop\"\n                        labeled\n                        className=\"icon\"\n                        style={{ height: '36px' }}\n                        button\n                        disabled={!this.haveLock()}\n                        value={this.state.vBrowserResolution}\n                        onChange={(_e, data) =>\n                          this.setState({\n                            vBrowserResolution: data.value as string,\n                          })\n                        }\n                        selection\n                        options={[\n                          {\n                            text: '1080p (WatchParty Plus)',\n                            value: '1920x1080@30',\n                            disabled: !this.state.isVBrowserLarge,\n                          },\n                          {\n                            text: '720p',\n                            value: '1280x720@30',\n                          },\n                          {\n                            text: '576p',\n                            value: '1024x576@60',\n                          },\n                          {\n                            text: '486p',\n                            value: '864x486@60',\n                          },\n                          {\n                            text: '360p',\n                            value: '640x360@60',\n                          },\n                        ]}\n                      ></Dropdown>\n                    )}\n                    {this.isVBrowser() && (\n                      <Button\n                        fluid\n                        className=\"toolButton\"\n                        icon\n                        labelPosition=\"left\"\n                        color=\"red\"\n                        disabled={!this.haveLock()}\n                        onClick={this.stopVBrowser}\n                      >\n                        <Icon name=\"cancel\" />\n                        Stop VBrowser\n                      </Button>\n                    )}\n                    {!this.screenShareStream && !sharer && !this.isVBrowser() && (\n                      <Popup\n                        content=\"Stream your own video file\"\n                        trigger={\n                          <Button\n                            fluid\n                            className=\"toolButton\"\n                            disabled={!this.haveLock()}\n                            icon\n                            labelPosition=\"left\"\n                            onClick={() => {\n                              this.setState({ isFileShareModalOpen: true });\n                            }}\n                          >\n                            <Icon name=\"file\" />\n                            File\n                          </Button>\n                        }\n                      />\n                    )}\n                    {false && (\n                      <SearchComponent\n                        setMedia={this.setMedia}\n                        playlistAdd={this.playlistAdd}\n                        type={'youtube'}\n                        streamPath={this.state.settings.streamPath}\n                        mediaPath={this.state.settings.mediaPath}\n                        disabled={!this.haveLock()}\n                      />\n                    )}\n                    {Boolean(this.state.settings.mediaPath) && (\n                      <SearchComponent\n                        setMedia={this.setMedia}\n                        playlistAdd={this.playlistAdd}\n                        type={'media'}\n                        streamPath={this.state.settings.streamPath}\n                        mediaPath={this.state.settings.mediaPath}\n                        disabled={!this.haveLock()}\n                      />\n                    )}\n                    {Boolean(this.state.settings.streamPath) && (\n                      <SearchComponent\n                        setMedia={this.setMedia}\n                        playlistAdd={this.playlistAdd}\n                        type={'stream'}\n                        streamPath={this.state.settings.streamPath}\n                        mediaPath={this.state.settings.mediaPath}\n                        launchMultiSelect={this.launchMultiSelect}\n                        disabled={!this.haveLock()}\n                      />\n                    )}\n                    {this.state.currentMedia &&\n                      !this.isScreenShare() &&\n                      !this.isVBrowser() &&\n                      !this.isYouTube() && (\n                        <Popup\n                          content=\"Upload a .srt subtitle file for this video\"\n                          trigger={\n                            <Button\n                              fluid\n                              color=\"violet\"\n                              className=\"toolButton\"\n                              icon\n                              labelPosition=\"left\"\n                              onClick={this.setSubtitle}\n                              disabled={!this.haveLock()}\n                            >\n                              <Icon name=\"closed captioning\" />\n                              Subtitle\n                            </Button>\n                          }\n                        />\n                      )}\n                  </div>\n                  <Separator />\n                  <div\n                    id=\"fullScreenContainer\"\n                    className={\n                      this.state.fullScreen ? 'fullScreenContainer' : ''\n                    }\n                    style={{ flexGrow: 1 }}\n                  >\n                    <div id=\"playerContainer\">\n                      {(this.state.loading ||\n                        !this.state.currentMedia ||\n                        this.state.nonPlayableMedia) && (\n                        <div\n                          id=\"loader\"\n                          className=\"videoContent\"\n                          style={{\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                          }}\n                        >\n                          {this.state.loading && (\n                            <Dimmer active>\n                              <Loader>\n                                {this.isVBrowser()\n                                  ? 'Launching virtual browser. This can take up to a minute.'\n                                  : ''}\n                              </Loader>\n                            </Dimmer>\n                          )}\n                          {!this.state.loading && !this.state.currentMedia && (\n                            <Message\n                              color=\"yellow\"\n                              icon=\"hand point up\"\n                              header=\"You're not watching anything!\"\n                              content=\"Pick something to watch above.\"\n                            />\n                          )}\n                          {!this.state.loading &&\n                            this.state.nonPlayableMedia && (\n                              <Message\n                                color=\"red\"\n                                icon=\"frown\"\n                                header=\"It doesn't look like this is a media file!\"\n                                content=\"Maybe you meant to launch a VBrowser if you're trying to visit a web page?\"\n                              />\n                            )}\n                        </div>\n                      )}\n                      <iframe\n                        style={{\n                          display:\n                            this.isYouTube() && !this.state.loading\n                              ? 'block'\n                              : 'none',\n                        }}\n                        title=\"YouTube\"\n                        id=\"leftYt\"\n                        className=\"videoContent\"\n                        allowFullScreen\n                        frameBorder=\"0\"\n                        allow=\"autoplay\"\n                        src=\"https://www.youtube.com/embed/?enablejsapi=1&controls=0&rel=0\"\n                      />\n                      {this.isVBrowser() &&\n                      this.getVBrowserPass() &&\n                      this.getVBrowserHost() ? (\n                        <VBrowser\n                          username={this.socket.id}\n                          password={this.getVBrowserPass()}\n                          hostname={this.getVBrowserHost()}\n                          controlling={this.state.controller === this.socket.id}\n                          setLoadingFalse={this.setLoadingFalse}\n                          resolution={this.state.vBrowserResolution}\n                          doPlay={this.doPlay}\n                          setResolution={(data: string) =>\n                            this.setState({ vBrowserResolution: data })\n                          }\n                        />\n                      ) : (\n                        <video\n                          style={{\n                            display:\n                              (this.isVideo() && !this.state.loading) ||\n                              this.state.fullScreen\n                                ? 'block'\n                                : 'none',\n                            width: '100%',\n                          }}\n                          id=\"leftVideo\"\n                          onEnded={this.onVideoEnded}\n                          playsInline\n                        ></video>\n                      )}\n                      {this.state.fullScreen && this.state.currentMedia && (\n                        <div className=\"controlsContainer\">{controls}</div>\n                      )}\n                    </div>\n                    {this.state.fullScreen && (\n                      <div className=\"fullScreenChat\">{rightBar}</div>\n                    )}\n                  </div>\n                  {this.state.currentMedia && controls}\n                  {Boolean(this.state.total) && (\n                    <div>\n                      <Progress\n                        size=\"tiny\"\n                        color=\"green\"\n                        inverted\n                        value={this.state.downloaded}\n                        total={this.state.total}\n                        // indicating\n                        label={\n                          Math.min(\n                            (this.state.downloaded / this.state.total) * 100,\n                            100\n                          ).toFixed(2) +\n                          '% - ' +\n                          formatSpeed(this.state.speed) +\n                          ' - ' +\n                          this.state.connections +\n                          ' connections'\n                        }\n                      ></Progress>\n                    </div>\n                  )}\n                </div>\n                <Button\n                  style={{\n                    position: 'absolute',\n                    top: '50%',\n                    right: 'calc(0% - 18px)',\n                    zIndex: 900,\n                  }}\n                  circular\n                  size=\"mini\"\n                  icon={this.state.showRightBar ? 'angle right' : 'angle left'}\n                  onClick={() =>\n                    this.setState({ showRightBar: !this.state.showRightBar })\n                  }\n                />\n              </Grid.Column>\n              {rightBar}\n            </Grid.Row>\n          </Grid>\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nexport const Separator = () => <div style={{ height: '4px', flexShrink: 0 }} />;\n","import React from 'react';\nimport { Divider, Header, Icon, Step } from 'semantic-ui-react';\n\nimport { NewRoomButton } from '../TopBar';\nimport styles from './Home.module.css';\n\nexport const Home = ({ user }: { user: firebase.User | undefined }) => {\n  return (\n    <div>\n      <div className={styles.container}>\n        <Hero\n          heroText={'Watch videos in-sync with friends far away.'}\n          subText={'No registration or download required.'}\n          action={\n            <div style={{ marginTop: '8px', width: '160px' }}>\n              <NewRoomButton user={user} />\n            </div>\n          }\n          image={'/screenshot4.png'}\n        />\n        <Divider horizontal>\n          <Header inverted as=\"h4\">\n            <Icon name=\"film\" />\n            Multiple ways to watch\n          </Header>\n        </Divider>\n        <div className={styles.featureSection}>\n          <Feature\n            icon=\"slideshare\"\n            title={`Screensharing`}\n            text=\"Share a browser tab or an application.\"\n          />\n          <Feature\n            icon=\"desktop\"\n            title={`VBrowser`}\n            text=\"Launch a virtual browser in the cloud that all room members can view and control. No need to worry about slow upload speeds!\"\n          />\n          <Feature\n            icon=\"file\"\n            title={`File`}\n            text=\"Upload and stream your own file.\"\n          />\n          <Feature\n            icon=\"linkify\"\n            title={`URL`}\n            text=\"Paste in a URL for everyone to watch from.\"\n          />\n          <Feature\n            icon=\"youtube\"\n            title={`YouTube`}\n            text=\"Watch videos in-sync from YouTube.\"\n          />\n        </div>\n        <Hero\n          heroText={'React to moments together.'}\n          subText={\"Find moments of shared joy even when you're apart.\"}\n          image={'/screenshot18.png'}\n          color=\"green\"\n        />\n        <Divider horizontal>\n          <Header inverted as=\"h4\">\n            <Icon name=\"cogs\" />\n            Features\n          </Header>\n        </Divider>\n        <div className={styles.featureSection}>\n          <Feature\n            icon=\"sync\"\n            title=\"Synchronized\"\n            text=\"Starts, stops, and seeks are synchronized to everyone, so take those restroom and snack breaks without worrying about falling behind.\"\n          />\n          <Feature\n            icon=\"conversation\"\n            title=\"Chat\"\n            text=\"Chat with others in your room. Memes and inside jokes encouraged.\"\n          />\n          <Feature\n            icon=\"video\"\n            title=\"Video chat\"\n            text=\"Jump into video chat if there's something that you just can't express with text.\"\n          />\n        </div>\n        <Hero\n          heroText={'Theater mode.'}\n          subText={\n            'Bring video and chat front-and-center for minimal distractions.'\n          }\n          image={'/screenshot14.png'}\n        />\n        <Divider horizontal />\n        <div\n          style={{\n            padding: '30px',\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n          }}\n        >\n          <div className={styles.heroText}>Get started!</div>\n          <div className={styles.featureSection}>\n            <Step.Group style={{ margin: '8px' }}>\n              <Step>\n                <Icon name=\"certificate\" />\n                <Step.Content>\n                  <Step.Title>1.</Step.Title>\n                  <Step.Description>Make a room</Step.Description>\n                </Step.Content>\n              </Step>\n\n              <Step>\n                <Icon name=\"group\" />\n                <Step.Content>\n                  <Step.Title>2.</Step.Title>\n                  <Step.Description>Share link with friends</Step.Description>\n                </Step.Content>\n              </Step>\n\n              <Step>\n                <Icon name=\"film\" />\n                <Step.Content>\n                  <Step.Title>3.</Step.Title>\n                  <Step.Description>Pick something to watch</Step.Description>\n                </Step.Content>\n              </Step>\n\n              <Step>\n                <Icon name=\"thumbs up outline\" />\n                <Step.Content>\n                  <Step.Title>4.</Step.Title>\n                  <Step.Description>Success!</Step.Description>\n                </Step.Content>\n              </Step>\n            </Step.Group>\n          </div>\n          <div style={{ width: '160px' }}>\n            <NewRoomButton user={user} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst Feature = ({\n  icon,\n  text,\n  title,\n}: {\n  icon: string;\n  text: string;\n  title: string;\n}) => {\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flex: '1 1 0px',\n        flexDirection: 'column',\n        alignItems: 'center',\n        padding: '10px',\n        minWidth: '180px',\n      }}\n    >\n      <Icon fitted size=\"huge\" name={icon as any} />\n      <h4 className={styles.featureTitle}>{title}</h4>\n      <div className={styles.featureText}>{text}</div>\n    </div>\n  );\n};\n\nconst Hero = ({\n  heroText,\n  subText,\n  action,\n  image,\n  color,\n}: {\n  heroText?: string;\n  subText?: string;\n  action?: React.ReactNode;\n  image?: string;\n  color?: string;\n}) => {\n  return (\n    <div className={`${styles.hero} ${color === 'green' ? styles.green : ''}`}>\n      <div className={styles.heroInner}>\n        <div style={{ padding: '30px', flex: '1 1 0' }}>\n          <div className={styles.heroText}>{heroText}</div>\n          <div className={styles.subText}>{subText}</div>\n          {action}\n        </div>\n        <div\n          style={{\n            flex: '1 1 0',\n          }}\n        >\n          <img\n            alt=\"hero\"\n            style={{ width: '100%', borderRadius: '10px' }}\n            src={image}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport ReactMarkdown from 'react-markdown';\n\nconst mdStyle = { color: 'white', margin: '50px', maxWidth: '800px' };\n\nexport const Privacy = () => {\n  return (\n    <div style={mdStyle}>\n      <ReactMarkdown>\n        {`\nPrivacy Policy\n====\n\nRooms\n----\n- By default, rooms are temporary and expire after one day of inactivity.\n- Users have the option of making a room permanent, which can be undone at any time.\n- We do not keep logs of the content that users watch.\n\nPersonal Information\n----\n- You are not required to register to use the service, but you have the option to sign in with an email or authentication provider, which will be used to display your name and picture in the rooms you join.\n- If you provide this information, we may use it to contact you regarding your use of the service, or to link your account to a subscription.\n- We do not sell personal information to third parties.\n- You have the right to request deletion of your user data, in accordance with various laws governing data protection. Please contact support@watchparty.me to request user data deletion.\n- Payment information is handled by providers such as Stripe. We do not collect or access financial information directly.\n\nCookies\n----\n- We use services such as Google Analytics to measure usage. These services may set cookies or other information locally on your device.\n\nVirtual Browsers\n----\n- Virtual machines are recycled after each session ends and any data on them is destroyed.\n- Your commands are encrypted while in-transit to the virtual machine.\n\nYouTube\n----\n- The service provides the ability to search and play YouTube videos. Google/YouTube may use data provided to the search service in accordance with the [Google Privacy Policy](https://policies.google.com/privacy).\n`}\n      </ReactMarkdown>\n    </div>\n  );\n};\n\nexport const Terms = () => {\n  return (\n    <div style={mdStyle}>\n      <ReactMarkdown>\n        {`\nTerms of Service\n====\nBy using this service you agree to the following terms:\n- You are over 13 years of age\n- Your use of the service may be terminated if you are found to be sharing illegal or infringing content\n- The service provides no guarantee of uptime or availability\n- You use the service at your own risk of encountering objectionable content, as we do not actively moderate rooms unless content is found to be illegal or infringing\n\nSubscriptions\n----\n- If you are dissatisfied with the service for any reason or believe you have been charged in error, please contact support@watchparty.me.\n- We will provide a full refund of the most recent payment, no questions asked.\n\nYouTube\n----\nThe service provides the ability to search and play YouTube videos. By using the YouTube search you agree to the [YouTube Terms of Service](https://www.youtube.com/t/terms).\n`}\n      </ReactMarkdown>\n    </div>\n  );\n};\n\nexport const FAQ = () => {\n  return (\n    <div style={mdStyle}>\n      <ReactMarkdown>\n        {`\nFAQ\n====\nWhat's a VBrowser?\n----\nA virtual browser (VBrowser) is a browser running in the cloud that a room's members can connect to. Everyone in the room sees the same thing, so it's a great way to watch videos or collaborate on tasks together.\n\nWhy did my VBrowser session stop?\n----\nVBrowsers will terminate automatically if no one is in the room for a while.\nVBrowser sessions are also limited to a maximum of 3 hours for free users, and 24 hours for subscribers.\n\nDoes everyone in the room need to be a subscriber to get the benefits?\n----\nNo, only the person who created the VBrowser needs to be.\n\nHow do I access sites that have a \"not available\" message in the VBrowser?\n----\nSome sites may block traffic that's detected as coming from certain geographic regions. You may need to install an extension like Hola VPN inside the virtual browser.\n\nHow come I'm not getting any audio when screensharing?\n----\nTo share audio, you must be using Chrome or Edge, sharing a tab (not application), and check a small checkbox at the bottom-left of the share screen dialog.\n\nIs there a limit to how many people can be in a room?\n----\nCurrently there isn't a hard limit, although the service hasn't been tested with more than 15 people or so. Screensharing and filesharing rely on one person uploading to everyone else, so it may not work well with large room sizes.\n`}\n      </ReactMarkdown>\n    </div>\n  );\n};\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nexport const Footer = () => (\n  <div style={{ margin: '1em', fontSize: '14px', color: 'white' }}>\n    <Link style={{ color: 'white' }} to=\"/terms\">\n      Terms\n    </Link>\n    {'  '}\n    <Link style={{ color: 'white' }} to=\"/privacy\">\n      Privacy\n    </Link>\n    {'  '}\n    <Link style={{ color: 'white' }} to=\"/faq\">\n      FAQ\n    </Link>\n  </div>\n);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import './index.css';\nimport 'semantic-ui-css/semantic.min.css';\n\nimport React, { lazy, Suspense } from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Route } from 'react-router-dom';\n\nimport App from './components/App';\nimport { Home } from './components/Home';\nimport { Privacy, Terms, FAQ } from './components/PrivacyTerms/PrivacyTerms';\nimport { TopBar } from './components/TopBar/TopBar';\nimport { Footer } from './components/Footer/Footer';\nimport * as serviceWorker from './serviceWorker';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport { serverPath } from './utils';\n\nconst Debug = lazy(() => import('./components/Debug/Debug'));\n\nconst firebaseConfig = process.env.REACT_APP_FIREBASE_CONFIG;\nif (firebaseConfig) {\n  firebase.initializeApp(JSON.parse(firebaseConfig));\n}\n\nclass WatchParty extends React.Component {\n  public state = {\n    user: undefined as firebase.User | undefined,\n    isSubscriber: false,\n    isCustomer: false,\n  };\n  async componentDidMount() {\n    if (firebaseConfig) {\n      firebase.auth().onAuthStateChanged(async (user: firebase.User | null) => {\n        if (user) {\n          // console.log(user);\n          this.setState({ user });\n          const token = await user.getIdToken();\n          const response = await window.fetch(\n            serverPath + `/metadata?uid=${user.uid}&token=${token}`\n          );\n          const data = await response.json();\n          this.setState({\n            isSubscriber: data.isSubscriber,\n            isCustomer: data.isCustomer,\n          });\n        }\n      });\n    }\n  }\n  render() {\n    return (\n      <React.StrictMode>\n        <BrowserRouter>\n          <Route\n            path=\"/\"\n            exact\n            render={(props) => {\n              if (props.location?.hash) {\n                return (\n                  <App\n                    user={this.state.user}\n                    isSubscriber={this.state.isSubscriber}\n                    isCustomer={this.state.isCustomer}\n                  />\n                );\n              }\n              return (\n                <React.Fragment>\n                  <TopBar\n                    user={this.state.user}\n                    isSubscriber={this.state.isSubscriber}\n                    isCustomer={this.state.isCustomer}\n                    hideNewRoom\n                  />\n                  <Home user={this.state.user} />\n                  <Footer />\n                </React.Fragment>\n              );\n            }}\n          />\n          <Route\n            path=\"/r/:vanity\"\n            exact\n            render={(props) => {\n              return (\n                <App\n                  user={this.state.user}\n                  isSubscriber={this.state.isSubscriber}\n                  isCustomer={this.state.isCustomer}\n                  vanity={props.match.params.vanity}\n                />\n              );\n            }}\n          />\n          <Route path=\"/terms\">\n            <TopBar\n              user={this.state.user}\n              isSubscriber={this.state.isSubscriber}\n              isCustomer={this.state.isCustomer}\n            />\n            <Terms />\n            <Footer />\n          </Route>\n          <Route path=\"/privacy\">\n            <TopBar\n              user={this.state.user}\n              isSubscriber={this.state.isSubscriber}\n              isCustomer={this.state.isCustomer}\n            />\n            <Privacy />\n            <Footer />\n          </Route>\n          <Route path=\"/faq\">\n            <TopBar\n              user={this.state.user}\n              isSubscriber={this.state.isSubscriber}\n              isCustomer={this.state.isCustomer}\n            />\n            <FAQ />\n            <Footer />\n          </Route>\n          <Route path=\"/debug\">\n            <TopBar\n              user={this.state.user}\n              isSubscriber={this.state.isSubscriber}\n              isCustomer={this.state.isCustomer}\n            />\n            <Suspense fallback={null}>\n              <Debug />\n            </Suspense>\n            <Footer />\n          </Route>\n        </BrowserRouter>\n      </React.StrictMode>\n    );\n  }\n}\nReactDOM.render(<WatchParty />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}